"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[737],{4230:function(e,t,n){n.d(t,{Z:function(){return R}});var o=n(82394),i=n(21831),r=n(82684),l=n(50724),d=n(1402),u=n(97618),s=n(70613),c=n(31557),a=n(68899),p=n(28598);function h(e,t){var n=e.children,o=e.noPadding;return(0,p.jsx)(a.HS,{noPadding:o,ref:t,children:n})}var f=r.forwardRef(h),v=n(62547),m=n(82571),j=n(77417),x=n(46684),g=n(98464),b=n(70515),y=n(53808),_=n(19183);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=25*b.iI,S=2*P;function w(e,t,n){var o=n.disable,i=n.refOther,l=n.setWidth,d=n.width,u=n.widthOverride,s=n.widthWindow,c=(0,r.useMemo)((function(){return"".concat(e,"_width")}),[e]),a=(0,y.U2)(c),p=(0,r.useState)(!1),h=p[0],f=p[1],v=(0,r.useState)(a||d),m=v[0],j=v[1],x=(0,r.useMemo)((function(){var e="undefined"!==typeof d&&u?d:m;return t.current=O(O({},t.current),{},{widthOverride:u,widthProp:d}),e||P}),[l,u,d,m]),b=(0,r.useCallback)((function(e){if(!o){var n,r,d,u,a,p=Math.max(s-(S+(null!==i&&void 0!==i&&null!==(n=i.current)&&void 0!==n&&n.disable?0:(null!==i&&void 0!==i&&null!==(r=i.current)&&void 0!==r&&r.widthOverride?null===i||void 0===i||null===(d=i.current)||void 0===d?void 0:d.widthProp:null===i||void 0===i||null===(u=i.current)||void 0===u?void 0:u.width)||P)),P+S+(null!==i&&void 0!==i&&null!==(a=i.current)&&void 0!==a&&a.disable?0:P)),h=Math.max(P,Math.min(p,e));e&&(j(h),(0,y.uN)(c,h),l&&l(h)),t.current=O(O({},t.current),{},{disable:o,width:h})}}),[o,c,i,l,s]),_=(0,g.Z)(s);(0,r.useEffect)((function(){s!==_&&b(s*(x/_))}),[x,s,_]);var Z=(0,g.Z)(d);return(0,r.useEffect)((function(){!o&&u&&Z!==d&&b(d)}),[o,b,u,d,Z]),{mousedownActive:h,setMousedownActive:f,setWidth:b,width:x}}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t){e.addProjectBreadcrumbToCustomBreadcrumbs;var n=e.after,o=e.afterHeader,h=e.afterHidden,g=e.afterWidth,b=e.afterWidthOverride,y=e.appendBreadcrumbs,Z=e.before,O=e.beforeHeader,P=e.beforeWidth,k=e.breadcrumbs,A=e.children,R=e.contained,C=e.errors,T=e.headerMenuItems,I=e.headerOffset,N=e.hideAfterCompletely,B=e.mainContainerHeader,M=e.navigationItems,D=e.setAfterHidden,L=e.setAfterWidth,U=e.setBeforeWidth,H=e.setErrors,W=e.subheaderChildren,F=e.subheaderNoPadding,G=e.title,Q=function(e,t){var n=t.disableAfter,o=t.disableBefore,i=t.setWidthAfter,l=t.setWidthBefore,d=t.widthAfter,u=t.widthBefore,s=t.widthOverrideAfter,c=t.widthOverrideBefore,a=(0,_.i)().width,p=(0,r.useMemo)((function(){return"layout_after_".concat(e)}),[e]),h=(0,r.useMemo)((function(){return"layout_before_".concat(e)}),[e]),f=(0,r.useRef)(null),v=(0,r.useState)(null),m=v[0],j=v[1],x=((0,r.useMemo)((function(){return Math.max(m-S,S)}),[m]),(0,r.useRef)({disable:n,widthOverride:s,width:null,widthProp:d})),g=(0,r.useRef)({disable:o,widthOverride:c,width:null,widthProp:u}),b=w(p,x,{disable:n,refOther:g,setWidth:i,width:d,widthOverride:s,widthWindow:a}),y=b.mousedownActive,Z=b.setMousedownActive,O=b.setWidth,P=b.width,k=w(h,g,{disable:o,refOther:x,setWidth:l,width:u,widthOverride:c,widthWindow:a}),E=k.mousedownActive,A=k.setMousedownActive,R=k.setWidth,C=k.width;return(0,r.useEffect)((function(){g.current={disable:o,width:C,widthOverride:c,widthProp:u}}),[o,C,c]),(0,r.useEffect)((function(){var e,t;null===f||void 0===f||!f.current||y||E||null===j||void 0===j||j(null===f||void 0===f||null===(e=f.current)||void 0===e||null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.width)}),[y,E,j,P,C,a]),{mainContainerRef:f,mousedownActiveAfter:y,mousedownActiveBefore:E,setMousedownActiveAfter:Z,setMousedownActiveBefore:A,setWidthAfter:O,setWidthBefore:R,widthAfter:P,widthBefore:C}}(e.uuid,{setWidthAfter:L,setWidthBefore:U,widthAfter:g,widthBefore:P,widthOverrideAfter:b}),Y=Q.mainContainerRef,V=Q.mousedownActiveAfter,K=Q.mousedownActiveBefore,z=Q.setMousedownActiveAfter,q=Q.setMousedownActiveBefore,X=Q.setWidthAfter,$=Q.setWidthBefore,J=Q.widthAfter,ee=Q.widthBefore,te=(0,j.Z)().project,ne=[];return k&&ne.push.apply(ne,(0,i.Z)(k)),null!==k&&void 0!==k&&k.length&&!y||!te||null!==k&&void 0!==k&&k.length||ne.unshift({bold:!y,label:function(){return G}}),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.Z,{title:G}),(0,p.jsx)(c.Z,{breadcrumbs:ne,menuItems:T}),(0,p.jsxs)(a.Nk,{ref:t,children:[0!==(null===M||void 0===M?void 0:M.length)&&(0,p.jsx)(a.lm,{showMore:!0,children:(0,p.jsx)(m.Z,{navigationItems:M,showMore:!0})}),(0,p.jsx)(u.Z,{flex:1,flexDirection:"column",children:(0,p.jsxs)(v.Z,{after:n,afterHeader:o,afterHeightOffset:x.Mz,afterHidden:h,afterMousedownActive:V,afterWidth:J,before:Z,beforeHeader:O,beforeHeightOffset:x.Mz,beforeMousedownActive:K,beforeWidth:Z?ee:a.k1,contained:R,headerOffset:I,hideAfterCompletely:!n||N,leftOffset:Z?a.k1:null,mainContainerHeader:B,mainContainerRef:Y,setAfterHidden:D,setAfterMousedownActive:z,setAfterWidth:X,setBeforeMousedownActive:q,setBeforeWidth:$,children:[W&&(0,p.jsx)(f,{noPadding:F,children:W}),A]})})]}),C&&(0,p.jsx)(l.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===H||void 0===H?void 0:H(null)},children:(0,p.jsx)(d.Z,E(E({},C),{},{onClose:function(){return null===H||void 0===H?void 0:H(null)}}))})]})}var R=r.forwardRef(A)},8569:function(e,t,n){n.d(t,{Z:function(){return ve}});var o=n(61049);function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function r(e,t,n){return r=i()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&(0,o.Z)(r,n.prototype),r},r.apply(null,arguments)}var l=n(21831),d=n(82394),u=n(75582),s=n(12691),c=n.n(s),a=n(25976),p=n(21764),h=n(82684),f=n(69864),v=n(34376),m=n(32013),j=n(98777),x=n(71180),g=n(31882),b=n(97618),y=n(55485),_=n(14466),Z=n(48670),O=n(88543),P=n(38276),S=n(30160),w=n(35686),k=n(72473),E=n(8193),A=n(70515),R=n(81728),C=n(3917),T=n(55283),I=n(50178),N=n(86735),B=n(72619),M=n(44085),D=n(17488),L=n(28598);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W="CUSTOM_VALUE_TYPE",F={compact:!0,monospace:!0,small:!0};var G=function(e){var t=e.leftKey,n=e.leftObjectKeys,o=e.leftObjectType,i=e.leftObjectTypeState,r=e.leftValue,l=e.leftValueType,u=e.rightAligned,s=e.setLeftKey,c=e.setLeftObjectTypeState,a=e.updatePredicate,p=(0,h.useRef)(null),f=(0,h.useState)(),v=f[0],m=f[1];(0,h.useEffect)((function(){var e,t;m(null===p||void 0===p||null===(e=p.current)||void 0===e||null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.width)}),[]),(0,h.useEffect)((function(){var e,t;m(null===p||void 0===p||null===(e=p.current)||void 0===e||null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.width)}),[o,i]);var j=(0,h.useMemo)((function(){return{alignItems:"center",justifyContent:u?"flex-start":"flex-end"}}),[u]),g=(0,h.useMemo)((function(){var e=(0,L.jsx)(S.ZP,{default:!0,small:!0,children:"Value data type"}),t=(0,L.jsx)(M.Z,{compact:!0,onChange:function(e){return a((0,d.Z)({},u?"right_value_type":"left_value_type",H(H({},l),{},{value_data_type:e.target.value})))},placeholder:"required",small:!0,value:null===l||void 0===l?void 0:l.value_data_type,children:Object.values(_.t4).map((function(e){return(0,L.jsx)("option",{value:e,children:e.toLowerCase()},e)}))});return(0,L.jsxs)(y.ZP,H(H({},j),{},{children:[u?t:e,(0,L.jsx)(P.Z,{mr:1}),u?e:t]}))}),[l,u,j,a]),b=(0,h.useMemo)((function(){var e=(0,L.jsx)(S.ZP,{default:!0,small:!0,children:"Get value from"}),t=W===String(i)||!o&&r,n=(0,L.jsxs)(M.Z,H(H({},F),{},{onChange:function(e){var t,n,o=e.target.value;(c(o),W===o)?a((t={},(0,d.Z)(t,u?"right_object_keys":"left_object_keys",null),(0,d.Z)(t,u?"right_object_type":"left_object_type",null),t)):a((n={},(0,d.Z)(n,u?"right_object_type":"left_object_type",o),(0,d.Z)(n,u?"right_value":"left_value",null),n))},placeholder:"required",value:t?W:o,children:[(0,L.jsx)("option",{value:W,children:"Custom value"}),Object.values(_.XG).map((function(e){return(0,L.jsx)("option",{value:e,children:e.toLowerCase()},e)}))]})),l=t&&(0,L.jsxs)(L.Fragment,{children:[!u&&(0,L.jsx)(P.Z,{mr:1}),(0,L.jsx)(D.Z,H(H({},F),{},{onChange:function(e){return a((0,d.Z)({},u?"right_value":"left_value",e.target.value))},value:r||""})),u&&(0,L.jsx)(P.Z,{mr:1})]});return(0,L.jsxs)(y.ZP,H(H({},j),{},{children:[!u&&e,u&&l,u&&n,(0,L.jsx)(P.Z,{mr:1}),!u&&n,!u&&l,u&&e]}))}),[o,i,r,c,j,a]),Z=(0,h.useMemo)((function(){return(0,L.jsxs)(L.Fragment,{children:[u&&(0,L.jsx)("div",{style:{paddingRight:4}}),(0,L.jsx)(x.ZP,{compact:!0,disabled:!t,onClick:function(){a((0,d.Z)({},u?"right_object_keys":"left_object_keys",(n||[]).concat(t))),s(null)},padding:"2px 6px",ref:p,small:!0,children:"Add key"}),!u&&(0,L.jsx)("div",{style:{paddingRight:4}})]})}),[t,n,u,s,a]),O=(0,h.useMemo)((function(){var e=(0,L.jsx)(S.ZP,{default:!0,small:!0,children:"Value extraction keys"}),i=(0,L.jsx)(D.Z,H(H({},F),{},{buttonAfter:!u&&Z,buttonAfterWidth:u||"undefined"===typeof v?null:v+10,buttonBefore:u&&Z,buttonBeforeWidth:u&&"undefined"!==typeof v?v+10:null,onChange:function(e){s(e.target.value)},placeholder:"Enter key...",value:t||""}));L.Fragment,L.Fragment;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(y.ZP,H(H({},j),{},{children:[u?i:e,(0,L.jsx)(P.Z,{mr:1}),u?e:i]})),(null===n||void 0===n?void 0:n.length)>=1&&(0,L.jsx)(P.Z,{mt:1,children:(0,L.jsxs)(y.ZP,H(H({},j),{},{children:[(0,L.jsx)(S.ZP,{default:!0,monospace:!0,xsmall:!0,children:o}),!(null!==n&&void 0!==n&&n.length)&&(0,L.jsxs)(S.ZP,{monospace:!0,muted:!0,xsmall:!0,children:["['",(0,L.jsx)(S.ZP,{default:!0,inline:!0,monospace:!0,xsmall:!0,children:"..."}),"']"]}),null===n||void 0===n?void 0:n.map((function(e){return(0,L.jsxs)(S.ZP,{monospace:!0,muted:!0,xsmall:!0,children:["['",(0,L.jsx)(S.ZP,{default:!0,inline:!0,monospace:!0,xsmall:!0,children:e}),"']"]})})),(0,L.jsx)("div",{style:{marginRight:4}}),(0,L.jsx)(x.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){a((0,d.Z)({},u?"right_object_keys":"left_object_keys",(n||[]).slice(0,Math.max(0,(null===n||void 0===n?void 0:n.length)-1))))},children:(0,L.jsxs)(y.ZP,{alignItems:"center",children:[(0,L.jsx)(k.Close,{danger:!0,size:1.25*A.iI}),(0,L.jsx)("div",{style:{marginRight:2}}),(0,L.jsx)(S.ZP,{default:!0,xsmall:!0,children:"Delete key"})]})})]}))})]})}),[v,Z,t,n,o,u,j]);return(0,L.jsxs)(L.Fragment,{children:[g,(0,L.jsx)(P.Z,{mt:1}),b,(0,L.jsx)(P.Z,{mt:1}),o&&W!==String(i)&&O]})},Q=n(65956),Y=n(44897),V=n(61896),K=1.25*A.iI,z=1.5*A.iI,q=A.iI/4,X=.75*A.iI,$=A.iI/2,J=(0,a.css)([""," ",""],(function(e){return!e.default&&"\n    background-color: ".concat((e.theme.accent||Y.Z.accent).purple,";\n  ")}),(function(e){return e.default&&"\n    background-color: ".concat((e.theme.content||Y.Z.content).muted,";\n  ")})),ee=a.default.div.withConfig({displayName:"indexstyle__LabelStyle",componentId:"sc-1v7t9a0-0"})(["border-radius:100px;padding:","px ","px;",""],q,z,(function(e){return"\n    background-color: ".concat((e.theme.background||Y.Z.background).chartBlock,";\n    border: ").concat(1,"px solid ").concat((e.theme.interactive||Y.Z.interactive).defaultBorder,";\n  ")})),te=a.default.div.withConfig({displayName:"indexstyle__CircleStyle",componentId:"sc-1v7t9a0-1"})(["",";border-radius:","px;height:","px;width:","px;",""],J,1.25*A.iI,K,K,(function(e){return"\n    border: 1px solid ".concat((e.theme.interactive||Y.Z.interactive).hoverBorder,";\n  ")})),ne=a.default.div.withConfig({displayName:"indexstyle__OperatorStyle",componentId:"sc-1v7t9a0-2"})(["",";min-width:","px;padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;"],J,K+2*(1+z),A.iI/4,$,$,A.iI/4+1),oe=a.default.div.withConfig({displayName:"indexstyle__VerticalLineStyle",componentId:"sc-1v7t9a0-3"})(["",";width:","px;margin-right:","px;"," ",""],J,X,z+1+K/2-X/2,(function(e){return e.last&&"\n    height: calc(50% - ".concat(q+1+V.dN/2,"px);\n  ")}),(function(e){return!e.last&&"\n    height: 100%;\n  "}));var ie=function(e){var t=e.andOrOperator,n=e.children,o=e.first,i=e.last,r=e.level,l=e.predicate,d=e.removePredicate,u=e.title,s=e.updatePredicate,c=(0,h.useRef)(null),a=(0,h.useState)(null),p=a[0],f=a[1],v=(0,h.useState)(null),m=v[0],j=v[1],g=(0,h.useState)(null),Z=g[0],O=g[1],w=(0,h.useState)(null),E=w[0],R=w[1],C=(0,h.useState)(null),T=(C[0],C[1]),I=(l.and_or_operator,l.left_object_keys),N=l.left_object_type,B=l.left_value,D=l.left_value_type,U=l.operator,H=l.right_object_keys,W=l.right_object_type,F=l.right_value,Y=l.right_value_type;(0,h.useEffect)((function(){var e,t;T(null===c||void 0===c||null===(e=c.current)||void 0===e||null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.height)}),[]),(0,h.useEffect)((function(){var e,t;T(null===c||void 0===c||null===(e=c.current)||void 0===e||null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.height)}),[N,W]);var V=(0,h.useMemo)((function(){if(!t)return null;var e=(0,L.jsx)(S.ZP,{bold:!0,center:!0,monospace:!0,uppercase:!0,children:t});return(0,L.jsx)(ne,{default:_.YB.OR===t,children:e})}),[t,r]);return(0,L.jsxs)(y.ZP,{children:[(0,L.jsxs)(y.ZP,{alignItems:"flex-end",flexDirection:"column",children:[!o&&i&&(0,L.jsx)(oe,{default:_.YB.OR===t,last:!0}),(0,L.jsx)(ee,{children:(0,L.jsxs)(y.ZP,{alignItems:"center",children:[(0,L.jsx)(S.ZP,{monospace:!0,children:u}),(0,L.jsx)(P.Z,{mr:1}),(0,L.jsx)(te,{default:_.YB.OR===t})]})}),!i&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(oe,{default:_.YB.OR===t}),V,(0,L.jsx)(oe,{default:_.YB.OR===t})]})]}),(0,L.jsx)(P.Z,{mr:A.cd}),(0,L.jsx)(b.Z,{flex:1,children:(0,L.jsxs)(y.ZP,{flexDirection:"column",fullWidth:!0,ref:c,children:[(0,L.jsxs)(Q.Z,{dark:!!(r%2),children:[(0,L.jsxs)(y.ZP,{children:[(0,L.jsxs)(b.Z,{flex:1,flexDirection:"column",children:[(0,L.jsxs)(y.ZP,{justifyContent:"center",children:[(0,L.jsxs)(y.ZP,{alignItems:"center",justifyContent:"flex-end",children:[!N&&"undefined"===typeof B&&(0,L.jsx)(S.ZP,{monospace:!0,muted:!0,small:!0,children:"Left expression"}),!N&&B&&(0,L.jsx)(S.ZP,{default:!0,monospace:!0,small:!0,children:_.t4.STRING===(null===D||void 0===D?void 0:D.value_data_type)?"'".concat(B,"'"):B}),N&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(S.ZP,{default:!0,monospace:!0,small:!0,children:N}),!(null!==I&&void 0!==I&&I.length)&&(0,L.jsxs)(S.ZP,{monospace:!0,muted:!0,small:!0,children:["['",(0,L.jsx)(S.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:"..."}),"']"]}),null===I||void 0===I?void 0:I.map((function(e){return(0,L.jsxs)(S.ZP,{monospace:!0,muted:!0,small:!0,children:["['",(0,L.jsx)(S.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:e}),"']"]})}))]})]}),(0,L.jsx)(P.Z,{mr:1}),(0,L.jsx)(S.ZP,{default:!0,monospace:!0,small:!0,children:U?_.N_[U]:"operator"}),(!U||!_.i9.includes(U))&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(P.Z,{mr:1}),(0,L.jsxs)(y.ZP,{alignItems:"center",justifyContent:"flex-start",children:[!W&&"undefined"===typeof F&&(0,L.jsx)(S.ZP,{monospace:!0,muted:!0,small:!0,children:"Right expression"}),!W&&F&&(0,L.jsx)(S.ZP,{default:!0,monospace:!0,small:!0,children:_.t4.STRING===(null===Y||void 0===Y?void 0:Y.value_data_type)?"'".concat(F,"'"):F}),W&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(S.ZP,{default:!0,monospace:!0,small:!0,children:W}),!(null!==H&&void 0!==H&&H.length)&&(0,L.jsxs)(S.ZP,{monospace:!0,muted:!0,small:!0,children:["['",(0,L.jsx)(S.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:"..."}),"']"]}),null===H||void 0===H?void 0:H.map((function(e){return(0,L.jsxs)(S.ZP,{monospace:!0,muted:!0,small:!0,children:["['",(0,L.jsx)(S.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:e}),"']"]})}))]})]})]})]}),(0,L.jsx)(P.Z,{mb:A.cd}),(0,L.jsxs)(y.ZP,{alignItems:"center",children:[(0,L.jsx)(b.Z,{flex:1,flexDirection:"column",children:(0,L.jsx)(G,{leftKey:m,leftObjectKeys:I,leftObjectType:N,leftObjectTypeState:p,leftValue:B,leftValueType:D,setLeftKey:j,setLeftObjectTypeState:f,updatePredicate:s})}),(0,L.jsx)(P.Z,{mr:A.cd}),(0,L.jsx)("div",{children:(0,L.jsx)(M.Z,{alignCenter:!0,compact:!0,onChange:function(e){return s({operator:e.target.value})},placeholder:"required",small:!0,value:U,children:Object.values(_.W6).map((function(e){return(0,L.jsx)("option",{value:e,children:_.N_[e]},e)}))})}),(0,L.jsx)(P.Z,{mr:A.cd}),(0,L.jsx)(b.Z,{flex:1,flexDirection:"column",children:(0,L.jsx)(G,{leftKey:E,leftObjectKeys:H,leftObjectType:W,leftObjectTypeState:Z,leftValue:F,leftValueType:Y,rightAligned:!0,setLeftKey:R,setLeftObjectTypeState:O,updatePredicate:s})})]})]}),(0,L.jsx)("div",{children:(0,L.jsx)(x.ZP,{beforeIcon:(0,L.jsx)(k.Trash,{muted:!0,size:1.25*A.iI}),compact:!0,onClick:function(){return d()},small:!0,children:(0,L.jsxs)(S.ZP,{default:!0,monospace:!0,small:!0,children:["Delete ",u]})})})]}),n]}),!i&&(0,L.jsx)(P.Z,{mb:A.cd})]})})]})};function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de={and_or_operator:_.YB.AND,left_value_type:{value_data_type:_.t4.STRING},operator:_.W6.EQUALS,right_value_type:{value_data_type:_.t4.STRING}};var ue=function(e){var t=e.index,n=e.level,o=e.predicate,i=e.renderPredicate,r=e.setPredicate,d=(0,h.useMemo)((function(){return(null===o||void 0===o?void 0:o.predicates)||[]}),[o]),u=((0,h.useCallback)((function(e){r({predicates:e})}),[r]),(0,h.useCallback)((function(){r({predicates:(d||[]).concat(de)})}),[d,r])),s=(0,h.useCallback)((function(e,t){var n=(0,l.Z)(d);n[t]=e,r({predicates:n})}),[d,r]),c=(0,h.useMemo)((function(){return(null===d||void 0===d?void 0:d.length)||0}),[d]),a=(0,h.useCallback)((function(e,t){if(!(e<0)){var n=(0,R.bH)()[t];return 0===e||(n=n.toLowerCase(),e>=2&&(n="".concat(n).concat(e-1))),n}}),[]),p=(0,h.useMemo)((function(){return a(n,t)}),[a,t,n]);return(0,L.jsxs)(L.Fragment,{children:[null===d||void 0===d?void 0:d.map((function(e,t){var l,u=function(n){return s(le(le({},e),n),t)};return(0,L.jsx)(ie,{andOrOperator:null===o||void 0===o?void 0:o.and_or_operator,first:0===t,last:t===c-1,level:n+1,predicate:e,removePredicate:function(){r(le(le({},e),{},{predicates:(0,N.oM)(d,t)}))},title:a(n+1,t),updatePredicate:u,children:(0,L.jsx)(P.Z,{mt:(null===e||void 0===e||null===(l=e.predicates)||void 0===l?void 0:l.length)>=1?A.cd:0,children:i({index:t,level:n+1,predicate:e,renderPredicate:i,setPredicate:u})})},"predicate-".concat(t))})),(0,L.jsx)(P.Z,{mt:A.cd,children:(0,L.jsxs)(y.ZP,{alignItems:"center",children:[n>=0&&(null===d||void 0===d?void 0:d.length)>=2&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(M.Z,{compact:!0,monospace:!0,onChange:function(e){return r(le(le({},o),{},{and_or_operator:e.target.value}))},small:!0,paddingVertical:3,value:null===o||void 0===o?void 0:o.and_or_operator,children:Object.values(_.YB).map((function(e){return(0,L.jsx)("option",{value:e,children:(_.YB.OR===e?"".concat(e," "):e).toUpperCase()},e)}))}),(0,L.jsx)(P.Z,{mr:1})]}),(0,L.jsxs)(x.ZP,{compact:n>=0,beforeIcon:(0,L.jsx)(k.Add,{}),onClick:function(){return u()},secondary:!0,small:n>=0,children:["Add predicate",p&&" in ".concat(p)]})]})})]})};function se(e){var t=e.index,n=e.level,o=e.predicate,i=e.renderPredicate,r=e.setPredicate;return(0,L.jsx)(ue,{index:t,level:n,predicate:o,renderPredicate:i,setPredicate:r})}var ce=n(42122),ae=n(70320),pe=n(23780);function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve=function(e){var t,n,o,i,d,s,M,D,U,H,W,F,G,Q,Y,V,K,z,q,X,$,J,ee,te,ne,oe=e.isNew,ie=e.operationType,re=e.resourceType,le=e.rootProject,de=e.uuid,ue=(0,ae.qB)(),he=(0,I.PR)(),ve=(0,v.useRouter)(),me="GlobalHookDetail/".concat(de),je=(0,h.useContext)(a.ThemeContext),xe=(0,h.useState)(null),ge=xe[0],be=xe[1],ye=(0,h.useState)(!1),_e=ye[0],Ze=ye[1],Oe=(0,h.useState)(ie),Pe=Oe[0],Se=(Oe[1],(0,h.useState)(re)),we=Se[0],ke=(Se[1],(0,pe.VI)(null,{},[],{uuid:me})),Ee=(0,u.Z)(ke,1)[0],Ae=(0,h.useMemo)((function(){return(0,ce.hB)(fe({include_operation_types:1,include_resource_types:1,include_snapshot_validation:1,operation_type:"undefined"===typeof Pe?null:Pe,resource_type:"undefined"===typeof we?null:we},le?{root_project:le}:{}))}),[Pe,we]),Re=w.ZP.global_hooks.detail(oe?"__new__":de,Ae).data,Ce=(0,h.useMemo)((function(){return null===Re||void 0===Re?void 0:Re.global_hook}),[Re]),Te=(0,h.useMemo)((function(){return{onErrorCallback:function(e){var t=e.error,n=t.errors,o=t.exception,i=t.message,r=t.type,l=e.response;return p.Am.error((null===n||void 0===n?void 0:n.error)||o||i,{position:p.Am.POSITION.BOTTOM_RIGHT,toastId:r}),Ee({errors:n,response:l})}}}),[]),Ie=(0,f.Db)(w.ZP.global_hooks.useCreate(),{onSuccess:function(e){return(0,B.wD)(e,fe({callback:function(e){var t=e.global_hook;ve.replace("/".concat(le?"platform/":"","global-hooks/").concat(t.uuid,"?operation_type=").concat(t.operation_type,"&resource_type=").concat(t.resource_type))}},Te))}}),Ne=(0,u.Z)(Ie,2),Be=Ne[0],Me=Ne[1].isLoading,De=(0,f.Db)(w.ZP.global_hooks.useUpdate(null===Ce||void 0===Ce?void 0:Ce.uuid,Ae),{onSuccess:function(e){return(0,B.wD)(e,fe({callback:function(e){var t=e.global_hook;Je((function(e){return fe(fe({},e),t)})),p.Am.success("Global hook changes successfully saved.",{position:p.Am.POSITION.BOTTOM_RIGHT,toastId:"global-hooks-success-".concat(t.uuid)})}},Te))}}),Le=(0,u.Z)(De,2),Ue=Le[0],He=Le[1].isLoading,We=(0,f.Db)((function(e){var t=e.pipeline;return w.ZP.global_hooks.useUpdate(null===Ce||void 0===Ce?void 0:Ce.uuid,Ae)({global_hook:{pipeline:t,snapshot:1}})}),{onSuccess:function(e){return(0,B.wD)(e,fe({callback:function(e){var t=e.global_hook;Je((function(e){return fe(fe({},e),{},{metadata:fe(fe({},null===e||void 0===e?void 0:e.metadata),null===t||void 0===t?void 0:t.metadata),pipeline:fe(fe({},null===e||void 0===e?void 0:e.pipeline),null===t||void 0===t?void 0:t.pipeline)})})),p.Am.success("Snapshot successfully created.",{position:p.Am.POSITION.BOTTOM_RIGHT,toastId:"global-hooks-snapshot-success-".concat(t.uuid)})}},Te))}}),Fe=(0,u.Z)(We,2),Ge=Fe[0],Qe=Fe[1].isLoading,Ye=(0,f.Db)(w.ZP.global_hooks.useDelete(null===Ce||void 0===Ce?void 0:Ce.uuid,Ae),{onSuccess:function(e){return(0,B.wD)(e,fe({callback:function(e){var t=e.global_hook;p.Am.success("Global hook changes successfully saved.",{position:p.Am.POSITION.BOTTOM_RIGHT,toastId:"global-hooks-success-".concat(t.uuid)}),ve.replace("/".concat(le?"platform/":"","global-hooks"))}},Te))}}),Ve=(0,u.Z)(Ye,2),Ke=Ve[0],ze=Ve[1].isLoading,qe=w.ZP.pipelines.list().data,Xe=(0,h.useMemo)((function(){return(0,N.YC)((null===qe||void 0===qe?void 0:qe.pipelines)||[],(function(e){return e.name}))}),[qe]),$e=(0,h.useMemo)((function(){return(0,N.HK)(Xe||[],(function(e){return e.uuid}))}),[Xe]),Je=(0,h.useCallback)((function(e){be(e),Ze(!0)}),[be,Ze]);(0,h.useEffect)((function(){Ce&&!ge&&be(Ce)}),[ge,Ce,be]);var et=(0,h.useMemo)((function(){return null!==ge&&void 0!==ge&&ge.operation_type&&null!==ge&&void 0!==ge&&ge.resource_type?"".concat((0,R.vg)(null===ge||void 0===ge?void 0:ge.operation_type)," ").concat(null===ge||void 0===ge?void 0:ge.resource_type," operation"):null!==ge&&void 0!==ge&&ge.resource_type?"".concat(null===ge||void 0===ge?void 0:ge.resource_type," operation"):null!==ge&&void 0!==ge&&ge.operation_type?"".concat(null===ge||void 0===ge?void 0:ge.operation_type," operation"):"operation"}),[ge]),tt=(0,h.useMemo)((function(){var e;return null===$e||void 0===$e?void 0:$e[null===ge||void 0===ge||null===(e=ge.pipeline)||void 0===e?void 0:e.uuid]}),[ge,$e]),nt=(0,h.useMemo)((function(){return(null===tt||void 0===tt?void 0:tt.blocks)||[]}),[tt]),ot=(0,h.useMemo)((function(){return(0,N.HK)(nt||[],(function(e){return e.uuid}))}),[nt]),it=(0,h.useMemo)((function(){return(null===ge||void 0===ge?void 0:ge.outputs)||[]}),[ge]),rt=(0,h.useCallback)((function(e,t){var n=(0,l.Z)(it||[]);n[t]=e,Je((function(e){return fe(fe({},e),{},{outputs:n})}))}),[it,Je]),lt=(0,h.useMemo)((function(){return(0,L.jsx)(x.ZP,{beforeIcon:(0,L.jsx)(k.Add,{}),compact:(null===it||void 0===it?void 0:it.length)>=1,small:(null===it||void 0===it?void 0:it.length)>=1,onClick:function(){return Je((function(e){return fe(fe({},e),{},{outputs:((null===e||void 0===e?void 0:e.outputs)||[]).concat({block:{uuid:null},key:_.TT.PAYLOAD})})}))},secondary:!0,children:"Add block output"})}),[it,Je]),dt=(0,h.useMemo)((function(){return null===it||void 0===it?void 0:it.map((function(e,t){var n,o,i=e.block,r=e.key,l=e.keyMore,d=e.keys,u=null===ot||void 0===ot?void 0:ot[null===i||void 0===i?void 0:i.uuid];return o=u?(0,L.jsx)(c(),{as:"/pipelines/".concat(null===tt||void 0===tt?void 0:tt.uuid,"/edit?block_uuid=").concat(null===u||void 0===u?void 0:u.uuid),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,L.jsx)(Z.Z,{block:!0,openNewWindow:!0,children:(0,L.jsx)(S.ZP,{color:(0,T.qn)(null===u||void 0===u?void 0:u.type,{blockColor:null===u||void 0===u?void 0:u.color,theme:je}).accent,monospace:!0,children:(null===u||void 0===u?void 0:u.uuid)||"[select a block]"})})}):(0,L.jsx)(S.ZP,{default:!0,monospace:!0,children:(null===u||void 0===u?void 0:u.uuid)||(null===i||void 0===i?void 0:i.uuid)||"[select a block]"}),(0,L.jsxs)(j.Z,{noBorderRadius:!0,noPaddingContent:!0,title:(0,L.jsxs)(y.ZP,{alignItems:"center",children:[o,(0,L.jsx)(P.Z,{mr:1}),(0,L.jsx)(k.PaginateArrowRight,{muted:!0}),(0,L.jsx)(P.Z,{mr:1}),(0,L.jsxs)(S.ZP,{default:!0,monospace:!0,children:[r||"{object}",(null===d||void 0===d?void 0:d.length)>=1&&(null===d||void 0===d?void 0:d.map((function(e){return(0,L.jsxs)(S.ZP,{default:!0,inline:!0,monospace:!0,children:["['",e,"']"]})})))]})]}),titleXPadding:A.cd*A.iI,titleYPadding:A.cd*A.iI,children:[(0,L.jsx)(O.S,{title:"Block to extract data from",description:"The output data from this block will be merged into the ".concat(et,"\u2019s data."),selectInput:{monospace:!0,onChange:function(n){return rt(fe(fe({},e),{},{block:fe(fe({},u),{},{uuid:n.target.value})}),t)},options:null===nt||void 0===nt?void 0:nt.map((function(e){return{label:e.name,value:e.uuid}})),placeholder:"Select a block",value:null===u||void 0===u?void 0:u.uuid}},"block-uuid-".concat(t)),(0,L.jsx)(O.S,{title:"Object to merge block output data into",description:"Select the ".concat(et," object to merge the block output data into."),selectInput:{monospace:!0,onChange:function(n){return rt(fe(fe({},e),{},{key:n.target.value}),t)},options:null===(n=Object.values(_.TT))||void 0===n?void 0:n.map((function(e){return{label:e,value:e}})),placeholder:"Select an object",value:r}},"key-".concat(t)),(0,L.jsxs)(O.S,{title:"Additional dictionary keys",description:(0,L.jsxs)(S.ZP,{muted:!0,small:!0,children:["If there is a nested object or value in the $",et," data that you want to merge the block output data into,",(0,L.jsx)("br",{}),"use these additional keys to instruct the hook on how nested you want to merge the block output data."]}),textInput:{fullWidth:!1,monospace:!0,placeholder:"optional",onChange:function(n){return rt(fe(fe({},e),{},{keyMore:n.target.value}),t)},value:l},children:[null===d||void 0===d?void 0:d.map((function(n){return(0,L.jsx)(P.Z,{ml:1,children:(0,L.jsx)(g.Z,{border:!0,label:n,monospace:!0,onClick:function(){rt(fe(fe({},e),{},{keys:(d||[]).filter((function(e){return e!==n}))}),t)}})},"keys-".concat(t,"-").concat(n))})),(null===d||void 0===d?void 0:d.length)>=1&&(0,L.jsx)(P.Z,{mr:A.cd}),l&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(x.ZP,{compact:!0,onClick:function(){rt(fe(fe({},e),{},{keyMore:"",keys:(d||[]).concat(l)}),t)},small:!0,children:["Add key ",l]}),(0,L.jsx)(P.Z,{mr:A.cd})]})]},"keys-".concat(t)),(0,L.jsx)(O.S,{title:"Remove block output",children:(0,L.jsx)(x.ZP,{compact:!0,onClick:function(){return Je((function(e){return fe(fe({},e),{},{outputs:(0,N.oM)((null===e||void 0===e?void 0:e.outputs)||[],t)})}))},small:!0,children:"Remove"})})]})}))}),[nt,ot,it,tt,rt]),ut=(0,h.useMemo)((function(){return(0,ce.GL)(ge||{},["conditions","operation_type","outputs","pipeline","predicate","resource_type","run_settings","stages","strategies"])}),[ge]),st=(0,h.useMemo)((function(){return(null===ge||void 0===ge?void 0:ge.metadata)||{created_at:null,snapshot_hash:null,snapshot_valid:!1,snapshotted_at:null,updated_at:null,user:{id:null}}}),[ge]),ct=(0,h.useMemo)((function(){return null===ge||void 0===ge?void 0:ge.predicate}),[ge]),at=(0,h.useMemo)((function(){return(0,L.jsx)(P.Z,{p:A.cd,children:se({level:-1,predicate:ct,renderPredicate:se,setPredicate:function(e){return Je((function(t){return fe(fe({},t),{},{predicate:fe(fe({},e),{},{and_or_operator:_.YB.OR})})}))}})})}),[ct,Je]);return(0,L.jsxs)(P.Z,{mb:8,p:A.cd,children:[(0,L.jsxs)(O.Z,{title:"What to run hook for",children:[(0,L.jsx)(O.S,{description:"This hook\u2019s UUID must be unique across all hooks for the same resource type and operation type.",invalid:_e&&!(null!==ge&&void 0!==ge&&ge.uuid),textInput:oe?{monospace:!0,onChange:function(e){return Je((function(t){return fe(fe({},t),{},{uuid:e.target.value})}))},placeholder:"e.g. bootstrap pipeline blocks",value:null===ge||void 0===ge?void 0:ge.uuid}:null,title:"Hook UUID",children:!oe&&(0,L.jsx)(P.Z,{px:A.cd,children:(0,L.jsx)(S.ZP,{large:!0,monospace:!0,children:de})})}),(0,L.jsx)(O.S,{description:"Select the resource this hook should be attached to.",invalid:_e&&!(null!==ge&&void 0!==ge&&ge.resource_type),selectInput:{monospace:!0,onChange:function(e){return Je((function(t){return fe(fe({},t),{},{resource_type:e.target.value})}))},options:null===ge||void 0===ge||null===(t=ge.resource_types)||void 0===t?void 0:t.map((function(e){return{label:(0,R.j3)(e),value:e}})),placeholder:"e.g. Pipeline",value:null===ge||void 0===ge?void 0:ge.resource_type},title:"Resource type"}),(0,L.jsx)(O.S,{description:"When a specific operation occurs for a given resource, this hook will be invoked for that specific operation on the configured resource.",invalid:_e&&!(null!==ge&&void 0!==ge&&ge.operation_type),selectInput:{monospace:!0,onChange:function(e){return Je((function(t){return fe(fe({},t),{},{operation_type:e.target.value})}))},options:null===ge||void 0===ge||null===(n=ge.operation_types)||void 0===n?void 0:n.map((function(e){return{label:(0,R.vg)(e),value:e}})),placeholder:"e.g. Update",value:null===ge||void 0===ge?void 0:ge.operation_type},title:"Operation type"}),!oe&&(0,L.jsx)(m.Z,{noBorder:!0,noBoxShadow:!0,visibleMappingForced:{0:!0},children:(0,L.jsxs)(j.Z,{noBorderRadius:!0,noPaddingContent:!0,title:"Targeting",titleXPadding:A.cd*A.iI,titleYPadding:A.cd*A.iI,children:[(0,L.jsx)(P.Z,{p:A.cd,children:(0,L.jsxs)(S.ZP,{default:!0,children:["Add targeting conditions to determine what subset of ",null!==ge&&void 0!==ge&&ge.resource_type?(0,R._6)((0,R.j3)(null===ge||void 0===ge?void 0:ge.resource_type),2,null,!0):"resources"," this hook should run for."]})}),at]})})]}),!oe&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(P.Z,{mb:A.cd}),(0,L.jsxs)(O.Z,{title:"When to run hook",children:[(0,L.jsx)(O.S,{title:"Before operation starts",description:"If enabled, this hook will be invoked before the ".concat(et," starts."),toggleSwitch:{checked:null===ge||void 0===ge||null===(o=ge.stages)||void 0===o?void 0:o.includes(_.SQ.BEFORE),onCheck:function(e){return Je((function(t){var n,o;return fe(fe({},t),{},{stages:e(null===t||void 0===t||null===(n=t.stages)||void 0===n?void 0:n.includes(_.SQ.BEFORE))?Array.from(r(Set,[((null===t||void 0===t?void 0:t.stages)||[]).concat(_.SQ.BEFORE)])):(null===t||void 0===t||null===(o=t.stages)||void 0===o?void 0:o.filter((function(e){return e!==_.SQ.BEFORE})))||[]})}))}}}),(0,L.jsx)(O.S,{title:"After operation completes",description:"If enabled, this hook will be invoked after the ".concat(et," ends."),toggleSwitch:{checked:null===ge||void 0===ge||null===(i=ge.stages)||void 0===i?void 0:i.includes(_.SQ.AFTER),onCheck:function(e){return Je((function(t){var n,o;return fe(fe({},t),{},{stages:e(null===t||void 0===t||null===(n=t.stages)||void 0===n?void 0:n.includes(_.SQ.AFTER))?Array.from(r(Set,[((null===t||void 0===t?void 0:t.stages)||[]).concat(_.SQ.AFTER)])):(null===t||void 0===t||null===(o=t.stages)||void 0===o?void 0:o.filter((function(e){return e!==_.SQ.AFTER})))||[]})}))}}}),(0,L.jsx)(O.S,{title:"Run if ".concat(et," succeeds"),description:"If enabled, this hook will be invoked if the ".concat(et," is successful and doesn\u2019t error."),toggleSwitch:{checked:null===ge||void 0===ge||null===(d=ge.conditions)||void 0===d?void 0:d.includes(_.sw.SUCCESS),onCheck:function(e){return Je((function(t){var n,o;return fe(fe({},t),{},{conditions:e(null===t||void 0===t||null===(n=t.conditions)||void 0===n?void 0:n.includes(_.sw.SUCCESS))?Array.from(r(Set,[((null===t||void 0===t?void 0:t.conditions)||[]).concat(_.sw.SUCCESS)])):(null===t||void 0===t||null===(o=t.conditions)||void 0===o?void 0:o.filter((function(e){return e!==_.sw.SUCCESS})))||[]})}))}}}),(0,L.jsx)(O.S,{title:"Run if ".concat(et," fails"),description:"If enabled, this hook will be invoked if the ".concat(et," fails with an error."),toggleSwitch:{checked:null===ge||void 0===ge||null===(s=ge.conditions)||void 0===s?void 0:s.includes(_.sw.FAILURE),onCheck:function(e){return Je((function(t){var n,o;return fe(fe({},t),{},{conditions:e(null===t||void 0===t||null===(n=t.conditions)||void 0===n?void 0:n.includes(_.sw.FAILURE))?Array.from(r(Set,[((null===t||void 0===t?void 0:t.conditions)||[]).concat(_.sw.FAILURE)])):(null===t||void 0===t||null===(o=t.conditions)||void 0===o?void 0:o.filter((function(e){return e!==_.sw.FAILURE})))||[]})}))}}})]}),(0,L.jsx)(P.Z,{mb:A.cd}),(0,L.jsxs)(O.Z,{title:"Code to run",description:"When the current hook gets triggered, it will execute the associated pipeline.",children:[(0,L.jsx)(O.S,{title:"Pipeline to execute",description:"Select a pipeline that will be executed every time this hook is triggered.",invalid:_e&&!(null!==ge&&void 0!==ge&&null!==(M=ge.pipeline)&&void 0!==M&&M.uuid),selectInput:{fullWidth:!1,monospace:!0,onChange:function(e){return Je((function(t){return fe(fe({},t),{},{pipeline:fe(fe({},null===t||void 0===t?void 0:t.pipeline),{},{uuid:e.target.value})})}))},options:null===Xe||void 0===Xe?void 0:Xe.map((function(e){var t=e.name,n=e.uuid;return{label:t||n,value:n}})),placeholder:"Select a pipeline",value:null===ge||void 0===ge||null===(D=ge.pipeline)||void 0===D?void 0:D.uuid},children:(null===ge||void 0===ge||null===(U=ge.pipeline)||void 0===U?void 0:U.uuid)&&(0,L.jsx)(P.Z,{mr:2,children:(0,L.jsx)(c(),{as:"/pipelines/".concat(null===ge||void 0===ge||null===(H=ge.pipeline)||void 0===H?void 0:H.uuid,"/edit"),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,L.jsx)(Z.Z,{block:!0,openNewWindow:!0,children:"View pipeline"})})})}),(0,L.jsxs)(O.S,{title:null===ge||void 0===ge||null===(W=ge.pipeline)||void 0===W||!W.uuid||null!==st&&void 0!==st&&st.snapshot_hash||null!==st&&void 0!==st&&st.snapshot_valid?"Valid code snapshot":"Code snapshot hasn\u2019t been created yet",description:(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(S.ZP,{muted:!0,small:!0,children:["Take a snapshot of ",null!==ge&&void 0!==ge&&null!==(F=ge.pipeline)&&void 0!==F&&F.uuid?(0,L.jsx)(S.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:null===ge||void 0===ge||null===(G=ge.pipeline)||void 0===G?void 0:G.uuid}):"the associated pipeline","\u2019s code. The snapshot is used to validate the hook before it runs.",(0,L.jsx)("br",{}),"A hook cannot run if ",null!==ge&&void 0!==ge&&null!==(Q=ge.pipeline)&&void 0!==Q&&Q.uuid?(0,L.jsx)(S.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:null===ge||void 0===ge||null===(Y=ge.pipeline)||void 0===Y?void 0:Y.uuid}):"the associated pipeline","\u2019s code has changed after the most recent snapshot has been made.",(0,L.jsx)("br",{}),"If the code changes, a new snapshot must be created."]})}),invalid:(null===ge||void 0===ge||null===(V=ge.pipeline)||void 0===V?void 0:V.uuid)&&(null===st||void 0===st?void 0:st.snapshot_hash)&&!(null!==st&&void 0!==st&&st.snapshot_valid),warning:(null===ge||void 0===ge||null===(K=ge.pipeline)||void 0===K?void 0:K.uuid)&&!(null!==st&&void 0!==st&&st.snapshot_hash)&&!(null!==st&&void 0!==st&&st.snapshot_valid),children:[!(null!==st&&void 0!==st&&st.snapshot_hash)&&(0,L.jsx)(S.ZP,{default:!0,large:!0,children:null!==ge&&void 0!==ge&&null!==(z=ge.pipeline)&&void 0!==z&&z.uuid?"No snapshot has been created":"Select a pipeline before taking a snapshot"}),(null===st||void 0===st?void 0:st.snapshot_hash)&&(0,L.jsx)(y.ZP,{flexDirection:"column",children:(0,L.jsx)(S.ZP,{danger:!(null!==st&&void 0!==st&&st.snapshot_valid),large:!0,rightAligned:!0,success:null===st||void 0===st?void 0:st.snapshot_valid,children:null!==st&&void 0!==st&&st.snapshot_valid?"Snapshot valid":"Snapshot outdated"})})]}),(0,L.jsx)(P.Z,{p:A.cd,children:(0,L.jsx)(y.ZP,{alignItems:"center",justifyContent:"flex-end",children:(0,L.jsxs)(y.ZP,{alignItems:"center",children:[(null===st||void 0===st?void 0:st.snapshotted_at)&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(S.ZP,{muted:!0,rightAligned:!0,small:!0,children:["Last snapshot at ",(0,L.jsx)(S.ZP,{inline:!0,muted:!0,small:!0,monospace:!0,children:null===st||void 0===st?void 0:st.snapshotted_at})]}),(0,L.jsx)(P.Z,{mr:A.cd})]}),(0,L.jsx)(x.ZP,{disabled:!(null!==ge&&void 0!==ge&&null!==(q=ge.pipeline)&&void 0!==q&&q.uuid),loading:Qe,onClick:function(){return Ge({pipeline:null===ge||void 0===ge?void 0:ge.pipeline})},primary:!(null!==st&&void 0!==st&&st.snapshot_valid),secondary:null===st||void 0===st?void 0:st.snapshot_valid,children:null!==st&&void 0!==st&&st.snapshot_hash?null!==st&&void 0!==st&&st.snapshot_valid?"Update snapshot even though it\u2019s valid":"Update snapshot to make it valid":"Create snapshot of code"})]})})})]}),(0,L.jsx)(P.Z,{mb:A.cd}),(0,L.jsxs)(O.Z,{title:"How to run hook",children:[(0,L.jsx)(O.S,{title:"Stop operation if hook fails",description:"If enabled, the ".concat(et," will be cancelled and an error will be raised."),toggleSwitch:{checked:null===ge||void 0===ge||null===(X=ge.strategies)||void 0===X?void 0:X.includes(_.Ij.RAISE),onCheck:function(e){return Je((function(t){var n,o;return fe(fe({},t),{},{strategies:e(null===t||void 0===t||null===(n=t.strategies)||void 0===n?void 0:n.includes(_.Ij.RAISE))?Array.from(r(Set,[((null===t||void 0===t?void 0:t.strategies)||[]).concat(_.Ij.RAISE)])):(null===t||void 0===t||null===(o=t.strategies)||void 0===o?void 0:o.filter((function(e){return e!==_.Ij.RAISE})))||[]})}))}}}),(0,L.jsx)(O.S,{title:"Execute hook with history and logging",description:(0,L.jsxs)(S.ZP,{muted:!0,small:!0,children:["If enabled, anytime this hook is executed an associated pipeline run and block runs will be created.",(0,L.jsx)("br",{}),"This will provide a history of the hook execution as well as logging for observability.",(0,L.jsx)("br",{}),"However, this will have a significant impact on the ",et," resolution time.",(0,L.jsx)("br",{}),"This may cause very delayed API responsed and a degraded devloper experience."]}),toggleSwitch:{checked:!(null===ge||void 0===ge||null===($=ge.run_settings)||void 0===$||!$.with_trigger),onCheck:function(e){return Je((function(t){var n;return fe(fe({},t),{},{run_settings:fe(fe({},null===t||void 0===t?void 0:t.run_settings),{},{with_trigger:e(null===t||void 0===t||null===(n=t.run_settings)||void 0===n?void 0:n.with_trigger)})})}))}}}),(0,L.jsx)(O.S,{title:"Run hook asynchronously",description:(0,L.jsxs)(S.ZP,{muted:!0,small:!0,children:["Hooks will execute the associated pipeline synchronously and prevent the current resource operation (e.g. API request) from resolving until all associated hooks for that resource operation are completed.",(0,L.jsx)("br",{}),"Hooks running synchronously can mutate the input data and output data. However, it can slow down the user experience in the application.",(0,L.jsx)("br",{}),"Enable this setting to run hooks asynchronously and not block the current resource operation from resolving.",(0,L.jsx)("br",{}),"However, asynchronous hooks cannot mutate the input data or output data. Use this asynchronous setting when hooks don\u2019t need to mutate data."]}),toggleSwitch:{checked:!(null===ge||void 0===ge||null===(J=ge.run_settings)||void 0===J||!J.asynchronous),onCheck:function(e){return Je((function(t){var n;return fe(fe({},t),{},{run_settings:fe(fe({},null===t||void 0===t?void 0:t.run_settings),{},{asynchronous:e(null===t||void 0===t||null===(n=t.run_settings)||void 0===n?void 0:n.asynchronous)})})}))}}})]}),(0,L.jsx)(P.Z,{mb:A.cd}),(0,L.jsxs)(O.Z,{title:"Block outputs ".concat((null===it||void 0===it?void 0:it.length)>=1?"(".concat((null===it||void 0===it?void 0:it.length)||0,")"):""),description:(0,L.jsx)(P.Z,{mt:1,children:(0,L.jsxs)(S.ZP,{muted:!0,children:["When a hook runs and executes a pipeline, the output from the pipeline\u2019s blocks",(0,L.jsx)("br",{}),"can optionally be used to mutate the ",et," input and output data."]})}),headerChildren:(null===it||void 0===it?void 0:it.length)>=1&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(P.Z,{ml:A.cd}),lt]}),children:[!(null!==it&&void 0!==it&&it.length)&&(0,L.jsx)(P.Z,{p:A.cd,children:lt}),(null===it||void 0===it?void 0:it.length)>=1&&(0,L.jsx)(m.Z,{noBorder:!0,noBoxShadow:!0,children:dt})]}),(0,L.jsx)(P.Z,{mb:A.cd}),(0,L.jsxs)(O.Z,{title:"Metadata",children:[(0,L.jsx)(O.S,{title:"Last updated",children:(0,L.jsxs)(b.Z,{alignItems:"center",flex:1,justifyContent:"flex-end",children:[(0,L.jsx)(S.ZP,{large:!0,monospace:!0,muted:!0,children:null!==st&&void 0!==st&&st.updated_at?(0,C.XG)(null===st||void 0===st?void 0:st.updated_at,ue):"-"}),(0,L.jsx)(P.Z,{mr:A.cd}),(0,L.jsx)(k.Schedule,{muted:!0,size:E.Z}),(0,L.jsx)(P.Z,{mr:1})]})}),(0,L.jsx)(O.S,{title:"Created at",children:(0,L.jsxs)(b.Z,{alignItems:"center",flex:1,justifyContent:"flex-end",children:[(0,L.jsx)(S.ZP,{large:!0,monospace:!0,muted:!0,children:null!==st&&void 0!==st&&st.created_at?(0,C.XG)(null===st||void 0===st?void 0:st.created_at,ue):"-"}),(0,L.jsx)(P.Z,{mr:A.cd}),(0,L.jsx)(k.Schedule,{muted:!0,size:E.Z}),(0,L.jsx)(P.Z,{mr:1})]})}),(0,L.jsx)(O.S,{title:"Snapshotted at",children:(0,L.jsxs)(b.Z,{alignItems:"center",flex:1,justifyContent:"flex-end",children:[(0,L.jsx)(S.ZP,{large:!0,monospace:!0,muted:!0,children:null!==st&&void 0!==st&&st.snapshotted_at?(0,C.XG)(null===st||void 0===st?void 0:st.snapshotted_at,ue):"-"}),(0,L.jsx)(P.Z,{mr:A.cd}),(0,L.jsx)(k.Schedule,{muted:!0,size:E.Z}),(0,L.jsx)(P.Z,{mr:1})]})}),(0,L.jsx)(O.S,{title:"Snapshot valid",children:(0,L.jsxs)(b.Z,{alignItems:"center",flex:1,justifyContent:"flex-end",children:[(0,L.jsx)(S.ZP,{large:!0,danger:!(null!==st&&void 0!==st&&st.snapshot_valid),muted:null===st||void 0===st?void 0:st.snapshot_valid,children:null!==st&&void 0!==st&&st.snapshot_valid?"Valid":"Hook won\u2019t run until snapshot is valid"}),(0,L.jsx)(P.Z,{mr:A.cd}),null!==st&&void 0!==st&&st.snapshot_valid?(0,L.jsx)(k.Check,{size:E.Z,success:!0}):(0,L.jsx)(k.AlertTriangle,{danger:!0,size:E.Z}),(0,L.jsx)(P.Z,{mr:1})]})}),(0,L.jsx)(O.S,{title:"Created by",children:(0,L.jsxs)(b.Z,{alignItems:"center",flex:1,justifyContent:"flex-end",children:[(0,L.jsx)(S.ZP,{large:!0,monospace:!0,muted:!0,children:null!==st&&void 0!==st&&null!==(ee=st.user)&&void 0!==ee&&ee.id?String(null===st||void 0===st||null===(te=st.user)||void 0===te?void 0:te.id)===String(null===he||void 0===he?void 0:he.id)?"You created this hook":"User ID ".concat(null===st||void 0===st||null===(ne=st.user)||void 0===ne?void 0:ne.id):"-"}),(0,L.jsx)(P.Z,{mr:A.cd}),(0,L.jsx)(k.UserSmileyFace,{muted:!0,size:E.Z}),(0,L.jsx)(P.Z,{mr:1})]})})]})]}),(0,L.jsx)(P.Z,{mt:A.HN,children:(0,L.jsxs)(y.ZP,{alignItems:"center",justifyContent:"space-between",children:[!oe&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(x.ZP,{compact:!0,danger:!0,loading:ze,onClick:function(){window.confirm("Are you sure you wantt to delete this hook?")&&Ke()},small:!0,children:"Delete global hook"}),(0,L.jsx)(P.Z,{mr:A.cd})]}),(0,L.jsxs)(b.Z,{flex:1,justifyContent:"flex-end",children:[(0,L.jsx)(x.ZP,{beforeIcon:(0,L.jsx)(k.PaginateArrowLeft,{}),disabled:Me||He||ze,onClick:function(){return ve.push("/".concat(le?"platform/":"","global-hooks"))},secondary:!0,children:_e?"Cancel changes & go back":"Go back to all hooks"}),(0,L.jsx)(P.Z,{mr:A.cd}),(0,L.jsx)(x.ZP,{beforeIcon:(0,L.jsx)(k.Save,{}),disabled:ze,loading:Me||He,onClick:function(){return(oe?Be:Ue)({global_hook:fe(fe(fe({},ut),oe?{uuid:null===ge||void 0===ge?void 0:ge.uuid}:{}),{},{root_project:le})})},primary:!0,children:oe?"Create new global hook":"Save changes"})]})]})})]})}},14466:function(e,t,n){n.d(t,{Ij:function(){return r},N_:function(){return v},SQ:function(){return l},TT:function(){return d},W6:function(){return p},XG:function(){return c},YB:function(){return s},i9:function(){return f},sw:function(){return u},t4:function(){return a}});var o,i,r,l,d,u,s,c,a,p,h=n(82394);!function(e){e.CREATE="create",e.DELETE="delete",e.DETAIL="detail",e.EXECUTE="execute",e.LIST="list",e.UPDATE="update",e.UPDATE_ANYWHERE="update_anywhere"}(i||(i={})),function(e){e.BREAK="break",e.CONTINUE="continue",e.RAISE="raise"}(r||(r={})),function(e){e.AFTER="after",e.BEFORE="before"}(l||(l={})),function(e){e.ERROR="error",e.META="meta",e.METADATA="metadata",e.PAYLOAD="payload",e.QUERY="query",e.RESOURCE="resource",e.RESOURCES="resources"}(d||(d={})),function(e){e.FAILURE="failure",e.SUCCESS="success"}(u||(u={})),function(e){e.AND="and",e.OR="or"}(s||(s={})),function(e){e.ERROR="error",e.HOOK="hook",e.META="meta",e.METADATA="metadata",e.OPERATION_RESOURCE="operation_resource",e.PAYLOAD="payload",e.QUERY="query",e.RESOURCE="resource",e.RESOURCES="resources",e.RESOURCE_ID="resource_id",e.RESOURCE_PARENT="resource_parent",e.RESOURCE_PARENT_ID="resource_parent_id",e.RESOURCE_PARENT_TYPE="resource_parent_type",e.USER="user"}(c||(c={})),function(e){e.BOOLEAN="BOOLEAN",e.DICTIONARY="DICTIONARY",e.FLOAT="FLOAT",e.INTEGER="INTEGER",e.LIST="LIST",e.STRING="STRING"}(a||(a={})),function(e){e.EQUALS="EQUALS",e.GREATER_THAN="GREATER_THAN",e.GREATER_THAN_OR_EQUALS="GREATER_THAN_OR_EQUALS",e.INCLUDES="INCLUDES",e.LESS_THAN="LESS_THAN",e.LESS_THAN_OR_EQUALS="LESS_THAN_OR_EQUALS",e.NOT_EQUALS="NOT_EQUALS",e.NOT_INCLUDES="NOT_INCLUDES",e.NOT_PRESENT="NOT_PRESENT",e.PRESENT="PRESENT"}(p||(p={}));var f=[p.NOT_PRESENT,p.PRESENT],v=(o={},(0,h.Z)(o,p.EQUALS,"=="),(0,h.Z)(o,p.GREATER_THAN,">"),(0,h.Z)(o,p.GREATER_THAN_OR_EQUALS,">="),(0,h.Z)(o,p.INCLUDES,"includes"),(0,h.Z)(o,p.LESS_THAN,"<"),(0,h.Z)(o,p.LESS_THAN_OR_EQUALS,"<="),(0,h.Z)(o,p.NOT_EQUALS,"!="),(0,h.Z)(o,p.NOT_INCLUDES,"not includes"),(0,h.Z)(o,p.NOT_PRESENT,"is not present"),(0,h.Z)(o,p.PRESENT,"is present"),o)},80022:function(e,t,n){function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return o}})},15544:function(e,t,n){function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}n.d(t,{Z:function(){return o}})},13692:function(e,t,n){n.d(t,{Z:function(){return i}});var o=n(61049);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,o.Z)(e,t)}},93189:function(e,t,n){n.d(t,{Z:function(){return r}});var o=n(12539),i=n(80022);function r(e,t){if(t&&("object"===o(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}},61049:function(e,t,n){function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}n.d(t,{Z:function(){return o}})}}]);