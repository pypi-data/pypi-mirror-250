"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9264],{84649:function(e,n,t){t.d(n,{EN:function(){return w},FX:function(){return I},HS:function(){return _},Nk:function(){return m},Rd:function(){return f},SL:function(){return C},Tj:function(){return Z},UE:function(){return j},Yf:function(){return v},ZG:function(){return c},bC:function(){return h},n5:function(){return p},n8:function(){return k},w5:function(){return y},wj:function(){return b},wl:function(){return g},ze:function(){return x}});var o=t(25976),i=t(44897),r=t(42631),u=t(46684),l=t(70515),a=t(91437),d=t(47041),c=2.5*l.iI,s=40*l.iI,p=10*l.iI,f=o.default.div.withConfig({displayName:"indexstyle__ContainedStyle",componentId:"sc-8sk2qr-0"})([""," overflow:auto;"," "," ",""],d.w5,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).page,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height-p,"px;\n  ")}),(function(e){return e.width&&"\n    width: ".concat(e.width-p,"px;\n  ")})),m=o.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-8sk2qr-1"})(["height:100%;position:relative;"]),h=o.default.div.withConfig({displayName:"indexstyle__NavigationStyle",componentId:"sc-8sk2qr-2"})(["position:fixed;width:","px;z-index:1;"," "," ",""],s,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n    border-right: 1px solid ").concat((e.theme.borders||i.Z.borders).light,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height-p,"px;\n  ")}),(function(e){return!e.height&&"\n    height: 100%;\n  "})),v=o.default.div.withConfig({displayName:"indexstyle__TabsStyle",componentId:"sc-8sk2qr-3"})(["padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;",""],1*l.iI,l.cd*l.iI,l.cd*l.iI,1*l.iI,(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.borders||i.Z.borders).light,";\n  ")})),g=o.default.div.withConfig({displayName:"indexstyle__LinksContainerStyle",componentId:"sc-8sk2qr-4"})([""," overflow:auto;position:fixed;width:","px;",""],d.w5,s,(function(e){return"\n    height: calc(100% - ".concat(55+(null!==e&&void 0!==e&&e.contained?p:u.Mz)+((null===e||void 0===e?void 0:e.heightOffset)||0),"px);\n  ")})),b=o.default.div.withConfig({displayName:"indexstyle__NavLinkStyle",componentId:"sc-8sk2qr-5"})([""," padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;&:hover{cursor:pointer;}",""],(0,a.eR)(),1*l.iI,l.cd*l.iI,l.cd*l.iI,1*l.iI,(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.background||i.Z.background).codeTextarea,";\n  ")})),x=o.default.div.withConfig({displayName:"indexstyle__IconStyle",componentId:"sc-8sk2qr-6"})([""," border-radius:","px;height:","px;margin-right:","px;padding:","px;width:","px;"," ",""],(0,a.eR)(),r.n_,5*l.iI,1.25*l.iI,1.25*l.iI,5*l.iI,(function(e){return!e.backgroundColor&&"\n    background-color: ".concat((e.theme.background||i.Z.background).chartBlock,";\n  ")}),(function(e){return e.backgroundColor&&"\n    background-color: ".concat(e.backgroundColor,";\n  ")})),y=o.default.div.withConfig({displayName:"indexstyle__ContentStyle",componentId:"sc-8sk2qr-7"})(["margin-left:","px;"],s),_=o.default.div.withConfig({displayName:"indexstyle__SubheaderStyle",componentId:"sc-8sk2qr-8"})(["padding:","px;",""],l.cd*l.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n    border-bottom: 1px solid ").concat((e.theme.borders||i.Z.borders).light,";\n  ")})),k=o.default.div.withConfig({displayName:"indexstyle__CardsStyle",componentId:"sc-8sk2qr-9"})(["display:flex;flex-wrap:wrap;padding:","px;"],.75*l.iI),j=o.default.div.withConfig({displayName:"indexstyle__CardStyle",componentId:"sc-8sk2qr-10"})(["border-radius:","px;margin:","px;padding:","px;width:","px;&:hover{cursor:pointer;}",""],r.n_,.75*l.iI,2.5*l.iI,50*l.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n    border: 1px solid ").concat((e.theme.background||i.Z.background).chartBlock,";\n    box-shadow: ").concat((e.theme.shadow||i.Z.shadow).frame,";\n  ")})),Z=o.default.div.withConfig({displayName:"indexstyle__CardTitleStyle",componentId:"sc-8sk2qr-11"})(["height:","px;"],2.5*l.iI),C=o.default.div.withConfig({displayName:"indexstyle__CardDescriptionStyle",componentId:"sc-8sk2qr-12"})(["height:","px;margin-top:","px;"],2.5*l.iI*2,1*l.iI),w=o.default.div.withConfig({displayName:"indexstyle__TagsStyle",componentId:"sc-8sk2qr-13"})(["height:","px;margin-top:","px;overflow:hidden;"],3.5*l.iI,.5*l.iI),I=o.default.div.withConfig({displayName:"indexstyle__BreadcrumbsStyle",componentId:"sc-8sk2qr-14"})(["padding-bottom:","px;padding-top:","px;",""],1*l.iI,1*l.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n    border-bottom: 1px solid ").concat((e.theme.borders||i.Z.borders).light,";\n  ")}))},88328:function(e,n,t){t.d(n,{Z:function(){return A}});var o=t(82394),i=t(75582),r=t(12691),u=t.n(r),l=t(21764),a=t(82684),d=t(69864),c=t(34376),s=t(71180),p=t(90299),f=t(44898),m=t(24138),h=t(97618),v=t(55485),g=t(48670),b=t(38276),x=t(30160),y=t(35576),_=t(17488),k=t(62547),j=t(35686),Z=t(94777),C=t(98464),w=t(46684),I={uuid:"Define"},O={uuid:"Document"},S=[I,O],D=t(70515),P=t(11302),U=t(68899),M=t(72619),N=t(23780),T=t(19183),R=t(28598);function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var A=function(e){var n=e.defaultTab,t=e.onMutateSuccess,o=e.pipelineUUID,r=e.template,E=e.templateAttributes,A=e.templateUUID,L=(0,T.i)().height,B=(w.Mz,(0,c.useRouter)()),F=(0,N.VI)(null,{},[],{uuid:"CustomTemplates/PipelineTemplateDetail"}),W=(0,i.Z)(F,1)[0],Y=(0,a.useState)(!1),H=Y[0],z=Y[1],K=(0,a.useState)(!1),V=K[0],G=K[1],X=(0,a.useState)(E),J=X[0],Q=X[1],$=(0,a.useCallback)((function(e){G(!0),Q(e)}),[]),ee=(0,C.Z)(r);(0,a.useEffect)((function(){(null===ee||void 0===ee?void 0:ee.template_uuid)!==(null===r||void 0===r?void 0:r.template_uuid)&&Q(r)}),[r,ee]);var ne=j.ZP.pipelines.detail(o).data,te=(0,a.useMemo)((function(){return(null===r||void 0===r?void 0:r.pipeline)||(null===ne||void 0===ne?void 0:ne.pipeline)}),[ne,r]),oe=(0,a.useMemo)((function(){return(null===te||void 0===te?void 0:te.blocks)||[]}),[te]),ie=(0,a.useMemo)((function(){return!r&&!A}),[r,A]),re=(0,a.useState)(n?S.find((function(e){return e.uuid===(null===n||void 0===n?void 0:n.uuid)})):S[0]),ue=re[0],le=re[1],ae=(0,a.useMemo)((function(){return!!ie&&!(null!==J&&void 0!==J&&J.template_uuid)}),[ie,J]),de=(0,a.useState)(!1),ce=de[0],se=de[1],pe=(0,a.useState)(ie?400:300),fe=pe[0],me=pe[1],he=(0,d.Db)(j.ZP.custom_templates.useCreate(),{onSuccess:function(e){return(0,M.wD)(e,{callback:function(e){var n=e.custom_template;t&&(null===t||void 0===t||t()),z(!0),setTimeout((function(){B.push("/templates/[...slug]","/templates/".concat(encodeURIComponent(null===n||void 0===n?void 0:n.template_uuid),"?object_type=").concat(f.R))}),1)},onErrorCallback:function(e,n){return W({errors:n,response:e})}})}}),ve=(0,i.Z)(he,2),ge=ve[0],be=ve[1].isLoading,xe=(0,d.Db)(j.ZP.custom_templates.useUpdate(r?encodeURIComponent(null===r||void 0===r?void 0:r.template_uuid):A&&encodeURIComponent(A),{object_type:f.R}),{onSuccess:function(e){return(0,M.wD)(e,{callback:function(e){var n=e.custom_template;t&&(null===t||void 0===t||t()),null!==r&&void 0!==r&&r.template_uuid&&(null===n||void 0===n?void 0:n.template_uuid)!==(null===r||void 0===r?void 0:r.template_uuid)||A&&(null===n||void 0===n?void 0:n.template_uuid)!==A?B.replace("/templates/[...slug]","/templates/".concat(encodeURIComponent(null===n||void 0===n?void 0:n.template_uuid),"?object_type=").concat(f.R)):(Q(n),G(!1),l.Am.success("Template successfully saved.",{position:l.Am.POSITION.BOTTOM_RIGHT,toastId:"custom_pipeline_template"}))},onErrorCallback:function(e,n){return W({errors:n,response:e})}})}}),ye=(0,i.Z)(xe,2),_e=ye[0],ke=ye[1].isLoading,je=(0,a.useCallback)((function(){var e={custom_template:q(q({},J),{},{object_type:f.R})};ie?ge(q(q({},e),{},{custom_template:q(q({},null===e||void 0===e?void 0:e.custom_template),{},{pipeline_uuid:o})})):_e(e)}),[ge,ie,o,J,_e]),Ze=(0,a.useMemo)((function(){return(0,R.jsxs)(v.ZP,{flexDirection:"column",fullHeight:!0,children:[(0,R.jsx)(P.Yf,{children:(0,R.jsx)(p.Z,{noPadding:!0,onClickTab:function(e){le(e)},selectedTabUUID:null===ue||void 0===ue?void 0:ue.uuid,tabs:S})}),(0,R.jsxs)(h.Z,{flexDirection:"column",children:[I.uuid===(null===ue||void 0===ue?void 0:ue.uuid)&&(0,R.jsxs)(R.Fragment,{children:[o&&(0,R.jsx)(b.Z,{mt:D.cd,px:D.cd,children:(0,R.jsxs)(x.ZP,{default:!0,children:["This pipeline template will be based off the pipeline ",(0,R.jsx)(u(),{as:"/pipelines/".concat(o),href:"/pipelines/[pipeline]",passHref:!0,children:(0,R.jsx)(g.Z,{bold:!0,default:!0,inline:!0,monospace:!0,openNewWindow:!0,children:o})}),"."]})}),(0,R.jsxs)(b.Z,{mt:D.cd,px:D.cd,children:[(0,R.jsxs)(b.Z,{mb:1,children:[(0,R.jsx)(x.ZP,{bold:!0,children:"Template UUID"}),(0,R.jsx)(x.ZP,{muted:!0,small:!0,children:"Unique identifier for custom template. The UUID will also determine where the custom template file is stored in the project. You can use nested folder names in the template\u2019s UUID."})]}),(0,R.jsx)(_.Z,{monospace:!0,onChange:function(e){return $((function(n){return q(q({},n),{},{template_uuid:e.target.value})}))},placeholder:"e.g. some_template_name",primary:!0,setContentOnMount:!0,value:(null===J||void 0===J?void 0:J.template_uuid)||""})]})]}),O.uuid===(null===ue||void 0===ue?void 0:ue.uuid)&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(b.Z,{mt:D.cd,px:D.cd,children:[(0,R.jsxs)(b.Z,{mb:1,children:[(0,R.jsx)(x.ZP,{bold:!0,children:"Name"}),(0,R.jsx)(x.ZP,{muted:!0,small:!0,children:"A human readable name for your template."})]}),(0,R.jsx)(_.Z,{onChange:function(e){return $((function(n){return q(q({},n),{},{name:e.target.value})}))},primary:!0,setContentOnMount:!0,value:(null===J||void 0===J?void 0:J.name)||""})]}),(0,R.jsx)(b.Z,{mt:D.cd,px:D.cd,children:(0,R.jsx)(y.Z,{label:"Description",onChange:function(e){return $((function(n){return q(q({},n),{},{description:e.target.value})}))},primary:!0,setContentOnMount:!0,value:(null===J||void 0===J?void 0:J.description)||""})})]})]}),(0,R.jsx)(P.ig,{children:(0,R.jsx)(b.Z,{p:D.cd,children:(0,R.jsx)(v.ZP,{children:(0,R.jsxs)(s.ZP,{disabled:ae,fullWidth:!0,loading:be||ke,onClick:function(){return je()},primary:!0,children:[!ie&&"Save template",ie&&"Create new template"]})})})})]})}),[ae,be,ke,ie,o,je,null===ue||void 0===ue?void 0:ue.uuid,$,J]),Ce=(0,Z.Z)({shouldWarn:!H&&V,warningMessage:"You have unsaved changes. Are you sure you want to leave?"}).ConfirmLeaveModal;return(0,R.jsxs)(k.Z,{before:Ze,beforeHidden:ce,beforeWidth:fe,leftOffset:U.k1,setBeforeHidden:se,setBeforeWidth:me,children:[(0,R.jsx)(Ce,{}),(0,R.jsx)(m.ZP,{blocks:oe,height:L,heightOffset:w.Mz,noStatus:!0,pipeline:te})]})}},11302:function(e,n,t){t.d(n,{Nk:function(){return a},Yf:function(){return c},bC:function(){return d},ig:function(){return s},w5:function(){return p}});var o=t(25976),i=t(44897),r=t(70515),u=t(84649),l=(r.iI,40*r.iI),a=o.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-axgvn9-0"})(["height:100%;position:relative;"]),d=o.default.div.withConfig({displayName:"indexstyle__NavigationStyle",componentId:"sc-axgvn9-1"})(["overflow:auto;position:fixed;width:","px;z-index:1;"," "," ",""],l,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n    border-right: 1px solid ").concat((e.theme.borders||i.Z.borders).light,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height-u.n5,"px;\n  ")}),(function(e){return!e.height&&"\n    height: 100%;\n  "})),c=o.default.div.withConfig({displayName:"indexstyle__TabsStyle",componentId:"sc-axgvn9-2"})(["padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;width:100%;",""],1*r.iI,r.cd*r.iI,r.cd*r.iI,1*r.iI,(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.borders||i.Z.borders).light,";\n  ")})),s=o.default.div.withConfig({displayName:"indexstyle__ButtonsStyle",componentId:"sc-axgvn9-3"})(["margin-top:","px;width:100%;",""],r.cd*r.iI,(function(e){return"\n    border-top: 1px solid ".concat((e.theme.borders||i.Z.borders).light,";\n  ")})),p=o.default.div.withConfig({displayName:"indexstyle__ContentStyle",componentId:"sc-axgvn9-4"})(["margin-left:","px;"],l)},5755:function(e,n,t){t.d(n,{Z:function(){return z}});var o=t(82394),i=t(75582),r=t(56085),u=t(82684),l=t(65701),a=t(1254),d=t(21764),c=t(69864),s=t(34376),p=t(40761),f=t(71180),m=t(90299),h=t(18746),v=t(44898),g=t(97618),b=t(55485),x=t(38276),y=t(44085),_=t(30160),k=t(35576),j=t(17488),Z=t(35686),C=t(94777),w=t(98464),I=t(44425),O=t(11302),S=t(48339),D=t(39643),P={uuid:"Define"},U={uuid:"Document"},M=[P,U],N=t(11498),T=t(70515),R=t(57653),E=t(4383),q=t(72619),A=t(42041),L=t(23780),B=t(44688),F=t(19183),W=t(28598);function Y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function H(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var z=function(e){var n=e.contained,t=e.defaultTab,Y=e.heightOffset,z=e.onCancel,K=e.onCreateCustomTemplate,V=e.onMutateSuccess,G=e.template,X=e.templateAttributes,J=e.templateUUID,Q=(0,F.i)().height,$=(0,s.useRouter)(),ee=(0,L.VI)(null,{},[],{uuid:"CustomTemplates/TemplateDetail"}),ne=(0,i.Z)(ee,1)[0],te=(0,u.useState)(Number(new Date)),oe=te[0],ie=te[1],re=(0,u.useState)(!1),ue=re[0],le=re[1],ae=(0,u.useState)(!1),de=ae[0],ce=ae[1],se=(0,u.useState)(t?M.find((function(e){return e.uuid===(null===t||void 0===t?void 0:t.uuid)})):M[0]),pe=se[0],fe=se[1],me=(0,u.useState)(!1),he=me[0],ve=me[1],ge=(0,u.useState)(X),be=ge[0],xe=ge[1],ye=(0,u.useCallback)((function(e){ve(!0),xe(e)}),[]),_e=Z.ZP.custom_templates.detail(!G&&J&&encodeURIComponent(J),{object_type:v.Z}).data,ke=(0,u.useMemo)((function(){return G||(null===_e||void 0===_e?void 0:_e.custom_template)}),[_e,G]),je=(0,w.Z)(ke);(0,u.useEffect)((function(){(null===je||void 0===je?void 0:je.template_uuid)!==(null===ke||void 0===ke?void 0:ke.template_uuid)&&(ie(Number(new Date)),xe(ke),ce(!0))}),[ke,je]);var Ze=(0,c.Db)(Z.ZP.custom_templates.useCreate(),{onSuccess:function(e){return(0,q.wD)(e,{callback:function(e){var n=e.custom_template;V&&(null===V||void 0===V||V()),K?null===K||void 0===K||K(n):(le(!0),setTimeout((function(){$.push("/templates/[...slug]","/templates/".concat(encodeURIComponent(null===n||void 0===n?void 0:n.template_uuid)))}),1))},onErrorCallback:function(e,n){return ne({errors:n,response:e})}})}}),Ce=(0,i.Z)(Ze,2),we=Ce[0],Ie=Ce[1].isLoading,Oe=(0,c.Db)(Z.ZP.custom_templates.useUpdate(G?encodeURIComponent(null===G||void 0===G?void 0:G.template_uuid):J&&encodeURIComponent(J),{object_type:v.Z}),{onSuccess:function(e){return(0,q.wD)(e,{callback:function(e){var n=e.custom_template;V&&(null===V||void 0===V||V()),xe(n),ve(!1),d.Am.success("Template successfully saved.",{position:d.Am.POSITION.BOTTOM_RIGHT,toastId:"custom_block_template"})},onErrorCallback:function(e,n){return ne({errors:n,response:e})}})}}),Se=(0,i.Z)(Oe,2),De=Se[0],Pe=Se[1].isLoading,Ue=(0,u.useMemo)((function(){return I.tf.MARKDOWN===(null===be||void 0===be?void 0:be.block_type)}),[null===be||void 0===be?void 0:be.block_type]),Me=!G&&!J,Ne=(0,u.useMemo)((function(){return!!Me&&(!(null!==be&&void 0!==be&&be.template_uuid)||!(null!==be&&void 0!==be&&be.block_type)||!Ue&&!(null!==be&&void 0!==be&&be.language))}),[Ue,Me,be]),Te=Z.ZP.kernels.list({},{refreshInterval:5e3,revalidateOnFocus:!0}),Re=Te.data,Ee=Te.mutate,qe=null===Re||void 0===Re?void 0:Re.kernels,Ae=(null===qe||void 0===qe?void 0:qe.find((function(e){return e.name===R.a_[R.qL.PYTHON]})))||(null===qe||void 0===qe?void 0:qe[0]),Le=(0,c.Db)(Z.ZP.kernels.useUpdate(null===Ae||void 0===Ae?void 0:Ae.id),{onSuccess:function(e){return(0,q.wD)(e,{callback:function(){return Ee()},onErrorCallback:function(e,n){return ne({errors:n,response:e})}})}}),Be=(0,i.Z)(Le,1)[0],Fe=(0,u.useCallback)((function(){Be({kernel:{action_type:"interrupt"}}),Ve([])}),[Be]),We=(0,u.useState)({}),Ye=We[0],He=We[1],ze=(0,u.useState)([]),Ke=ze[0],Ve=ze[1],Ge=(0,u.useMemo)((function(){return{language:null===be||void 0===be?void 0:be.language,name:null===be||void 0===be?void 0:be.name,type:null===be||void 0===be?void 0:be.block_type,uuid:null===be||void 0===be?void 0:be.template_uuid}}),[be]),Xe=(0,u.useMemo)((function(){return new p.Z}),[]),Je=(0,u.useMemo)((function(){return{api_key:N.lG,token:Xe.decodedToken.token}}),[Xe]),Qe=(0,r.ZP)((0,E.Ib)(),{onClose:function(){return console.log("socketUrlPublish closed")},onMessage:function(e){if(e){var n=JSON.parse(e.data),t=n.execution_state,i=n.uuid;if(!i)return;He((function(e){var t=e[i]||[];return H(H({},e),{},(0,o.Z)({},i,t.concat(n)))})),S.uF.BUSY===t?Ve((function(e){return e.find((function(e){var n=e.uuid;return i===n}))||!Ge?e:e.concat(Ge)})):S.uF.IDLE===t&&Ve((function(e){return e.filter((function(e){var n=e.uuid;return i!==n}))}))}},onOpen:function(){return console.log("socketUrlPublish opened")},reconnectAttempts:10,reconnectInterval:3e3,shouldReconnect:function(){return console.log("Attempting to reconnect..."),!0}}).sendMessage,$e=(0,u.useCallback)((function(e){var n=e.block,t=e.code,o=e.ignoreAlreadyRunning,i=e.runDownstream,r=void 0!==i&&i,u=e.runIncompleteUpstream,l=void 0!==u&&u,a=e.runSettings,d=void 0===a?{}:a,c=e.runTests,s=void 0!==c&&c,p=e.runUpstream,f=n.extension_uuid,m=n.upstream_blocks,h=n.uuid;Ke.find((function(e){var n=e.uuid;return h===n}))&&!o||(Qe(JSON.stringify(H(H({},Je),{},{code:t,extension_uuid:f,run_downstream:r,run_incomplete_upstream:l,run_settings:d,run_tests:s,run_upstream:p,type:n.type,upstream_blocks:m,uuid:h}))),He((function(e){return delete e[h],e})),Ve((function(e){return e.find((function(e){var n=e.uuid;return h===n}))?e:e.concat(n)})))}),[Ke,Qe,He,Ve,Je]),en=(0,u.useMemo)((function(){return Ke.reduce((function(e,n,t){return H(H({},e),{},(0,o.Z)({},n.uuid,H(H({},n),{},{priority:t})))}),{})}),[Ke]),nn=(0,u.useMemo)((function(){if(!de)return(0,W.jsx)("div",{});var e=en[null===Ge||void 0===Ge?void 0:Ge.uuid],n=e?0===e.priority?S.uF.BUSY:S.uF.QUEUED:S.uF.IDLE;return(0,W.jsx)(h.Z,{block:Ge,defaultValue:null===be||void 0===be?void 0:be.content,disableDrag:!0,executionState:n,hideExtraCommandButtons:!0,hideExtraConfiguration:!0,hideHeaderInteractiveInformation:!0,interruptKernel:Fe,messages:null===Ye||void 0===Ye?void 0:Ye[null===Ge||void 0===Ge?void 0:Ge.uuid],noDivider:!0,onChange:function(e){return ye((function(n){return H(H({},n),{},{content:e})}))},runBlock:$e,runningBlocks:Ke,selected:!0,setErrors:ne,textareaFocused:!0},String(oe))}),[Ge,oe,Fe,Ye,de,$e,Ke,en,ye,ne,be]),tn=(0,u.useCallback)((function(){var e={custom_template:H(H({},be),{},{language:Ue?I.t6.MARKDOWN:null===be||void 0===be?void 0:be.language,object_type:v.Z})};Me?we(e):De(e)}),[we,Ue,Me,be,De]),on="CustomTemplates/TemplateDetail",rn=(0,B.y)(),un=rn.registerOnKeyDown,ln=rn.unregisterOnKeyDown;(0,u.useEffect)((function(){return function(){ln(on)}}),[ln,on]),un(on,(function(e,n){if(he&&(0,A.y)([D.zX,D.hS],n)){e.preventDefault();"undefined"!==typeof location&&window.confirm("You have changes that are unsaved. Click cancel and save your changes before reloading page.")&&location.reload()}else((0,A.y)([D.zX,D.Um],n)||(0,A.y)([D.PQ,D.Um],n))&&(e.preventDefault(),tn())}),[tn,he]);var an=(0,u.useMemo)((function(){return Q-Y}),[Q,Y]),dn=(0,C.Z)({shouldWarn:!ue&&he,warningMessage:"You have unsaved changes. Are you sure you want to leave?"}).ConfirmLeaveModal;return(0,W.jsxs)(O.Nk,{children:[(0,W.jsx)(dn,{}),(0,W.jsx)(O.bC,{height:n?an:null,children:(0,W.jsxs)(b.ZP,{flexDirection:"column",fullHeight:!0,children:[(0,W.jsx)(O.Yf,{children:(0,W.jsx)(m.Z,{noPadding:!0,onClickTab:function(e){fe(e)},selectedTabUUID:null===pe||void 0===pe?void 0:pe.uuid,tabs:Me?M.slice(0,1):M})}),(0,W.jsxs)(g.Z,{flexDirection:"column",children:[P.uuid===(null===pe||void 0===pe?void 0:pe.uuid)&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(x.Z,{mt:T.cd,px:T.cd,children:[(0,W.jsxs)(x.Z,{mb:1,children:[(0,W.jsx)(_.ZP,{bold:!0,children:"Template UUID"}),(0,W.jsx)(_.ZP,{muted:!0,small:!0,children:"Unique identifier for custom template. The UUID will also determine where the custom template file is stored in the project. You can use nested folder names in the template\u2019s UUID."})]}),(0,W.jsx)(j.Z,{monospace:!0,onChange:function(e){return ye((function(n){return H(H({},n),{},{template_uuid:e.target.value})}))},placeholder:"e.g. some_template_name",primary:!0,setContentOnMount:!0,value:(null===be||void 0===be?void 0:be.template_uuid)||""})]}),(0,W.jsx)(x.Z,{mt:T.cd,px:T.cd,children:(0,W.jsx)(y.Z,{label:"Block type",onChange:function(e){return ye((function(n){return H(H({},n),{},{block_type:e.target.value,language:I.tf.MARKDOWN===e.target.value?I.t6.MARKDOWN:null===n||void 0===n?void 0:n.language})}))},primary:!0,value:(null===be||void 0===be?void 0:be.block_type)||"",children:Object.values(I.tf).map((function(e){return(0,W.jsx)("option",{value:e,children:I.V4[e]},e)}))})}),!Ue&&(0,W.jsx)(x.Z,{mt:T.cd,px:T.cd,children:(0,W.jsx)(y.Z,{label:"Language",onChange:function(e){return ye((function(n){return H(H({},n),{},{language:e.target.value})}))},primary:!0,value:(null===be||void 0===be?void 0:be.language)||"",children:Object.values(I.t6).map((function(e){return(0,W.jsx)("option",{value:e,children:I.LE[e]},e)}))})})]}),U.uuid===(null===pe||void 0===pe?void 0:pe.uuid)&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(x.Z,{mt:T.cd,px:T.cd,children:[(0,W.jsxs)(x.Z,{mb:1,children:[(0,W.jsx)(_.ZP,{bold:!0,children:"Name"}),(0,W.jsx)(_.ZP,{muted:!0,small:!0,children:"A human readable name for your template."})]}),(0,W.jsx)(j.Z,{onChange:function(e){return ye((function(n){return H(H({},n),{},{name:e.target.value})}))},primary:!0,setContentOnMount:!0,value:(null===be||void 0===be?void 0:be.name)||""})]}),(0,W.jsx)(x.Z,{mt:T.cd,px:T.cd,children:(0,W.jsx)(k.Z,{label:"Description",onChange:function(e){return ye((function(n){return H(H({},n),{},{description:e.target.value})}))},primary:!0,setContentOnMount:!0,value:(null===be||void 0===be?void 0:be.description)||""})})]})]}),(0,W.jsx)(O.ig,{children:(0,W.jsx)(x.Z,{p:T.cd,children:(0,W.jsxs)(b.ZP,{children:[(0,W.jsxs)(f.ZP,{disabled:Ne,fullWidth:!0,loading:Ie||Pe,onClick:function(){return tn()},primary:!0,children:[!Me&&"Save template",Me&&"Create new template"]}),z&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(x.Z,{mr:1}),(0,W.jsx)(f.ZP,{onClick:z,secondary:!0,children:"Cancel"})]})]})})})]})}),(0,W.jsx)(O.w5,{children:(0,W.jsx)(x.Z,{p:T.cd,children:(0,W.jsx)(l.W,{backend:a.PD,children:nn})})})]})}},44898:function(e,n,t){t.d(n,{R:function(){return i},Z:function(){return o}});var o="blocks",i="pipelines"},94777:function(e,n,t){var o=t(75582),i=t(82684),r=t(34376),u=t(71180),l=t(55485),a=t(65956),d=t(38276),c=t(30160),s=t(89538),p=t(28598);n.Z=function(e){var n=e.shouldWarn,t=e.warningMessage,f=(0,r.useRouter)(),m=(0,i.useState)(!1),h=m[0],v=m[1],g=(0,i.useState)({isModalOpen:!1,nextRoute:null}),b=g[0],x=g[1];(0,i.useEffect)((function(){var e=function(e){if(n)return e.preventDefault(),(e||window.event).returnValue="Are you sure you want to leave?"};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[n]),(0,i.useEffect)((function(){var e=function(e){if(n&&!h)throw x({isModalOpen:!0,nextRoute:e}),f.events.emit("routeChangeError"),"navigation aborted"};f.events.on("routeChangeStart",e);var t=function(){return f.events.off("routeChangeStart",e)};if(h){if(!b.nextRoute)return;return f.push(b.nextRoute),t}return t}),[b,h,f,n]);var y=(0,s.dd)((function(){return(0,p.jsxs)(a.Z,{children:[(0,p.jsx)(c.ZP,{children:t}),(0,p.jsx)(d.Z,{mt:2,children:(0,p.jsxs)(l.ZP,{alignItems:"center",children:[(0,p.jsx)(u.ZP,{onClick:function(){return v(!0)},primary:!0,children:"Leave"}),(0,p.jsx)(d.Z,{mr:1}),(0,p.jsx)(u.ZP,{onClick:function(){x({isModalOpen:!1,nextRoute:null})},secondary:!0,children:"Cancel"})]})})]})}),{},[t],{background:!0,hideCallback:function(){x({isModalOpen:!1,nextRoute:null})},uuid:"stale_pipeline_message"}),_=(0,o.Z)(y,2),k=_[0],j=_[1];(0,i.useEffect)((function(){b.isModalOpen?k():j()}),[j,b.isModalOpen,k]);return{ConfirmLeaveModal:function(){return(0,p.jsx)("div",{})}}}}}]);