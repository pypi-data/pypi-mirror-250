"use strict";(self.webpackChunk_dfnotebook_ipycollections_extension=self.webpackChunk_dfnotebook_ipycollections_extension||[]).push([[237],{237:(e,t,n)=>{n.r(t),n.d(t,{OutputWidget:()=>p,bogusRendererFactory:()=>m,default:()=>h});var o=n(832);function r(e,t){return!!t&&e.contains(t)}function i(e){const t=window.getSelection();return null!==t&&"Range"===t.type&&(t.containsNode(e,!0)||null!==t.anchorNode&&r(t.anchorNode,e)||null!==t.focusNode&&r(t.focusNode,e))}var a=n(257),d=n(313),l=n(935),s=n(497);const c="application/vnd.ipycollections+json";class p extends o.Widget{constructor(e,t){super(),this.formatters={dict:this.collectionFormatter("dict","{","}",this.processMappingNode),list:this.collectionFormatter("list","[","]",this.processSequenceNode),tuple:this.collectionFormatter("tuple","(",")",this.processSequenceNode,{1:{endDelim:",)"}}),set:this.collectionFormatter("set","{","}",this.processSequenceNode,{0:{repr:"set()"}}),mimebundle:this.mimeBundleFormatter,number:this.numberFormatter,bigint:this.bigintFormatter,repr:this.reprFormatter,default_repr:this.defaultReprFormatter,string:this.stringFormatter,boolean:this.booleanFormatter,null:this.nullFormatter},this._rendermime=e,this._mimeType=t.mimeType,this.addClass("CodeMirror"),this.addClass("cm-s-jupyter"),this.addClass("CodeMirror-lines"),this.addClass("mimerenderer-ipycollections")}handleExpansion(e,t,n,o){if(!n){const n=t.appendChild(document.createElement("span"));n.className=o?"ipycollections-expanded":"ipycollections-collapsed",n.appendChild(document.createTextNode(o?"▼ ":"▶ ")),n.addEventListener("mouseup",(r=>{var a;if(i(n))return;r.stopPropagation();const d=this.processData(e,!o,!1);null===(a=t.parentNode)||void 0===a||a.replaceChild(d,t)}))}return o&&(t=t.appendChild(document.createElement("span"))),t}processSequenceNode(e,t,n,o){o?(n.appendChild(document.createTextNode(t.toString()+": ")),n.appendChild(this.processData(e,!1,!1))):n.appendChild(this.processData(e,!1,!0))}processMappingNode(e,t,n,o){n.appendChild(this.processData(e[0],!1,!0)),n.appendChild(document.createTextNode(": ")),n.appendChild(this.processData(e[1],!1,!o))}collectionFormatter(e,t,n,o,r={}){return(e,a=!1,d=!0)=>{const l=e.v?e.v.length:-1;let s=t,c=n;if(l in r){if("repr"in r[l]){const e=document.createElement("span");return e.textContent=r[l].repr,e}"startDelim"in r[l]?s=r[l].startDelim:"endDelim"in r[l]&&(c=r[l].endDelim)}if(e.c){const e=document.createElement("span");return e.textContent=`${s}...${c}`,e}if(d&&l>10){const t=document.createElement("span");return t.className="ipycollections-field",t.textContent=`<${e.t} len=${l}>`,t}const p=document.createElement("span");if(!d&&l>0){p.className=a?"ipycollections-expanded":"ipycollections-collapsed";let t=p;if(a){t=p.appendChild(document.createElement("span")),t.appendChild(document.createTextNode(`▼ ${s}`));const e=t.appendChild(document.createElement("span"));e.className="cm-comment",e.textContent=` # len=${l}`}else p.appendChild(document.createTextNode(`▶ ${s}`));t.addEventListener("mouseup",(n=>{var o;if(i(t))return;n.stopPropagation();const r=this.processData(e,!a,!1);null===(o=null==p?void 0:p.parentNode)||void 0===o||o.replaceChild(r,p)}))}else p.appendChild(document.createTextNode(s));let m;m=Math.min(l,20);const u=e.v.entries();let h={value:void 0,done:!0};const y=e=>{let t;return t=a?document.createElement("div"):document.createElement("span"),t.className="ipycollections-field",o.call(this,e.value[1],e.value[0],t,a),t.appendChild(document.createTextNode(", ")),t};for(let e=0;!(h=u.next()).done&&e<m;++e)p.appendChild(y(h));if(h.done)l>0&&p.lastChild&&p.lastChild.lastChild&&p.lastChild.removeChild(p.lastChild.lastChild);else if(a){const e=p.appendChild(document.createElement("div"));e.className="ipycollections-field";const t=e.appendChild(document.createElement("button"));t.textContent="More...",t.addEventListener("click",(e=>{var t,n;if(e.stopPropagation(),null===(t=p.lastChild)||void 0===t?void 0:t.previousSibling){p.insertBefore(y(h),p.lastChild.previousSibling);for(let e=0;!(h=u.next()).done&&e<m-1;++e)p.insertBefore(y(h),p.lastChild.previousSibling);h.done&&(p.removeChild(p.lastChild.previousSibling),(null===(n=p.lastChild.previousSibling)||void 0===n?void 0:n.lastChild)&&p.lastChild.previousSibling.removeChild(p.lastChild.previousSibling.lastChild))}}))}else p.appendChild(document.createTextNode("..."));return p.appendChild(document.createTextNode(c)),p}}numberFormatter(e,t=!1,n=!0){const o=document.createElement("span");return o.className="cm-number",o.textContent=e.toString(),o}bigintFormatter(e,t=!1,n=!0){const o=document.createElement("span");return o.className="cm-number",o.textContent=e.v,o}reprFormatter(e,t=!1,n=!0){const o=document.createElement("span");return o.appendChild(document.createTextNode(e.v)),o}defaultReprFormatter(e,t=!1,n=!0){const o=document.createElement("span");return o.appendChild(document.createTextNode(`<${e.v[0]} at 0x${e.v[1].toString(16)}>`)),o}mimeBundleFormatter(e,t=!1,n=!0){const o=document.createElement("span");if(!n){o.className=t?"ipycollections-expanded":"ipycollections-collapsed";let n=o;t?(n=o.appendChild(document.createElement("span")),n.appendChild(document.createTextNode("▼ "))):o.appendChild(document.createTextNode("▶ ")),n.addEventListener("mouseup",(r=>{var a;if(i(n))return;r.stopPropagation();const d=this.processData(e,!t,!1);null===(a=null==o?void 0:o.parentNode)||void 0===a||a.replaceChild(d,o)}))}if(t){if(null!==this._rendermime){const t=this._rendermime.createModel({trusted:!0,data:e.v[1],metadata:e.v[2]}),n=this._rendermime.preferredMimeType(t.data,t.trusted?"any":"ensure");if(n){const e=this._rendermime.createRenderer(n);e.renderModel(t).then((()=>{null!==e.node&&o.appendChild(document.createElement("span")).appendChild(e.node)}))}}}else o.appendChild(document.createTextNode(`<${e.v[0]}>`));return o}stringFormatter(e,t=!1,n=!0){const o=document.createElement("span");return o.className="cm-string",e.includes("'")?e.includes('"')?o.textContent="'"+e.replace('"','\\"')+"'":o.textContent='"'+e+'"':o.textContent="'"+e+"'",o}booleanFormatter(e,t=!1,n=!0){const o=document.createElement("span");return o.className="cm-keyword",o.textContent=e?"True":"False",o}nullFormatter(e,t=!1,n=!0){const o=document.createElement("span");return o.className="cm-keyword",o.textContent="None",o}processData(e,t=!1,n=!1){let o;return o="object"==typeof e&&null!==e?e.t:null===e?"null":typeof e,this.formatters[o].bind(this)(e,t,n)}renderModel(e){const t=e.data[this._mimeType];return this.node.appendChild(this.processData(t)),Promise.resolve()}}const m={safe:!0,mimeTypes:[c],createRenderer:e=>new p(null,e)};var u;const h={id:(u={id:"ipycollections-renderer:plugin",rendererFactory:m,rank:0,dataType:"json",fileTypes:[{name:"IPython object",mimeTypes:[c],extensions:[".ipycollections"]}],documentWidgetFactoryOptions:{name:"IPython Renderer",primaryFileType:"IPython object",fileTypes:["IPython object"],defaultFor:["IPython object"]}}).id,requires:[a.IMimeDocumentTracker,d.IRenderMimeRegistry],autoStart:!0,activate:(e,t,n)=>{var o,r;const i=function(e,t){return{safe:!0,mimeTypes:t?[t]:["text/plain"],createRenderer:t=>new p(e,t)}}(n,null===(r=null===(o=u.fileTypes)||void 0===o?void 0:o[0].mimeTypes)||void 0===r?void 0:r[0]);if(void 0!==u.rank?n.addFactory(i,u.rank):n.addFactory(i),!u.documentWidgetFactoryOptions)return;const a=e.docRegistry;let d=[];d=Array.isArray(u.documentWidgetFactoryOptions)?u.documentWidgetFactoryOptions:[u.documentWidgetFactoryOptions],u.fileTypes&&u.fileTypes.forEach((t=>{t.icon&&(t={...t,icon:s.LabIcon.resolve({icon:t.icon})}),e.docRegistry.addFileType(t)})),d.forEach((e=>{const o=e.toolbarFactory?t=>e.toolbarFactory(t.content.renderer):void 0,r=new l.MimeDocumentFactory({renderTimeout:u.renderTimeout,dataType:u.dataType,rendermime:n,modelName:e.modelName,name:e.name,primaryFileType:a.getFileType(e.primaryFileType),fileTypes:e.fileTypes,defaultFor:e.defaultFor,defaultRendered:e.defaultRendered,toolbarFactory:o});a.addWidgetFactory(r),r.widgetCreated.connect(((e,n)=>{n.context.pathChanged.connect((()=>{t.save(n)})),t.add(n)}))}))}}}}]);