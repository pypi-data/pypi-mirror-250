import{_ as g,K as u,A as a,S as l,E as c,r as i,o as w,c as m,b as e,w as b,a as f}from"./index-1ad0aa26.js";import{P as y,a as v}from"./pageUtils-97ff7292.js";const S={components:{ElMessageBox:u},data(){return{TableData:[],TablePage:0,currentPage:1}},computed:{operate(r){return this.$route.params.sys_log_operate}},watch:{operate(r,o){this.GetSysLogs(),this.GetSysLogSize()}},created(){this.GetSysLogs(),this.GetSysLogSize()},methods:{getQueryArgs(r){let o={};return r!==void 0&&(o.get_count=!0),o._page=this.currentPage,o._page_size=y,this.operate==="sys_log_intercept"?o.code=400:this.operate==="sys_log_error"?o.code=500:this.operate==="sys_log_throttling"?o.code=429:this.operate==="sys_log_other"&&(o.code="200,400,429,500",o._op_code="not in"),o},GetSysLogs(){a.get(l.sys_system_logs,this.getQueryArgs()).then(({data:r})=>{this.TableData=r.data})},GetSysLogSize(){a.get(l.sys_system_logs,this.getQueryArgs(!0)).then(({data:r})=>{this.TablePage=v(r.data)})},handleTableDelete(r,o){a.delete(l.sys_system_logs,{id:o.id}).then(({data:p})=>{p.code===200?this.BlackTableData.splice(r,1):c.error("删除任务失败")})}}},P={class:"logs"},L={class:"page"};function T(r,o,p,x,s,n){const t=i("el-table-column"),h=i("el-table"),_=i("el-pagination");return w(),m("div",P,[e(h,{data:s.TableData,style:{width:"100%"}},{default:b(()=>[e(t,{prop:"id",label:"ID","min-width":"100"}),e(t,{prop:"createtime",label:"创建时间","min-width":"100","show-overflow-tooltip":"true"}),e(t,{prop:"endpoint",label:"请求端点","min-width":"100","show-overflow-tooltip":"true"}),e(t,{prop:"method",label:"请求方法","min-width":"100","show-overflow-tooltip":"true"}),e(t,{prop:"pre_args",label:"预处理前查询参数","min-width":"100","show-overflow-tooltip":"true"}),e(t,{prop:"pre_forms",label:"预处理前请求体参数","min-width":"100","show-overflow-tooltip":"true"}),e(t,{prop:"pre_path",label:"预处理前请求路径","min-width":"100","show-overflow-tooltip":"true"}),e(t,{prop:"args",label:"查询参数","min-width":"100","show-overflow-tooltip":"true"}),e(t,{prop:"forms",label:"请求体参数","min-width":"100","show-overflow-tooltip":"true"}),e(t,{prop:"path",label:"预处理前请求路径","min-width":"100","show-overflow-tooltip":"true"}),e(t,{prop:"ua",label:"用户代理头","min-width":"100","show-overflow-tooltip":"true"}),e(t,{prop:"user_id",label:"用户ID","min-width":"100","show-overflow-tooltip":"true"}),e(t,{prop:"user_ip",label:"用户IP","min-width":"100","show-overflow-tooltip":"true"}),e(t,{prop:"time",label:"处理时长","min-width":"100","show-overflow-tooltip":"true"}),e(t,{prop:"code",label:"响应码","min-width":"100","show-overflow-tooltip":"true"}),e(t,{prop:"body",label:"响应体","min-width":"100","show-overflow-tooltip":"true"})]),_:1},8,["data"]),f("div",L,[e(_,{background:"",layout:"prev, pager, next","page-count":s.TablePage,"hide-on-single-page":"true","current-page":s.currentPage,"onUpdate:currentPage":o[0]||(o[0]=d=>s.currentPage=d),onCurrentChange:n.GetSysLogs},null,8,["page-count","current-page","onCurrentChange"])])])}const G=g(S,[["render",T],["__scopeId","data-v-591b1343"]]);export{G as default};
