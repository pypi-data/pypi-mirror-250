sources:
  poll:
    poll_interval: 5
    blocks:
      - [{{ ipsi_address * 0x100 + 1 }}, {{ ipsi_address * 0x100 + 52 }}]
parameters:
  status-register:
    source: poll
    children:
      earth-leakage-trip:
        source: poll
        form:
          type: ParamBit
          address: {{ 2 + ipsi_address * 0x100 }}
          idx: earth-leakage-trip
          bit: 0
        triggers:
          process:
            send:
              - [time, 86400]
              - [state]
      earth-continuity-trip:
        source: poll
        form:
          type: ParamBit
          address: {{ 2 + ipsi_address * 0x100 }}
          idx: earth-continuity-trip
          bit: 1
        triggers:
          process:
            send:
              - [time, 86400]
              - [state]
      earth-fault-lockout:
        source: poll
        form:
          type: ParamBit
          address: {{ 2 + ipsi_address * 0x100 }}
          idx: earth-fault-lockout
          bit: 2
        triggers:
          process:
            send:
              - [time, 86400]
              - [state]
      overload:
        source: poll
        form:
          type: ParamBit
          address: {{ 2 + ipsi_address * 0x100 }}
          idx: overload
          bit: 3
        triggers:
          process:
            send:
              - [time, 86400]
              - [state]
      short-circuit:
        source: poll
        form:
          type: ParamBit
          address: {{ 2 + ipsi_address * 0x100 }}
          idx: short-circuit
          bit: 4
        triggers:
          process:
            send:
              - [time, 86400]
              - [state]
      mcf:
        source: poll
        form:
          type: ParamBit
          address: {{ 2 + ipsi_address * 0x100 }}
          idx: mcf
          bit: 5
        triggers:
          process:
            send:
              - [time, 86400]
              - [state]
      running:
        source: poll
        form:
          type: ParamBit
          address: {{ 2 + ipsi_address * 0x100 }}
          idx: running
          bit: 7
        triggers:
          process:
            send:
              - [time, 86400]
              - [state]
  earth-leakage-current:
    source: poll
    form:
      type: Param
      address: {{ 3 + ipsi_address * 0x100 }}
      idx: earth-leakage-current
    triggers:
      process:
        send:
          - [time, 60]
  pilot-forward-resistance:
    source: poll
    form:
      type: Param
      address: {{ 4 + ipsi_address * 0x100 }}
      idx: pilot-forward-resistance
    triggers:
      process:
        send:
          - [time, 60]
  current-phase-a:
    source: poll
    form:
      type: Modbus.ParamMaskScale
      scale: {{ xin }}
      address: {{ 7 + ipsi_address * 0x100 }}
      idx: current-phase-a
    triggers:
      process:
        send:
          - [time, 60]
  current-phase-b:
    source: poll
    form:
      type: Modbus.ParamMaskScale
      scale: {{ xin }}
      address: {{ 8 + ipsi_address * 0x100 }}
      idx: current-phase-b
    triggers:
      process:
        send:
          - [time, 60]
  current-phase-c:
    source: poll
    form:
      type: Modbus.ParamMaskScale
      scale: {{ xin }}
      address: {{ 9 + ipsi_address * 0x100 }}
      idx: current-phase-c
    triggers:
      process:
        send:
          - [time, 60]
  voltage-phase-a:
    source: poll
    form:
      type: Modbus.ParamMaskScale
      address: {{ 12 + ipsi_address * 0x100 }}
      idx: voltage-phase-a
      scale: {{ xun }}
    triggers:
      process:
        send:
          - [time, 60]
  voltage-phase-b:
    source: poll
    form:
      type: Modbus.ParamMaskScale
      address: {{ 13 + ipsi_address * 0x100 }}
      idx: voltage-phase-b
      scale: {{ xun }}
    triggers:
      process:
        send:
          - [time, 60]
  voltage-phase-c:
    source: poll
    form:
      type: Modbus.ParamMaskScale
      address: {{ 14 + ipsi_address * 0x100 }}
      idx: voltage-phase-c
      scale: {{ xun }}
    triggers:
      process:
        send:
          - [time, 60]
  current-range-setting:
    source: poll
    form:
      type: Param
      address: {{ 18 + ipsi_address * 0x100 }}
      idx: current-range-setting
    triggers:
      process:
        send:
          - [time, 86400]
          - [state]
  current-multiplier-setting:
    source: poll
    form:
      type: Param
      address: {{ 19 + ipsi_address * 0x100 }}
      idx: current-multiplier-setting
    triggers:
      process:
        send:
          - [time, 86400]
          - [state]
  over-current-curve:
    source: poll
    form:
      type: Param
      address: {{ 20 + ipsi_address * 0x100 }}
      idx: over-current-curve
    triggers:
      process:
        send:
          - [time, 86400]
          - [state]
  overload-time-parameter:
    source: poll
    form:
      type: Param
      address: {{ 21 + ipsi_address * 0x100 }}
      idx: overload-time-parameter
    triggers:
      process:
        send:
          - [time, 86400]
          - [state]
  current-balance-setting:
    source: poll
    form:
      type: Param
      address: {{ 23 + ipsi_address * 0x100 }}
      idx: current-balance-setting
    triggers:
      process:
        send:
          - [time, 86400]
          - [state]
  short-circuit-trip-parameter:
    source: poll
    form:
      type: Param
      address: {{ 24 + ipsi_address * 0x100 }}
      idx: short-circuit-trip-parameter
    triggers:
      process:
        send:
          - [time, 86400]
          - [state]
  short-circuit-time-parameter:
    source: poll
    form:
      type: Param
      address: {{ 25 + ipsi_address * 0x100 }}
      idx: short-circuit-time-parameter
    triggers:
      process:
        send:
          - [time, 86400]
          - [state]
  short-circuit-output-relay-selection:
    source: poll
    form:
      type: Param
      address: {{ 26 + ipsi_address * 0x100 }}
      idx: short-circuit-output-relay-selection
    triggers:
      process:
        send:
          - [time, 86400]
          - [state]
  earth-leakage-sensitivity:
    source: poll
    form:
      type: Param
      address: {{ 27 + ipsi_address * 0x100 }}
      idx: earth-leakage-sensitivity
    triggers:
      process:
        send:
          - [time, 86400]
          - [state]
  earth-leakage-time:
    source: poll
    form:
      type: Param
      address: {{ 28 + ipsi_address * 0x100 }}
      idx: earth-leakage-time
    triggers:
      process:
        send:
          - [time, 86400]
          - [state]
  pilot-mode-selection:
    source: poll
    form:
      type: Param
      address: {{ 29 + ipsi_address * 0x100 }}
      idx: pilot-mode-selection
    triggers:
      process:
        send:
          - [time, 86400]
          - [state]
  earth-fault-lockout-selection:
    source: poll
    form:
      type: Param
      address: {{ 30 + ipsi_address * 0x100 }}
      idx: earth-fault-lockout-selection
    triggers:
      process:
        send:
          - [time, 86400]
          - [state]
  back-emf-timer:
    source: poll
    form:
      type: Param
      address: {{ 31 + ipsi_address * 0x100 }}
      idx: back-emf-timer
    triggers:
      process:
        send:
          - [time, 86400]
          - [state]
  machine-type:
    source: poll
    form:
      type: Param
      address: {{ 34 + ipsi_address * 0x100 }}
      idx: machine-type
    triggers:
      process:
        send:
          - [time, 86400]
          - [state]
  machine-number:
    source: poll
    form:
      type: Param
      address: {{ 35 + ipsi_address * 0x100 }}
      idx: machine-number
    triggers:
      process:
        send:
          - [time, 86400]
          - [state]
  under-voltage-trip-setting:
    source: poll
    form:
      type: Param
      address: {{ 36 + ipsi_address * 0x100 }}
      idx: under-voltage-trip-setting
    triggers:
      process:
        send:
          - [time, 86400]
          - [state]
  pilot-latch-setting:
    source: poll
    form:
      type: Param
      address: {{ 37 + ipsi_address * 0x100 }}
      idx: pilot-latch-setting
    triggers:
      process:
        send:
          - [time, 86400]
          - [state]
  earth-fault-lockout-time:
    source: poll
    form:
      type: Param
      address: {{ 38 + ipsi_address * 0x100 }}
      idx: earth-fault-lockout-time
    triggers:
      process:
        send:
          - [time, 86400]
          - [state]
  earth-continuity-time:
    source: poll
    form:
      type: Param
      address: {{ 50 + ipsi_address * 0x100 }}
      idx: earth-continuity-time
    triggers:
      process:
        send:
          - [time, 86400]
          - [state]
