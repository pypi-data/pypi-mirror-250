"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[540,502],{61502:function(n,e,t){t.r(e),t.d(e,{default:function(){return J},useShadowRoot:function(){return H},useWebComponentInfo:function(){return $}});var i=t(29439),r=t(74165),a=t(15861),o=t(24530),l=t(24717),u=t(61724);function s(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,i=(0,o.Qc)(n),r=(0,l.Vn)(i,{Field:{enter:function(n){var i;if(null!==n&&void 0!==n&&null!==(i=n.directives)&&void 0!==i&&i.find((function(n){var i,r,a,o,l=n.name.value,u=null===(i=n.arguments)||void 0===i?void 0:i[0].name.value,s=null===(r=n.arguments)||void 0===r||null===(a=r[0].value)||void 0===a?void 0:a.value,d=null===(o=n.arguments)||void 0===o?void 0:o[0];if("since"===l&&"version"===u){if(t(s))return!0}else if("deprecatedSince"===l&&"version"===u){var c="StringValue"===(null===d||void 0===d?void 0:d.value.kind)?null===d||void 0===d?void 0:d.value.value:e[null===d||void 0===d?void 0:d.value.name.value];if(!t(c))return!0}else if("skipOnClient"===l&&"if"===u){if("BooleanValue"===(null===d||void 0===d?void 0:d.value.kind)&&d.value.value)return!0;if("Variable"===(null===d||void 0===d?void 0:d.value.kind)&&e[d.value.name.value])return!0}return!1})))return null},leave:function(n){var e;if(n.selectionSet&&"SelectionSet"===n.selectionSet.kind&&0===(null===(e=n.selectionSet.selections)||void 0===e?void 0:e.length))return null}},Directive:{leave:function(n){var e=n.name.value;if(["since","deprecatedSince","skipOnClient"].includes(e))return null}}}),a={};return(0,l.Vn)(r,{Variable:function(n){a[n.name.value]=(a[n.name.value]||0)+1}}),r=(0,l.Vn)(r,{VariableDefinition:{enter:function(n){if(a[n.variable.name.value]<=1)return null}}}),(0,u.S)(r)}var d=t(41011);d.RelayFeatureFlags.ENABLE_RELAY_RESOLVERS=!0;var c=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(e,t){var i,a,o,l,u,d;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==globalThis.backendaiclient){n.next=3;break}return n.next=3,new Promise((function(n){document.addEventListener("backend-ai-connected",(function e(){document.removeEventListener("backend-ai-connected",e),n(void 0)}))}));case 3:return o=s(e.text||"",t,(function(n){var e;return!(null!==(e=globalThis.backendaiclient)&&void 0!==e&&e.isManagerVersionCompatibleWith(n))})),l={query:o,variables:t},u=null===(i=globalThis.backendaiclient)||void 0===i?void 0:i.newSignedRequest("POST","/admin/gql",l),n.next=8,null===(a=globalThis.backendaiclient)||void 0===a?void 0:a._wrapWithPromise(u,!1,null,1e4,0).catch((function(n){}));case 8:if(n.t0=n.sent,n.t0){n.next=11;break}n.t0={};case 11:return d=n.t0,n.abrupt("return",d);case 13:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();var v,f=new d.Environment({network:d.Network.create(c,void 0),store:new d.Store(new d.RecordSource)}),m=t(80382),g=t(27340),h=t(41239),p=t(47226),w=t(49883),b=t(66670),x=t(99517),k=t.n(x),P=(t(24989),t(79354)),y=t.n(P),C=t(79748),j=t.n(C),S=t(51714),Z=t.n(S),E=t(63540),L=t.n(E),T=t(18272),V=t.n(T),_=t(9666),F=t.n(_),M=t(64447),R=t(13881),z=t(4519),N=t(81748),O=t(87112),B=t(16980),D=t(51843),W=t(12674),q=t(55144),I=t(73181),Q=t(2556);k().extend(F()),k().extend(y()),k().extend(j()),k().extend(Z()),k().extend(V()),k().extend(L());var Y=z.createContext(null),A=z.createContext(null),H=function(){return z.useContext(A)},$=function(){return z.useContext(Y)},G=new O.QueryClient({defaultOptions:{queries:{suspense:!0,refetchOnWindowFocus:!1,retry:!1}}});M.ZP.use(N.Db).use(R.Z).init({backend:{loadPath:"/resources/i18n/{{lng}}.json"},lng:(null===globalThis||void 0===globalThis||null===(v=globalThis.backendaioptions)||void 0===v?void 0:v.get("current_language"))||"en",fallbackLng:"en",interpolation:{escapeValue:!1},react:{transSupportBasicHtmlNodes:!0,transKeepBasicHtmlNodesFor:["br","strong","span","code","p"]}});var K=function(){var n=(0,W.s0)();return(0,z.useLayoutEffect)((function(){var e=function(e){var t=e.detail;n(t,{replace:!0})};return document.addEventListener("react-navigate",e),function(){document.removeEventListener("react-navigate",e)}}),[n]),null},J=function(n){var e=n.children,t=n.value,r=n.styles,a=n.shadowRoot,o=n.dispatchEvent,l=(0,z.useMemo)((function(){return(0,g.Df)()}),[]),u=function(){var n,e=(0,z.useState)(null===globalThis||void 0===globalThis||null===(n=globalThis.backendaioptions)||void 0===n?void 0:n.get("current_language")),t=(0,i.Z)(e,2),r=t[0],a=t[1],o=(0,N.$G)().i18n;return(0,z.useEffect)((function(){setTimeout((function(){return null===o||void 0===o?void 0:o.changeLanguage(r)}),0),k().locale(r)}),[]),(0,z.useEffect)((function(){var n=function(n){var e,t;a(null===n||void 0===n||null===(e=n.detail)||void 0===e?void 0:e.lang);var i=(null===n||void 0===n||null===(t=n.detail)||void 0===t?void 0:t.lang)||"en";null===o||void 0===o||o.changeLanguage(i),k().locale(i)};return window.addEventListener("langChanged",n),function(){return window.removeEventListener("langChanged",n)}}),[o]),[r]}(),s=(0,i.Z)(u,1)[0],d=(0,m.x)(),c=(0,z.useMemo)((function(){return{value:t,dispatchEvent:o,moveTo:function(n,e){o("moveTo",{path:n,params:e})}}}),[t,o]);return(0,Q.jsx)(Q.Fragment,{children:f&&(0,Q.jsx)(B.RelayEnvironmentProvider,{environment:f,children:(0,Q.jsxs)(z.StrictMode,{children:[(0,Q.jsxs)("style",{children:[r,".anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n/* fix: fixed column shadow display outside of a table wrapper */\n.ant-table-wrapper {\n  border-radius: 8px 8px 0 0;\n  overflow: hidden;\n}\n\n/* fix: the tooltip does not appear in the `<Form.Item tooltip={'something'}` when the popup container is a parent node of the trigger node. */\n.ant-form-item-label {\n  overflow: unset !important;\n}\n"]}),(0,Q.jsx)(O.QueryClientProvider,{client:G,children:(0,Q.jsx)(A.Provider,{value:a,children:(0,Q.jsx)(Y.Provider,{value:c,children:(0,Q.jsx)(h.ZP,{getPopupContainer:function(n){return(null===n||void 0===n?void 0:n.parentNode)||a},locale:"ko"===s?b.Z:w.Z,theme:d,children:(0,Q.jsx)(p.Z,{children:(0,Q.jsx)(g.V9,{container:a,cache:l,children:(0,Q.jsx)(z.Suspense,{fallback:"",children:(0,Q.jsx)(D.VK,{children:(0,Q.jsxs)(q.QueryParamProvider,{adapter:I.Q,options:{},children:[(0,Q.jsx)(K,{}),e]})})})})})})})})})]})})})}},38540:function(n,e,t){t.r(e),t.d(e,{passwordPattern:function(){return b}});var i=t(29439),r=t(43255),a=t(87760),o=t(50164),l=t(61502),u=t(99277),s=t(69080),d=t(44036),c=t(57054),v=t(65113),f=t(70389),m=t(38818),g=t(92171),h=t(4519),p=t(81748),w=t(2556),b=/^(?=.*\d)(?=.*[a-zA-Z])(?=.*[_\W]).{8,}$/;e.default=function(){var n,e=(0,l.useWebComponentInfo)(),t=e.value,x=e.dispatchEvent;try{n=JSON.parse(t||"")}catch(F){n={open:!1,currentPassword:"",username:"",api_endpoint:""}}var k=n,P=k.open,y=k.currentPassword,C=k.username,j=k.api_endpoint,S=d.Z.useToken().token,Z=c.Z.useForm(),E=(0,i.Z)(Z,1)[0],L=(0,p.$G)().t;(0,h.useEffect)((function(){P&&E.resetFields()}),[P,E]);var T=(0,a.M)({api_endpoint:j}),V=(0,o.Y)({mutationFn:function(n){return(0,r.Lc)({method:"POST",url:"/server/update-password-no-auth",body:n,client:T})}}),_=function(){E.validateFields().then((function(n){V.mutate({username:C,current_password:y,new_password:n.newPassword},{onSuccess:function(n,e,t){x("ok",null)},onError:function(n,e,t){}})}))};return(0,w.jsx)(v.Z,{open:P,centered:!0,mask:!1,onCancel:function(){x("cancel",null)},keyboard:!1,maskClosable:!1,footer:null,width:450,destroyOnClose:!0,forceRender:!0,children:(0,w.jsxs)(u.Z,{direction:"column",justify:"start",align:"stretch",gap:"md",style:{alignSelf:"stretch",paddingTop:S.paddingMD,paddingBottom:S.paddingMD},children:[(0,w.jsxs)(f.Z.Title,{level:3,style:{margin:0},children:[(0,w.jsx)(s.Z,{twoToneColor:S.colorWarning})," ",L("webui.menu.PleaseChangeYourPassword")]}),L("webui.menu.YouMushChangeYourPassword"),(0,w.jsxs)(c.Z,{form:E,layout:"vertical",initialValues:{currentPassword:y},disabled:V.isLoading,children:[(0,w.jsx)(c.Z.Item,{name:"newPassword",label:L("webui.menu.NewPassword"),rules:[{required:!0},{pattern:b,message:L("webui.menu.InvalidPasswordMessage").toString()},function(){return{validator:function(n,e){return y===e?Promise.reject(new Error(L("webui.menu.NewPasswordCannotBeSame").toString())):Promise.resolve()}}}],hasFeedback:!0,children:(0,w.jsx)(m.Z.Password,{})}),(0,w.jsx)(c.Z.Item,{name:"confirm",label:L("webui.menu.NewPasswordAgain"),dependencies:["newPassword"],hasFeedback:!0,rules:[{required:!0},function(n){var e=n.getFieldValue;return{validator:function(n,t){return t&&e("newPassword")!==t?Promise.reject(new Error(L("environment.PasswordsDoNotMatch").toString())):Promise.resolve()}}}],children:(0,w.jsx)(m.Z.Password,{onPressEnter:_})})]}),(0,w.jsx)(g.ZP,{type:"primary",onClick:_,loading:V.isLoading,children:L("webui.menu.Update")})]})})}},69080:function(n,e,t){t.d(e,{Z:function(){return u}});var i=t(87462),r=t(4519),a={icon:function(n,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M955.7 856l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z",fill:n}},{tag:"path",attrs:{d:"M172.2 828.1h679.6L512 239.9 172.2 828.1zM560 720a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm-16-304v184c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V416c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8z",fill:e}},{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8z",fill:n}}]}},name:"warning",theme:"twotone"},o=t(9491),l=function(n,e){return r.createElement(o.Z,(0,i.Z)({},n,{ref:e,icon:a}))};var u=r.forwardRef(l)}}]);
//# sourceMappingURL=540.78d30d69.chunk.js.map