import{p as ee,g as le,r as C,j as s,f as Q,c as F,an as ie,aE as ue,k as W,F as J,l as se,a8 as de,w as oe,v as o,B as S,x as b,y as n,D as X,O as U,K as f,G as L,q as c,z as V,aN as v,aO as M}from"./index-5b1172bc.js";import{b as ne,c as re,d as ve,e as me,a as pe,V as ce}from"./VExpansionPanel-66fd88fa.js";import{a as be,i as ae,R as Ve,S as ke,k as ge,T as he,w as fe,j as B,V as Ce}from"./VImg-be2a571d.js";import{d as $e,e as Ee,m as Se,f as we,u as Ue,b as Y,g as Z,h as _}from"./VCheckboxBtn-345f7585.js";import{i as qe,g as Te}from"./VMenu-baf25798.js";import{a as Re,V as Pe,d as Ie}from"./VCard-5685d61c.js";import{V as Be}from"./VDialog-66e39e5c.js";import{V as y}from"./VTextField-d9c30cc8.js";const Fe=qe("v-spacer","div","VSpacer"),Ae=ee({...be(),...$e()},"VForm"),Ne=le()({name:"VForm",props:Ae(),emits:{"update:modelValue":i=>!0,submit:i=>!0},setup(i,q){let{slots:k,emit:$}=q;const d=Ee(i),g=C();function T(m){m.preventDefault(),d.reset()}function R(m){const r=m,p=d.validate();r.then=p.then.bind(p),r.catch=p.catch.bind(p),r.finally=p.finally.bind(p),$("submit",r),r.defaultPrevented||p.then(A=>{var P;let{valid:N}=A;N&&((P=g.value)==null||P.submit())}),r.preventDefault()}return ae(()=>{var m;return s("form",{ref:g,class:["v-form",i.class],style:i.style,novalidate:!0,onReset:T,onSubmit:R},[(m=k.default)==null?void 0:m.call(k,d)])}),Te(d,g)}});const Le=ee({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Se(),...we()},"VSwitch"),De=le()({name:"VSwitch",inheritAttrs:!1,props:Le(),emits:{"update:focused":i=>!0,"update:modelValue":()=>!0,"update:indeterminate":i=>!0},setup(i,q){let{attrs:k,slots:$}=q;const d=Q(i,"indeterminate"),g=Q(i,"modelValue"),{loaderClasses:T}=Ve(i),{isFocused:R,focus:m,blur:r}=Ue(i),p=C(),A=F(()=>typeof i.loading=="string"&&i.loading!==""?i.loading:i.color),N=ie(),P=F(()=>i.id||`switch-${N}`);function z(){d.value&&(d.value=!1)}function j(I){var w,h;I.stopPropagation(),I.preventDefault(),(h=(w=p.value)==null?void 0:w.input)==null||h.click()}return ae(()=>{const[I,w]=ue(k),[h,E]=Y.filterProps(i),[D,l]=Z.filterProps(i);return s(Y,W({class:["v-switch",{"v-switch--inset":i.inset},{"v-switch--indeterminate":d.value},T.value,i.class],style:i.style},I,h,{id:P.value,focused:R.value}),{...$,default:a=>{let{id:u,messagesId:e,isDisabled:x,isReadonly:O,isValid:t}=a;return s(Z,W({ref:p},D,{modelValue:g.value,"onUpdate:modelValue":[H=>g.value=H,z],id:u.value,"aria-describedby":e.value,type:"checkbox","aria-checked":d.value?"mixed":void 0,disabled:x.value,readonly:O.value,onFocus:m,onBlur:r},w),{...$,default:()=>s("div",{class:"v-switch__track",onClick:j},null),input:H=>{let{inputNode:te,icon:G}=H;return s(J,null,[te,s("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":G||i.loading}]},[s(ke,null,{default:()=>[i.loading?s(he,{name:"v-switch",active:!0,color:t.value===!1?void 0:A.value},{default:K=>$.loader?$.loader(K):s(fe,{active:K.isActive,color:K.color,indeterminate:!0,size:"16",width:"2"},null)}):G&&s(ge,{key:G,icon:G,size:"x-small"},null)]})])])}})}})}),{}}}),xe=V("br",null,null,-1),Oe={class:"configcolumnleft"},Ge={key:0},ye=V("br",null,null,-1),ze=V("br",null,null,-1),je=V("br",null,null,-1),He={key:1},Ke=V("br",null,null,-1),Me={key:2},Je=V("br",null,null,-1),Qe={key:0,class:"configcolumnright"},We=V("br",null,null,-1),Xe=V("br",null,null,-1),ul=se({__name:"EditConfig",props:{configEntries:{},disabled:{type:Boolean}},emits:["submit","action"],setup(i,{emit:q}){const k=i,$=de(),d=C(),g=C(!1),T=C(),R=C("basic"),m=C(!1),r=C(),p=C({}),A=F(()=>d.value?d.value.filter(l=>l.advanced&&!l.hidden).length>0:!1),N=F(()=>A.value?["basic","advanced"]:["basic"]),P=F(()=>{if(d.value){for(const l of d.value)if(l.required&&!(!h(l.value)||!h(l.default_value)||l.type==v.DIVIDER||l.type==v.LABEL))return!1;return!0}return!1});F(()=>{const l={};for(const a of k.configEntries)a.value!=null&&(a.type==v.SECURE_STRING&&a.value==M||(l[a.key]=a.value));return l}),oe(()=>k.configEntries,l=>{d.value=[];for(const a of l||[])a.value!==void 0&&a.value!==null&&(p.value[a.key]=a.value),(a.value==null||a.value==null)&&(a.value=a.default_value),d.value.push(a)},{immediate:!0});const z=async function(){const{valid:l}=await T.value.validate();return l},j=async function(){await z()&&q("submit",D())},I=async function(l){q("action",l,D())},w=function(l){window.open(l,"_blank")},h=function(l){return l==null},E=function(l){var a;if(!h(l.depends_on)){const u=(a=d.value)==null?void 0:a.find(e=>e.key==l.depends_on);if(u&&u.required&&h(u)||u&&u.type==v.BOOLEAN&&!u.value)return!0}return!1},D=function(){const l={};for(const a of k.configEntries)a.value==null&&(a.value=null),!(a.type==v.SECURE_STRING&&a.value==M)&&(l[a.key]=a.value);return l};return(l,a)=>(o(),S("section",null,[d.value?(o(),b(Ne,{key:0,ref_key:"form",ref:T,modelValue:g.value,"onUpdate:modelValue":a[2]||(a[2]=u=>g.value=u),style:{"margin-right":"10px"},disabled:l.disabled},{default:n(()=>[s(ne,{modelValue:R.value,"onUpdate:modelValue":a[1]||(a[1]=u=>R.value=u),variant:"accordion",multiple:""},{default:n(()=>[(o(!0),S(J,null,X(N.value,u=>(o(),b(re,{key:u,value:u},{default:n(()=>[u=="advanced"?(o(),b(ve,{key:0},{default:n(()=>[V("h3",null,f(l.$t("settings.advanced_settings")),1)]),_:1})):L("",!0),xe,s(me,null,{default:n(()=>[(o(!0),S(J,null,X(d.value.filter(e=>e.advanced==(u=="advanced")&&!e.hidden),e=>{var x,O;return o(),S("div",{key:e.key,class:"configrow"},[V("div",Oe,[e.type==c(v).DIVIDER?(o(),S("div",Ge,[ye,s(Ce),e.label?(o(),b(_,{key:0,style:{"margin-left":"8px","margin-top":"10px","margin-bottom":"10px"}},{default:n(()=>[V("b",null,f(e.label),1)]),_:2},1024)):L("",!0),ze,je])):e.type==c(v).LABEL?(o(),S("div",He,[Ke,s(_,{style:{"margin-left":"8px","margin-top":"10px","margin-bottom":"10px"}},{default:n(()=>[U(f(l.$t(`settings.${e.key}`,e.label)),1)]),_:2},1024)])):e.type==c(v).ACTION||e.action&&!e.value?(o(),S("div",Me,[Je,s(B,{class:"actionbutton",disabled:E(e),onClick:t=>{I(e.action||e.key),e.value=e.action?null:e.key}},{default:n(()=>[U(f(l.$t(`settings.${e.action||e.key}`,e.action_label||e.label)),1)]),_:2},1032,["disabled","onClick"])])):e.type==c(v).BOOLEAN?(o(),b(De,{key:3,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,label:l.$t(`settings.${e.key}`,e.label),color:"primary",disabled:E(e)},null,8,["modelValue","onUpdate:modelValue","label","disabled"])):(e.type==c(v).INTEGER||e.type==c(v).FLOAT)&&e.range&&e.range.length==2?(o(),b(pe,{key:4,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,disabled:E(e),label:l.$t(`settings.${e.key}`,e.label),required:e.required,class:"align-center",min:e.range[0],max:e.range[1],step:e.type==c(v).FLOAT?.5:1,"hide-details":"",style:{"margin-top":"10px","margin-bottom":"25px"},color:"primary"},{append:n(()=>[s(y,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,"hide-details":"","single-line":"",density:"compact",type:"number",style:{width:"70px"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","label","required","min","max","step"])):e.type==c(v).SECURE_STRING?(o(),b(y,{key:5,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,label:l.$t(`settings.${e.key}`,e.label),required:e.required,disabled:E(e),rules:[t=>!(!t&&e.required)||l.$t("settings.invalid_input")],type:m.value?"text":"password","append-inner-icon":m.value?"mdi-eye":typeof e.value=="string"&&e.value.includes(c(M))?"":"mdi-eye-off",variant:"outlined",clearable:"",readonly:!!e.action,"onClick:appendInner":a[0]||(a[0]=t=>m.value=!m.value),"onClick:clear":t=>e.value="#CLEAR#"},null,8,["modelValue","onUpdate:modelValue","label","required","disabled","rules","type","append-inner-icon","readonly","onClick:clear"])):e.options&&e.options.length>0?(o(),b(ce,{key:6,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,chips:e.multi_value,clearable:!0,multiple:e.multi_value,items:e.options,disabled:E(e),label:l.$t(`settings.${e.key}`,e.label),required:e.required,rules:[t=>!(!t&&e.required)||l.$t("settings.invalid_input")],variant:"outlined","onClick:clear":t=>e.value=null},null,8,["modelValue","onUpdate:modelValue","chips","multiple","items","disabled","label","required","rules","onClick:clear"])):e.type==c(v).INTEGER||e.type==c(v).FLOAT?(o(),b(y,{key:7,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,placeholder:(x=e.default_value)==null?void 0:x.toString(),disabled:E(e),label:l.$t(`settings.${e.key}`,e.label),required:e.required,rules:[t=>!(!t&&e.required)||l.$t("settings.invalid_input")],variant:"outlined",clearable:!e.required,type:"number","onClick:clear":t=>e.value=null},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled","label","required","rules","clearable","onClick:clear"])):(o(),b(y,{key:8,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,placeholder:(O=e.default_value)==null?void 0:O.toString(),clearable:"",disabled:E(e),label:l.$t(`settings.${e.key}`,e.label),required:e.required,rules:[t=>!(!t&&e.required)||l.$t("settings.invalid_input")],variant:"outlined",readonly:!!e.action,"onClick:clear":t=>e.value=null},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled","label","required","rules","readonly","onClick:clear"]))]),e.description||e.help_link?(o(),S("div",Qe,[s(B,{icon:"mdi-help-box",variant:"plain",class:"helpicon",size:"x-large",onClick:t=>e.description?r.value=e:w(e.help_link)},null,8,["onClick"])])):L("",!0)])}),128))]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),We,s(B,{block:"",color:"primary",disabled:!P.value,onClick:j},{default:n(()=>[U(f(l.$t("settings.save")),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue","disabled"])):L("",!0),Xe,s(B,{block:"",onClick:a[3]||(a[3]=u=>c($).back())},{default:n(()=>[U(f(l.$t("close")),1)]),_:1}),s(Be,{"model-value":r.value!==void 0,width:"auto","onUpdate:modelValue":a[6]||(a[6]=u=>r.value=void 0)},{default:n(()=>[s(Re,null,{default:n(()=>[s(Pe,null,{default:n(()=>{var u;return[U(f((u=r.value)==null?void 0:u.description),1)]}),_:1}),s(Ie,null,{default:n(()=>{var u;return[(u=r.value)!=null&&u.help_link?(o(),b(B,{key:0,onClick:a[4]||(a[4]=e=>w(r.value.help_link))},{default:n(()=>[U(f(l.$t("read_more")),1)]),_:1})):L("",!0),s(Fe),s(B,{color:"primary",onClick:a[5]||(a[5]=e=>r.value=void 0)},{default:n(()=>[U(f(l.$t("close")),1)]),_:1})]}),_:1})]),_:1})]),_:1},8,["model-value"])]))}});export{De as V,ul as _};
