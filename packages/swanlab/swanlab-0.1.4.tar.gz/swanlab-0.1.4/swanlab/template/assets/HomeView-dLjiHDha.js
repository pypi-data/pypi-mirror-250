import{_ as e,D as t}from"./ConfigEditor-doWTLv5A.js";import{_ as a,u as s,i as l,c as r,o,a as i,b as n,n as c,d,t as p,e as m,f as u,r as v,h as f,m as w,g as y,w as h,j as x,R as b,p as g,k as j,l as _,q as k,s as $,v as S,x as E,y as q,z as L,A as T,B as C}from"./index-LACzRkOd.js";import{S as I,a as P}from"./SLTable-5u8NmPpa.js";import"./SLLoading-fGGpWiXo.js";const B={class:"w-full h-full py-5 relative"},D={class:"px-6 border-b"},H={class:"flex items-center gap-3"},O={class:"text-2xl items-center gap-1 font-semibold max-w-md truncate"},z={key:0,class:"project-description"},A=a({__name:"HomeLayout",setup(a){const y=s(),h=l("isSideBarShow"),x=async(e,t)=>{const{data:a}=await f.patch("/project/update",e);y.setProject(a.project),t()},b=r((()=>{for(const e of y.experiments)if(0===e.status)return!0;return!1})),g=()=>{f.delete("/project").then((()=>{w.success("Delete Successfully"),location.reload()})).catch((()=>{w.error("Error deleting project")}))};return(a,s)=>{const l=e,r=t;return o(),i("div",B,[n("div",D,[n("div",{class:c(["project-title transition-marging duration-300",{"ml-8":!d(h)}])},[n("div",H,[n("h1",O,p(d(y).name),1),m(l,{type:"project",onModify:x})]),n("div",{class:c(["flex justify-end grow transition-padding duration-300 ml-1",{"pr-8":!d(h)}])},[m(r,{type:"project",onConfirm:g,disabled:b.value},null,8,["disabled"])],2)],2),d(y).description?(o(),i("p",z,p(d(y).description),1)):u("",!0),v(a.$slots,"top",{},void 0,!0)]),v(a.$slots,"default",{},void 0,!0)])}}},[["__scopeId","data-v-475d6ef1"]]),M=["title"],N={__name:"ExperimentName",props:{name:{type:String,required:!0},color:{type:String,required:!0},id:{required:!0}},setup:e=>(t,a)=>(o(),y(d(b),{class:"flex gap-2 items-center w-full",to:`/experiment/${e.id}`},{default:h((()=>[n("circle",{class:"w-3 h-3 rounded-full flex-shrink-0",style:x({backgroundColor:t.$props.color})},null,4),n("p",{class:"truncate",title:e.name},p(e.name),9,M)])),_:1},8,["to"]))},R={class:"flex-col justify-center items-center pt-10"},V=(e=>(g("data-v-bcdae545"),e=e(),j(),e))((()=>n("div",{class:"loader"},null,-1))),F={class:"text-center pt-10 text-lg"},G=a({__name:"EmptyTable",setup:e=>(e,t)=>(o(),i("div",R,[V,n("p",F,p(e.$t("home.empty.table")),1)]))},[["__scopeId","data-v-bcdae545"]]),J={class:"w-80 flex flex-col gap-4 my-5 text-dimmer"},K={class:"flex justify-between"},Q={class:"grow"},U={class:"w-36 whitespace-nowrap"},W={class:"flex justify-between"},X={class:"grow"},Y={class:"w-36 whitespace-nowrap"},Z={class:"flex justify-between"},ee={class:"grow"},te={class:"w-36 whitespace-nowrap"},ae={class:"px-6 py-5"},se={class:"text-xl font-semibold mb-4"},le=a({__name:"HomeView",setup(e){const t=s(),a=r((()=>void 0===t.experiments?[]:t.experiments)),l=r((()=>T(t.createTime))),i=r((()=>T(t.updateTime))),c=_([{title:k("home.list.table.header.name"),slot:"name",style:"px-4",width:300,border:!0},{title:k("home.list.table.header.status"),slot:"status"},{title:k("home.list.table.header.create"),slot:"create"}]),v=[];a.value.map((e=>{Object.entries(e.config).forEach((([e])=>{v.some((t=>t.title===e))||v.push({key:e,slot:e,title:e})}))})),c.value.push(...v);const w=r((()=>a.value.map((e=>{const t=b.value[e.name];return t?(Promise.all(Object.keys(t).map((async a=>{e[await g(a)]=C(t[a])}))),e):{}})))),x=_(),b=_({});async function g(e){return"swanlab-overview-table-key"+e}return f.get("/project/summaries",{params:{experiment_names:(()=>{let e=[];return a.value.forEach((t=>{e.push(t.name)})),e.join(",")})()}}).then((async({data:e})=>{x.value=await Promise.all(e.tags.map((async e=>({key:await g(e),title:e})))),c.value.push(...x.value),b.value=e.summaries})),(e,s)=>{const r=A;return o(),y(r,null,{top:h((()=>[n("div",J,[n("div",K,[n("div",Q,p(e.$t("home.overview.create")),1),n("p",U,p(l.value),1)]),n("div",W,[n("div",X,p(e.$t("home.overview.latest")),1),n("p",Y,p(i.value),1)]),n("div",Z,[n("div",ee,p(e.$t("home.overview.total")),1),n("p",te,p(d(t).sum),1)])])])),default:h((()=>[n("div",ae,[n("h2",se,p(e.$t("home.list.title")),1),x.value?(o(),y(d(I),{key:0,column:c.value,data:w.value},$({name:h((({row:e})=>[m(N,{name:e.name,id:e.experiment_id,color:e.color},null,8,["name","id","color"])])),status:h((({row:e})=>[m(P,{id:e.experiment_id,status:e.status},null,8,["id","status"])])),create:h((({row:e})=>[E(p(d(q)(d(L)(e.create_time))),1)])),_:2},[S(v,(e=>({name:e.key,fn:h((({row:t})=>[E(p(t.config[e.key]||"-"),1)]))})))]),1032,["column","data"])):0===a.value.length?(o(),y(G,{key:1})):u("",!0)])])),_:1})}}},[["__scopeId","data-v-b6669e17"]]);export{le as default};
