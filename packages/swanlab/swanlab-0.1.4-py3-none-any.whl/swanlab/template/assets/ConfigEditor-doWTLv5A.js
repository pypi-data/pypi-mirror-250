import{_ as e,o as t,g as a,w as n,J as i,e as l,t as s,b as o,S as r,K as d,q as c,u as p,D as u,l as m,c as v,a as f,L as h,M as g,n as y,f as x,N as b,m as _,O as $,F as w}from"./index-LACzRkOd.js";import{_ as j}from"./SLLoading-fGGpWiXo.js";const S={class:"text-sm flex items-center gap-2"},V={class:"md:block hidden"},W=e({__name:"DeleteButton",props:{type:String,validator:e=>["project","experiment"].includes(e)},emits:["confirm","cancel"],setup(e,{emit:p}){const u=e,m=p,v=()=>{d(c(`common.delete.title.${u.type}`),c(`common.delete.content.${u.type}`),{}).then((()=>{m("confirm")}))};return(e,d)=>(t(),a(r,{onClick:v,theme:"negative",hollow:"","disabled-tip":e.$t("common.delete.not-allowed")},{default:n((()=>[o("div",S,[l(i,{icon:"trash",class:"w-4 h-4"}),o("span",V,s(e.$t("common.delete.button")),1)])])),_:1},8,["disabled-tip"]))}},[["__scopeId","data-v-61afeff3"]]),k={class:"text-xl font-semibold"},z={class:"relative pt-4"},C={class:"font-semibold pb-3"},A=["placeholder"],D={class:"tip text-negative-default"},E={class:"relative"},L={class:"font-semibold pt-5 pb-3"},U=["placeholder"],Z={class:"tip text-negative-default"},q={class:"flex justify-end pt-10"},B=100,I=255,F=e({__name:"EditorWrap",props:{type:String},emits:["confirm"],setup(e,{emit:i}){const d=p(),$=u(),w=e,S=i,V=m({name:"project"===w.type?d.name:$.name,description:"project"===w.type?d.description:$.description}),W=m({name:"",description:""}),F=v((()=>{const e=V.value.name;if(e.length>B)return!1;if(e.startsWith("-")||e.endsWith("-")||e.startsWith("_")||e.endsWith("_"))return!1;return/^[a-zA-Z0-9_\-\u4e00-\u9fa5]+$/.test(e)})),J=v((()=>{const e=V.value.name;return!(e.length>B)&&(!/^[_-]|[_-]$/.test(e)&&!/[^a-zA-Z0-9_-]/.test(e))})),K=v((()=>{var e;return!V.value.description||!((null==(e=V.value.description)?void 0:e.length)>I)})),M=m(!1),N=async()=>{if(W.value={name:"",description:""},"project"===w.type&&!F.value)return _.warning("invalid project name"),W.value.name="too long or invalid characters";if(!J.value)return _.warning("invalid experiment name"),W.value.name="too long or invalid characters";if(!K.value)return _.warning("invalid description"),W.value.description="invalid description";if(V.value.name===d.name&&V.value.description===d.description)return W.value.name="nothing changed in project config";if(V.value.name===$.name&&V.value.description===$.description)return W.value.name="nothing changed in experiment config";let e=!1;"experiment"===w.type&&d.experiments.forEach((t=>{V.value.name===t.name&&V.value.name!==$.name&&(e=!0,W.value.name="The experiment name is duplicated")})),e||(M.value=!0,S("confirm",V.value,(()=>{M.value=!1,_.success(c("common.config-editor.save.success"))})))};return(i,d)=>{var c;const p=r;return t(),f("form",{class:"w-full",onSubmit:b(N,["prevent"])},[o("h1",k,s(i.$t(`common.config-editor.title.${e.type}`)),1),o("div",z,[o("h2",C,s(i.$t(`common.config-editor.sub-title.${e.type}.name`)),1),h(o("input",{type:"text",class:"input","onUpdate:modelValue":d[0]||(d[0]=e=>V.value.name=e),placeholder:`edit your ${e.type} name here`,maxlength:B,pattern:"[a-zA-Z0-9_\\-\\u4e00-\\u9fa5]*",required:""},null,8,A),[[g,V.value.name]]),o("p",{class:y(["absolute bottom-[-20px] text-xs right-0",0===V.value.name.length||V.value.name.length===B?"text-negative-default":""])},s(`${V.value.name.length} / 100`),3),o("span",D,s(W.value.name),1)]),o("div",E,[o("h2",L,s(i.$t(`common.config-editor.sub-title.${e.type}.desc`)),1),h(o("textarea",{class:"input",rows:"10","onUpdate:modelValue":d[1]||(d[1]=e=>V.value.description=e),placeholder:`edit your ${e.type} description here`,maxlength:I},null,8,U),[[g,V.value.description]]),o("p",{class:y(["absolute bottom-[-20px] text-xs right-0",(null==(c=V.value.description)?void 0:c.length)===I?"text-negative-default":""])},s(`${V.value.description?V.value.description.length:0} / 255`),3),o("span",Z,s(W.value.description),1)]),o("div",q,[l(p,{type:"submit",theme:"primary",class:"p-2 rounded flex items-center",disabled:M.value},{default:n((()=>[M.value?(t(),a(j,{key:0,size:"4"})):x("",!0),o("span",null,s(i.$t("common.config-editor.save."+(M.value?"savimg":"default"))),1)])),_:1},8,["disabled"])])],32)}}},[["__scopeId","data-v-27ab07cb"]]),J={__name:"ConfigEditor",props:{type:{type:String,validator:e=>["project","experiment"].includes(e)},disabled:{type:Boolean,default:!1}},emits:["modify"],setup(e,{emit:a}){const s=m(!1),o=a,d=async(e,t)=>{o("modify",e,(()=>{s.value=!1,t()}))};return(a,o)=>{const c=r;return t(),f(w,null,[l(c,{class:"px-3 py-1.5 border-none !text-dimmest rounded",theme:"primary",hollow:"",disabled:e.disabled,"disabled-tip":a.$t("common.config-editor.not-allowed"),onClick:o[0]||(o[0]=e=>s.value=!0)},{default:n((()=>[l(i,{icon:"modify",class:"w-4 h-4"})])),_:1},8,["disabled","disabled-tip"]),l($,{class:"px-10 py-6","max-w":"550",modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=e=>s.value=e)},{default:n((()=>[l(F,{type:e.type,onConfirm:d},null,8,["type"])])),_:1},8,["modelValue"])],64)}}};export{W as D,J as _};
