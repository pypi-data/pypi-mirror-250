Metadata-Version: 2.1
Name: pharmvar_tools
Version: 0.5.0
Summary: Python tools to work with Pharmvar data.
Author-email: Mark Santcroos <m.a.santcroos@lumc.nl>, "Jonathan K. Vis" <j.k.vis@lumc.nl>
Project-URL: Homepage, https://github.com/lumc-pgx/pharmvar-tools
Project-URL: Bug Tracker, https://github.com/lumc-pgx/pharmvar-tools/issues
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.7
Description-Content-Type: text/markdown
License-File: LICENSE.md
Requires-Dist: mutalyzer-algebra
Requires-Dist: networkx
Requires-Dist: ratelimiter
Requires-Dist: requests
Requires-Dist: pyyaml
Provides-Extra: dev
Requires-Dist: build; extra == "dev"
Requires-Dist: twine; extra == "dev"

# Introduction

Set of tools to work with pharmvar data.

# Installation (Linux)

```sh
python3 -m venv
source venv/bin/activate
pip install -r requirements.txt
```

# Installation (Windows)

1. Install Windows subsystem for Linux (WSL).

```sh
wsl --install
```

2. Navigate to the repository and install the Linux/Python dependencies.

```sh
cd /mnt/c/[path]/pharmvar-tools

sudo apt update
sudo apt upgrade
sudo apt install python3.10-venv python-is-python3 python3-pip

sudo python -m venv venv
source ./venv/bin/activate
python -m pip install -r requirements.txt
```

# Data requirements

For each gene of interest the sequence fasta of the NC and the NG should be
downloaded (from the NCBI) into the `data/` directory, e.g.,
`data/NC_000022.11.fasta` and `data/NG_008376.4.fasta` for *CYP2D6*.

In addition, for the check functionality, also the complete download zipfile
from pharmvar is required. It needs to be unzipped in the data directory, e.g., 
the fasta file for *CYP2D6* should be located in
`data/pharmvar-5.2.19/CYP2D6/CYP2D6.haplotypes.fasta`.

# Usage

## Pharmvar data consistency check

`python check.py --gene CYP2D6 --all`


## Calculating relations between alleles and variants based on variant algebra

`python compare.py --gene CYP2D6 > data/pharmvar_5.2.19_CYP2D6_relations.txt`


## Visualizing relations

Requires graphviz (`sudo apt install graphviz`).

`python to_dot.py --gene CYP2D6 < data/pharmvar_5.2.19_CYP2D6_relations.txt | fdp -Tpdf > /tmp/CYP2D6.pdf`
