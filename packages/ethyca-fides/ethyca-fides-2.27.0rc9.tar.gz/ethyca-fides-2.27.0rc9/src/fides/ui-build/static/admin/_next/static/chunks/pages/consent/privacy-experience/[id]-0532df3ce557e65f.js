(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2357],{24487:function(e,r,n){"use strict";n.d(r,{At:function(){return y},aG:function(){return f},gN:function(){return v}});var t=n(32393),i=n(14007),a=n(49031),l=n(27378);function c(){return c=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},c.apply(this,arguments)}function o(e,r){if(null==e)return{};var n,t,i={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(i[n]=e[n]);return i}var s=["spacing"],u=["isCurrentPage","as","className","href"],d=["isCurrentPage","separator","isLastChild","spacing","children","className"],p=["children","spacing","separator","className"],b=(0,t.Gp)((function(e,r){var n=e.spacing,i=o(e,s),a=c({mx:n},(0,t.yK)().separator);return l.createElement(t.m$.span,c({ref:r,role:"presentation"},i,{__css:a}))}));i.Ts&&(b.displayName="BreadcrumbSeparator");var y=(0,t.Gp)((function(e,r){var n=e.isCurrentPage,a=e.as,s=e.className,d=e.href,p=o(e,u),b=(0,t.yK)(),y=c({ref:r,as:a,className:(0,i.cx)("chakra-breadcrumb__link",s)},p);return n?l.createElement(t.m$.span,c({"aria-current":"page",__css:b.link},y)):l.createElement(t.m$.a,c({__css:b.link,href:d},y))}));i.Ts&&(y.displayName="BreadcrumbLink");var v=(0,t.Gp)((function(e,r){var n=e.isCurrentPage,s=e.separator,u=e.isLastChild,p=e.spacing,v=e.children,f=e.className,_=o(e,d),h=(0,a.WR)(v).map((function(e){return e.type===y?l.cloneElement(e,{isCurrentPage:n}):e.type===b?l.cloneElement(e,{spacing:p,children:e.props.children||s}):e})),j=c({display:"inline-flex",alignItems:"center"},(0,t.yK)().item),m=(0,i.cx)("chakra-breadcrumb__list-item",f);return l.createElement(t.m$.li,c({ref:r,className:m},_,{__css:j}),h,!u&&l.createElement(b,{spacing:p},s))}));i.Ts&&(v.displayName="BreadcrumbItem");var f=(0,t.Gp)((function(e,r){var n=(0,t.jC)("Breadcrumb",e),s=(0,t.Lr)(e),u=s.children,d=s.spacing,b=void 0===d?"0.5rem":d,y=s.separator,v=void 0===y?"/":y,f=s.className,_=o(s,p),h=(0,a.WR)(u),j=h.length,m=h.map((function(e,r){return l.cloneElement(e,{separator:v,spacing:b,isLastChild:j===r+1})})),x=(0,i.cx)("chakra-breadcrumb",f);return l.createElement(t.m$.nav,c({ref:r,"aria-label":"breadcrumb",className:x,__css:n.container},_),l.createElement(t.Fo,{value:n},l.createElement(t.m$.ol,{className:"chakra-breadcrumb__list"},m)))}));i.Ts&&(f.displayName="Breadcrumb")},51471:function(e,r,n){"use strict";n.d(r,{Z:function(){return f}});var t=n(34896),i=n(88038),a=n.n(i),l=n(86677),c=(n(27378),n(90768)),o=n(35100),s=n(64989),u=n(48114),d=n(51365),p=n(29549),b=n(60709),y=n(24246),v=function(){var e=(0,l.useRouter)();return(0,y.jsx)(t.xu,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,y.jsxs)(t.xu,{children:[(0,y.jsxs)(t.Kq,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,y.jsx)(t.xv,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,y.jsx)(p.zx,{size:"sm",variant:"outline",onClick:function(){e.push(b.fz)},children:"Configure"})]}),(0,y.jsxs)(t.xv,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},f=function(e){var r=e.children,n=e.title,i=(0,c.hz)(),p=(0,l.useRouter)(),b="/privacy-requests"===p.pathname||"/datastore-connection"===p.pathname,f=!(i.flags.privacyRequestsConfiguration&&b),_=(0,d.JE)(void 0,{skip:f}).data,h=(0,d.PW)(void 0,{skip:f}).data,j=i.flags.privacyRequestsConfiguration&&(!_||!h)&&b;return(0,y.jsxs)(t.kC,{"data-testid":n,direction:"column",children:[(0,y.jsxs)(a(),{children:[(0,y.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,y.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,y.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,y.jsx)(o.Z,{}),(0,y.jsx)(u.Z,{}),(0,y.jsxs)(t.kC,{as:"main",flexGrow:1,padding:10,gap:10,children:[(0,y.jsx)(t.xu,{flex:0,flexShrink:0,children:(0,y.jsx)(s.U,{})}),(0,y.jsxs)(t.kC,{direction:"column",flex:1,minWidth:0,children:[j?(0,y.jsx)(v,{}):null,r]})]})]})}},86054:function(e,r,n){"use strict";var t=n(90849),i=n(90089),a=n(34896),l=n(24246),c=["title","children"];function o(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function s(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?o(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}r.Z=function(e){var r=e.title,n=e.children,t=(0,i.Z)(e,c);return(0,l.jsxs)(a.xu,s(s({borderRadius:"md",border:"1px solid",borderColor:"gray.200"},t),{},{children:[(0,l.jsx)(a.X6,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:r}),(0,l.jsx)(a.Kq,{p:6,spacing:6,children:n})]}))}},38229:function(e,r,n){"use strict";n.d(r,{F:function(){return i},J:function(){return t}});var t=new Map([["overlay","Overlay"],["privacy_center","Privacy center"],["tcf_overlay","TCF overlay"]]),i=new Map([["always_enabled","Always enabled"],["always_disabled","Always disabled"],["enabled_where_required","Enabled where legally required"]])},4344:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return X}});var t=n(9198),i=n(34896),a=n(83125),l=n(24487),c=n(79894),o=n.n(c),s=n(86677),u=n(51471),d=n(60709),p=n(38229),b=n(90849),y=n(90089),v=n(55732),f=n(97865),_=n(34707),h=n.n(_),j=n(70409),m=n(29549),x=n(34090),g=n(27378),O=n(78624),k=n(24753),w=n(49841),P=n(68301),R=n(40368),q=["created_at","updated_at","version","experience_config_history_id"];function E(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function Z(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?E(Object(n),!0).forEach((function(r){(0,b.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var C={title:"",description:"",accept_button_label:"",reject_button_label:"",save_button_label:"",regions:[],component:R.re.OVERLAY},N=P.Ry().shape({accept_button_label:P.Z_().label("Accept button label").required(),reject_button_label:P.Z_().required().label("Reject button label"),save_button_label:P.Z_().required().label("Save button label")}),S=P.Ry().shape({title:P.Z_().required().label("Title"),description:P.Z_().required().label("Description"),privacy_policy_link_label:P.Z_().nullable().label("Privacy policy link label"),privacy_policy_url:P.Z_().nullable().trim().url().label("Privacy policy URL")}).concat(N),D=P.Ry().shape({title:P.Z_().required().label("Overlay title"),description:P.Z_().required().label("Overlay description"),acknowledge_button_label:P.Z_().required().label("Acknowledge button label"),privacy_preferences_link_label:P.Z_().required().label("Privacy preferences link label"),banner_title:P.Z_().nullable().label("Banner title"),banner_description:P.Z_().nullable().label("Banner description"),privacy_policy_link_label:P.Z_().nullable().label("Privacy policy link label"),privacy_policy_url:P.Z_().nullable().trim().url().label("Privacy policy URL")}).concat(N),A=function(e){return Z(Z({},e),{},{banner_title:e.banner_title||null,banner_description:e.banner_description||null,privacy_policy_link_label:e.privacy_policy_link_label||null,privacy_policy_url:e.privacy_policy_url||null})},L=function(e){return Z(Z({},e),{},{banner_title:e.banner_title||null,banner_description:e.banner_description||null,privacy_policy_link_label:e.privacy_policy_link_label||null,privacy_policy_url:e.privacy_policy_url||null})},z=n(86054),B=n(43139),K=n(24246),T=function(){return(0,K.jsxs)(z.Z,{title:"Privacy policy link configuration","data-testid":"privacy-policy",children:[(0,K.jsx)(B.j0,{name:"privacy_policy_link_label",label:"Privacy policy link label",variant:"stacked"}),(0,K.jsx)(B.j0,{name:"privacy_policy_url",label:"Privacy policy URL",variant:"stacked"})]})};function M(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function $(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?M(Object(n),!0).forEach((function(r){(0,b.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var V=(0,O.MM)(R.vp).map((function(e){var r;return $($({},e),{},{label:null!==(r=p.F.get(e.value))&&void 0!==r?r:e.label})})),W=function(){return(0,K.jsxs)(i.Kq,{spacing:6,children:[(0,K.jsxs)(z.Z,{title:"Overlay & banner configuration","data-testid":"banner-and-preferences-labeling",children:[(0,K.jsx)(B.j0,{label:"Title, displayed on both the overlay and banner",name:"title",variant:"stacked",isRequired:!0}),(0,K.jsx)(B.Ks,{label:"Description, displayed on both the overlay and banner",name:"description",variant:"stacked",isRequired:!0}),(0,K.jsx)(B.j0,{label:"Banner title, if different from overlay",name:"banner_title",variant:"stacked"}),(0,K.jsx)(B.Ks,{label:"Banner description, if different from overlay",name:"banner_description",variant:"stacked"}),(0,K.jsx)(B.j0,{label:"\u201cAccept\u201d button label, displayed on both the overlay and banner",name:"accept_button_label",variant:"stacked",isRequired:!0}),(0,K.jsx)(B.j0,{label:"\u201cReject\u201d button label, displayed on both the overlay and banner",name:"reject_button_label",variant:"stacked",isRequired:!0}),(0,K.jsx)(B.j0,{label:"\u201cManage preferences\u201d button label, displayed only on the banner",name:"privacy_preferences_link_label",variant:"stacked",isRequired:!0}),(0,K.jsx)(B.j0,{label:"\u201cSave\u201d button label, displayed only on the overlay",name:"save_button_label",variant:"stacked",isRequired:!0}),(0,K.jsx)(B.j0,{label:"\u201cAcknowledge\u201d button label, displayed only on a notice-only banner",name:"acknowledge_button_label",variant:"stacked",isRequired:!0})]}),(0,K.jsx)(T,{}),(0,K.jsx)(z.Z,{title:"Display configuration","data-testid":"display-configuration",children:(0,K.jsx)(B.AP,{name:"banner_enabled",label:"Banner",options:V,variant:"stacked",isRequired:!0})})]})},F=function(){return(0,K.jsxs)(i.Kq,{spacing:6,children:[(0,K.jsxs)(z.Z,{title:"Consent page text","data-testid":"consent-page-text",children:[(0,K.jsx)(B.j0,{name:"title",label:"Title",variant:"stacked",isRequired:!0}),(0,K.jsx)(B.Ks,{label:"Description",name:"description",variant:"stacked",isRequired:!0})]}),(0,K.jsxs)(z.Z,{title:"Actions","data-testid":"actions",children:[(0,K.jsx)(B.j0,{label:"Save button label",name:"save_button_label",variant:"stacked",isRequired:!0}),(0,K.jsx)(B.j0,{label:"Reject button label",name:"reject_button_label",variant:"stacked",isRequired:!0}),(0,K.jsx)(B.j0,{label:"Accept button label",name:"accept_button_label",variant:"stacked",isRequired:!0})]}),(0,K.jsx)(T,{})]})},G=["component"];function J(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function Y(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?J(Object(n),!0).forEach((function(r){(0,b.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var U=function(e){var r=e.privacyExperience,n=(0,s.useRouter)(),t=(0,j.pm)(),a=r?function(e){var r,n,t,i,a,l,c;return e.created_at,e.updated_at,e.version,e.experience_config_history_id,Z(Z({},(0,y.Z)(e,q)),{},{title:null!==(r=e.title)&&void 0!==r?r:"",description:null!==(n=e.description)&&void 0!==n?n:"",accept_button_label:null!==(t=e.accept_button_label)&&void 0!==t?t:"",reject_button_label:null!==(i=e.reject_button_label)&&void 0!==i?i:"",save_button_label:null!==(a=e.save_button_label)&&void 0!==a?a:"",regions:null!==(l=e.regions)&&void 0!==l?l:C.regions,component:null!==(c=e.component)&&void 0!==c?c:C.component})}(r):C,l=(0,w.$d)(),c=(0,f.Z)(l,1)[0],o=(0,w.mJ)(),u=(0,f.Z)(o,1)[0],p=(0,g.useMemo)((function(){return!!r}),[r]),b=function(){var e=(0,v.Z)(h().mark((function e(i){var a,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p||!r){e.next=7;break}return i.component,l=(0,y.Z)(i,G),e.next=4,c(A(Y(Y({},l),{},{id:r.id})));case 4:a=e.sent,e.next=10;break;case 7:return e.next=9,u(L(i));case 9:a=e.sent;case 10:(0,O.D4)(a)?t((0,k.Vo)((0,O.e$)(a.error))):(t((0,k.t5)("Privacy experience ".concat(p?"updated":"created"))),p||n.push(d.w0));case 11:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),_=function(e){var r=e.privacyExperience,n=(0,g.useMemo)((function(){return r.component===R.re.OVERLAY||r.component===R.re.TCF_OVERLAY}),[r.component]),t=(0,g.useMemo)((function(){return n?D:S}),[n]);return{isOverlay:n,validationSchema:t}}({privacyExperience:a}),P=_.validationSchema,E=_.isOverlay;return(0,K.jsx)(x.J9,{initialValues:a,enableReinitialize:!0,onSubmit:b,validationSchema:P,children:function(e){var r=e.dirty,t=e.isValid,a=e.isSubmitting;return(0,K.jsx)(x.l0,{children:(0,K.jsxs)(i.Kq,{spacing:10,children:[E?(0,K.jsx)(W,{}):(0,K.jsx)(F,{}),(0,K.jsxs)(m.hE,{size:"sm",spacing:2,children:[(0,K.jsx)(m.zx,{variant:"outline",onClick:function(){n.back()},children:"Cancel"}),(0,K.jsx)(m.zx,{type:"submit",variant:"primary",size:"sm",isDisabled:a||!r||!t,isLoading:a,"data-testid":"save-btn",children:"Save"})]})]})})}})},X=function(){var e,r=(0,s.useRouter)(),n="";r.query.id&&(n=Array.isArray(r.query.id)?r.query.id[0]:r.query.id);var c=(0,w.Qv)(n),b=c.data;if(c.isLoading)return(0,K.jsx)(u.Z,{title:"Privacy experience",children:(0,K.jsx)(i.M5,{children:(0,K.jsx)(a.$,{})})});if(!b)return(0,K.jsx)(u.Z,{title:"Privacy experience",children:(0,K.jsxs)(i.xv,{children:["No privacy experience with id ",n," found."]})});var y=b.component===R.re.OVERLAY?"Configure your consent overlay":"Configure your privacy center",v=b.component===R.re.OVERLAY?"Configure the text of your privacy overlay, privacy banner, and the text of the buttons which users will click to accept, reject, manage, and save their preferences.":"Configure this privacy center experience. You can update the text which will display above the privacy notices and choose whether you\u2019d like users to access the privacy center with a link.";return(0,K.jsxs)(u.Z,{title:"Privacy experience ".concat(b.component),children:[(0,K.jsxs)(i.xu,{mb:4,children:[(0,K.jsx)(i.X6,{fontSize:"2xl",fontWeight:"semibold",mb:2,"data-testid":"header",children:y}),(0,K.jsx)(i.xu,{children:(0,K.jsxs)(l.aG,{fontWeight:"medium",fontSize:"sm",color:"gray.600","data-testid":"breadcrumbs",children:[(0,K.jsx)(l.gN,{children:(0,K.jsx)(o(),{href:t.Jw,children:"Privacy requests"})}),(0,K.jsx)(l.gN,{children:(0,K.jsx)(o(),{href:d.w0,children:"Privacy experience"})}),(0,K.jsx)(l.gN,{color:"complimentary.500",children:(0,K.jsx)(o(),{href:"#",children:null!==(e=p.J.get(b.component||""))&&void 0!==e?e:b.component})})]})})]}),(0,K.jsxs)(i.xu,{width:{base:"100%",lg:"70%"},children:[(0,K.jsx)(i.xv,{fontSize:"sm",mb:8,children:v}),(0,K.jsx)(i.xu,{"data-testid":"privacy-experience-detail-page",children:(0,K.jsx)(U,{privacyExperience:b})})]})]})}},5123:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/consent/privacy-experience/[id]",function(){return n(4344)}])}},function(e){e.O(0,[2141,845,8301,331,3139,9774,2888,179],(function(){return r=5123,e(e.s=r);var r}));var r=e.O();_N_E=r}]);