(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3709],{62332:function(e,n,t){"use strict";t.d(n,{Hk:function(){return F},KF:function(){return T},Qd:function(){return E},UQ:function(){return P},XE:function(){return Z}});var r=t(13018),i=t(32393),o=t(21295),s=t(14007),a=t(49031),l=t(27378),c=t(79789),u=t(21084);function d(){return d=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},d.apply(this,arguments)}function p(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}var f=["onChange","defaultIndex","index","allowMultiple","allowToggle"],h=["isDisabled","isFocusable","id"],g=(0,c.n)(),m=g[0],x=(g[1],g[2]),v=g[3];function b(e){var n=e.onChange,t=e.defaultIndex,r=e.index,i=e.allowMultiple,o=e.allowToggle,a=p(e,f);!function(e){var n=e.index||e.defaultIndex,t=!(0,s.o8)(n)&&!(0,s.kJ)(n)&&e.allowMultiple;(0,s.ZK)({condition:!!t,message:"If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: "+typeof n+","})}(e),function(e){(0,s.ZK)({condition:!(!e.allowMultiple||!e.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}(e);var c=x(),d=(0,l.useState)(-1),h=d[0],g=d[1];(0,u.zq)((function(){g(-1)}));var m=(0,u.Tx)({value:r,defaultValue:function(){return i?null!=t?t:[]:null!=t?t:-1},onChange:n}),v=m[0],b=m[1];return{index:v,setIndex:b,htmlProps:a,getAccordionItemProps:function(e){var n=!1;null!==e&&(n=(0,s.kJ)(v)?v.includes(e):v===e);return{isOpen:n,onChange:function(n){if(null!==e)if(i&&(0,s.kJ)(v)){var t=n?(0,s.jX)(v,e):(0,s.cl)(v,e);b(t)}else n?b(e):o&&b(-1)}}},focusedIndex:h,setFocusedIndex:g,descendants:c}}var j=(0,a.kr)({name:"AccordionContext",errorMessage:"useAccordionContext: `context` is undefined. Seems you forgot to wrap the accordion components in `<Accordion />`"}),y=j[0],C=j[1];function O(e){var n=e.isDisabled,t=e.isFocusable,r=e.id,i=p(e,h),o=C(),c=o.getAccordionItemProps,f=o.setFocusedIndex,g=(0,l.useRef)(null),m=(0,u.ZS)(r,"accordion-button","accordion-panel"),x=m[0],b=m[1];!function(e){(0,s.ZK)({condition:!(!e.isFocusable||e.isDisabled),message:"Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.\n    "})}(e);var j=v({disabled:n&&!t}),y=j.register,O=j.index,k=j.descendants,w=c(-1===O?null:O),_=w.isOpen,P=w.onChange;!function(e){(0,s.ZK)({condition:e.isOpen&&!!e.isDisabled,message:"Cannot open a disabled accordion item"})}({isOpen:_,isDisabled:n});var S=(0,l.useCallback)((function(){null==P||P(!_),f(O)}),[O,f,_,P]),D=(0,l.useCallback)((function(e){var n={ArrowDown:function(){var e=k.nextEnabled(O);e&&(0,s.T_)(e.node)},ArrowUp:function(){var e=k.prevEnabled(O);e&&(0,s.T_)(e.node)},Home:function(){var e=k.firstEnabled();e&&(0,s.T_)(e.node)},End:function(){var e=k.lastEnabled();e&&(0,s.T_)(e.node)}}[(0,s.uh)(e)];n&&(e.preventDefault(),n(e))}),[k,O]),z=(0,l.useCallback)((function(){f(O)}),[f,O]),E=(0,l.useCallback)((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),d({},e,{type:"button",ref:(0,a.lq)(y,g,t),id:x,disabled:!!n,"aria-expanded":!!_,"aria-controls":b,onClick:(0,s.v0)(e.onClick,S),onFocus:(0,s.v0)(e.onFocus,z),onKeyDown:(0,s.v0)(e.onKeyDown,D)})}),[x,n,_,S,z,D,b,y]),T=(0,l.useCallback)((function(e,n){return void 0===e&&(e={}),void 0===n&&(n=null),d({},e,{ref:n,role:"region",id:b,"aria-labelledby":x,hidden:!_})}),[x,_,b]);return{isOpen:_,isDisabled:n,isFocusable:t,onOpen:function(){null==P||P(!0)},onClose:function(){null==P||P(!1)},getButtonProps:E,getPanelProps:T,htmlProps:i}}var k=["children","reduceMotion"],w=["htmlProps","descendants"],_=["htmlProps"],P=(0,i.Gp)((function(e,n){var t=e.children,r=e.reduceMotion,o=p(e,k),a=(0,i.jC)("Accordion",o),c=b((0,i.Lr)(o)),u=c.htmlProps,f=c.descendants,h=p(c,w),g=l.useMemo((function(){return d({},h,{reduceMotion:!!r})}),[h,r]);return l.createElement(m,{value:f},l.createElement(y,{value:g},l.createElement(i.Fo,{value:a},l.createElement(i.m$.div,d({ref:n},u,{className:(0,s.cx)("chakra-accordion",o.className),__css:a.root}),t))))}));s.Ts&&(P.displayName="Accordion");var S=(0,a.kr)({name:"AccordionItemContext",errorMessage:"useAccordionItemContext: `context` is undefined. Seems you forgot to wrap the accordion item parts in `<AccordionItem />` "}),D=S[0],z=S[1],E=(0,i.Gp)((function(e,n){var t=e.children,r=e.className,o=O(e),a=o.htmlProps,c=p(o,_),u=d({},(0,i.yK)().container,{overflowAnchor:"none"}),f=l.useMemo((function(){return c}),[c]);return l.createElement(D,{value:f},l.createElement(i.m$.div,d({ref:n},a,{className:(0,s.cx)("chakra-accordion__item",r),__css:u}),(0,s.Pu)(t,{isExpanded:!!c.isOpen,isDisabled:!!c.isDisabled})))}));s.Ts&&(E.displayName="AccordionItem");var T=(0,i.Gp)((function(e,n){var t=(0,z().getButtonProps)(e,n),r=d({display:"flex",alignItems:"center",width:"100%",outline:0},(0,i.yK)().button);return l.createElement(i.m$.button,d({},t,{className:(0,s.cx)("chakra-accordion__button",e.className),__css:r}))}));s.Ts&&(T.displayName="AccordionButton");var F=(0,i.Gp)((function(e,n){var t=C().reduceMotion,r=z(),a=r.getPanelProps,c=r.isOpen,u=a(e,n),p=(0,s.cx)("chakra-accordion__panel",e.className),f=(0,i.yK)();t||delete u.hidden;var h=l.createElement(i.m$.div,d({},u,{__css:f.panel,className:p}));return t?h:l.createElement(o.UO,{in:c},h)}));s.Ts&&(F.displayName="AccordionPanel");var Z=function(e){var n=z(),t=n.isOpen,o=n.isDisabled,a=C().reduceMotion,c=(0,s.cx)("chakra-accordion__icon",e.className),u=d({opacity:o?.4:1,transform:t?"rotate(-180deg)":void 0,transition:a?void 0:"transform 0.2s",transformOrigin:"center"},(0,i.yK)().icon);return l.createElement(r.JO,d({viewBox:"0 0 24 24","aria-hidden":!0,className:c,__css:u},e),l.createElement("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}))};s.Ts&&(Z.displayName="AccordionIcon")},95286:function(e,n,t){"use strict";t.d(n,{k:function(){return o}});var r=t(2458),i=t(24246),o=function(e){var n=e.onCancel,t=e.onConfirm,o=e.isOpen,s=e.onClose;return(0,i.jsx)(r.Z,{isOpen:o,onClose:s,onCancel:n,isCentered:!0,title:"Upgrade to choose vendors",message:"To choose vendors and have system information auto-populated using Fides Compass, you will need to upgrade Fides. Meanwhile, you can manually add individual systems using the button below.",cancelButtonText:"Add vendors manually",continueButtonText:"Upgrade",onConfirm:t})}},65535:function(e,n,t){"use strict";t.d(n,{ZS:function(){return a},a4:function(){return o}});var r=t(80406),i=t(28703).u.injectEndpoints({endpoints:function(e){return{getPurposes:e.query({query:function(){return"purposes"}})}}}),o=i.useGetPurposesQuery,s={purposes:{},special_purposes:{}},a=(0,r.P1)(i.endpoints.getPurposes.select(),(function(e){return e.data||s}))},29073:function(e,n,t){"use strict";var r=t(34896),i=t(73452),o=t(24246);n.Z=function(e){var n=e.title,t=e.description,s=e.button;return(0,o.jsxs)(r.Ug,{backgroundColor:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",py:4,px:6,"data-testid":"empty-state",children:[(0,o.jsx)(i.ii,{alignSelf:"start",color:"blue.400",mt:.5}),(0,o.jsxs)(r.xu,{flexGrow:1,children:[(0,o.jsx)(r.xv,{fontWeight:"bold",fontSize:"sm",mb:1,children:n}),(0,o.jsx)(r.xv,{fontSize:"sm",color:"gray.600",lineHeight:"5",children:t})]}),s]})}},82466:function(e,n,t){"use strict";var r=t(90089),i=t(90849),o=t(40240),s=t(34896),a=t(55422),l=t(24246),c=t(27378),u=["key"],d=["key"];function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.rowHeading,t=e.renderRowSubheading,i=e.renderOverflowMenu,p=e.rows,h=e.prepareRow,g=e.getTableBodyProps,m=e.onSubrowClick;return(0,l.jsx)(o.p3,f(f({backgroundColor:a.p},g()),{},{children:p.map((function(e){return h(e),[(0,c.createElement)(o.Tr,f(f({},e.getRowProps()),{},{borderTopLeftRadius:"6px",borderTopRightRadius:"6px",backgroundColor:"gray.50",borderWidth:"1px",borderBottom:"none",mt:4,ml:4,mr:4,key:e.groupByVal,"data-testid":"grouped-row-".concat(e.groupByVal)}),(0,l.jsxs)(o.Td,f(f({display:"flex",justifyContent:"space-between",colSpan:e.cells.length},e.cells[0].getCellProps()),{},{width:"auto",paddingX:2,children:[(0,l.jsxs)(s.Kq,{children:[n?(0,l.jsx)(s.xv,{fontSize:"xs",lineHeight:4,fontWeight:"500",color:"gray.600",textTransform:"uppercase",pb:2,pt:1,children:n}):null,(0,l.jsx)(s.xv,{fontSize:"sm",lineHeight:5,fontWeight:"bold",color:"gray.600",mb:1,children:t(e)})]}),i?i(e):null]}))),e.subRows.map((function(n,t){h(n);var i=n.getRowProps(),s=i.key,a=(0,r.Z)(i,u);return(0,l.jsx)(o.Tr,f(f({minHeight:9,borderWidth:"1px",borderColor:"gray.200",borderTop:"none",borderBottomLeftRadius:t===e.subRows.length-1?"6px":"",borderBottomRightRadius:t===e.subRows.length-1?"6px":""},a),{},{_hover:{bg:"gray.50"},cursor:m?"pointer":void 0,backgroundColor:"white",onClick:m?function(){return m(n)}:void 0,ml:4,mr:4,_last:{mb:4},children:n.cells.map((function(e,t){var i=e.getCellProps(),s=i.key,a=(0,r.Z)(i,d);return(0,l.jsx)(o.Td,f(f({},a),{},{borderRightWidth:t===n.cells.length-1?"":"1px",borderBottom:"none",borderColor:"gray.200",padding:0,"data-testid":"subrow-".concat(s),children:e.render("Cell")}),s)}))}),s)}))]}))}))}},99725:function(e,n,t){"use strict";var r=t(90849),i=t(90089),o=t(40240),s=t(34896),a=t(55422),l=t(24246),c=["key"],u=["key"];function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var f=function(){return(0,l.jsx)(o.Th,{padding:0,margin:0,width:4,borderBottomColor:"gray.200",boxSizing:"border-box"})};n.Z=function(e){var n=e.headerGroups;return(0,l.jsx)(o.hr,{position:"sticky",top:"0px",height:"36px",zIndex:10,backgroundColor:a.p,children:n.map((function(e){var n=e.getHeaderGroupProps(),t=n.key,r=(0,i.Z)(n,c);return(0,l.jsxs)(o.Tr,p(p({},r),{},{height:"inherit",children:[(0,l.jsx)(f,{}),e.headers.map((function(e,n){var t=e.getHeaderProps(),r=t.key,a=(0,i.Z)(t,u);return(0,l.jsxs)(o.Th,p(p({},a),{},{title:"".concat(e.Header),textTransform:"none",px:2,display:"flex",alignItems:"center",borderLeftWidth:0===n?"1px":"",borderRightWidth:"1px",borderColor:"gray.200",children:[(0,l.jsx)(s.xv,{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",mr:1,children:e.render("Header")}),e.canResize&&(0,l.jsx)(s.xu,p(p({},e.getResizerProps()),{},{position:"absolute",top:0,right:0,width:2,height:"100%",css:{touchAction:":none"}}))]}),r)})),(0,l.jsx)(f,{})]}),t)}))})}},55422:function(e,n,t){"use strict";t.d(n,{p:function(){return r}});var r="#F7F7F7"},37761:function(e,n,t){"use strict";t.d(n,{E:function(){return r}});var r=function(e){return e.toLowerCase().replace(/ /g,"_").replace(/[^a-zA-Z0-9._<>-]/g,"")}},1504:function(e,n,t){"use strict";var r=t(34896),i=t(29073),o=t(24246);n.Z=function(){return(0,o.jsx)(r.xu,{mb:"6",maxW:"720px","data-testid":"locked-for-GVL-notice",children:(0,o.jsx)(i.Z,{title:"This system is part of the TCF Global Vendor List (GVL)",description:(0,o.jsxs)(o.Fragment,{children:["As a result, the system fields are not editable as they come directly from Fides Compass and the Global Vendor List (GVL). In some cases where the legal basis has been declared to be flexible, you may update the legal basis for particular data uses."," ",(0,o.jsx)(r.rU,{href:"https://fid.es/tcf_gvl",isExternal:!0,color:"complimentary.500",children:"For more information on the Global Vendor List, click here."})]})})})}},88491:function(e,n,t){"use strict";t.d(n,{Z:function(){return P}});var r=t(97865),i=t(90089),o=t(90849),s=t(34896),a=t(29470),l=t(29549),c=t(92975),u=t(93235),d=t(89543),p=t(6719),f=t(34090),h=t(27378),g=t(6848),m=t(43139),x=t(13018),v=t(24246),b=(0,x.IU)({displayName:"CompassIcon",viewBox:"0 0 512 512",path:(0,v.jsx)("path",{fill:"currentColor",d:"M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm306.7 69.1L162.4 380.6c-19.4 7.5-38.5-11.6-31-31l55.5-144.3c3.3-8.5 9.9-15.1 18.4-18.4l144.3-55.5c19.4-7.5 38.5 11.6 31 31L325.1 306.7c-3.2 8.5-9.9 15.1-18.4 18.4zM288 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})}),j=t(38687),y=t(51745),C=["children"];function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w=function(e){var n=e.active,t=e.disabled,r=e.onRefreshSuggestions,i={bg:n?"complimentary.500":"gray.100"};return(0,v.jsxs)(s.gC,{children:[(0,v.jsx)(s.LZ,{minHeight:"18px"}),(0,v.jsxs)(a.v2,{children:[(0,v.jsx)(a.j2,k({as:l.hU,size:"sm",isDisabled:t,icon:(0,v.jsx)(b,{color:n?"white":"gray.700",boxSize:4}),"aria-label":"Update information from Compass","data-testid":"refresh-suggestions-btn",_hover:{_disabled:i}},i)),(0,v.jsx)(a.qy,{children:(0,v.jsx)(a.sN,{onClick:r,children:(0,v.jsx)(s.xv,{fontSize:"xs",lineHeight:4,children:"Reset to Compass defaults"})})})]})]})},_=function(e){e.children;var n=(0,i.Z)(e,C);return(0,v.jsx)(d.Z.Option,k(k({},n),{},{type:"option",children:(0,v.jsxs)(s.kC,{flexDirection:"column",padding:2,children:[(0,v.jsx)(s.xv,{color:"gray.700",fontSize:"14px",lineHeight:5,fontWeight:"medium",children:n.data.label}),n.data.description?(0,v.jsx)(s.xv,{color:"gray.500",fontSize:"12px",lineHeight:4,fontWeight:"normal",children:n.data.description}):null]})}))},P=function(e){var n,t,i=e.label,o=e.isCreate,a=e.lockedForGVL,l=e.options,d=e.onVendorSelected,x=(0,g.C)(y.bN),b=(0,f.U$)({name:"name"}),C=(0,r.Z)(b,3),O=C[0],P=C[1],S=C[2].setValue,D=!(!P.touched||!P.error),z=k(k({},O),{},{value:null!==(n=O.value)&&void 0!==n?n:""}),E=(0,f.u6)(),T=E.touched,F=E.values,Z=E.setTouched,R=E.setFieldValue,M=E.validateForm,A=null!==(t=l.find((function(e){return e.value===z.value})))&&void 0!==t?t:{label:z.value,value:z.value,description:""},V=(0,h.useState)(""),I=V[0],N=V[1],L=l.filter((function(e){return e.label.toLowerCase().startsWith(I.toLowerCase())})),U=!z.value&&!F.vendor_id,B=!!I&&L.length>0,G=a&&!o;(0,h.useEffect)((function(){M()}),[U,M]);var H=function(){S(""),N(""),R("vendor_id",void 0),d(void 0)},W=(0,v.jsx)(c.NI,{isInvalid:D,isRequired:!0,width:"100%",children:(0,v.jsxs)(s.gC,{alignItems:"start",position:"relative",width:"100%",children:[(0,v.jsxs)(s.Ug,{spacing:1,children:[(0,v.jsx)(m.__,{htmlFor:"name",fontSize:"xs",my:0,mr:1,children:i}),(0,v.jsx)(j.Z,{label:"Enter the system name"})]}),(0,v.jsx)(s.xu,{width:"100%","data-testid":"input-name",children:(0,v.jsx)(p.Z,{name:"name",id:"name",options:L,isRequired:!0,value:A,onBlur:function(e){z.onBlur(e),I&&S(I),Z(k(k({},T),{},{name:!0}),!I)},onChange:function(e,n){return function(e,n){if("clear"!==n.action){if(S(e?e.label:""),Z(k(k({},T),{},{vendor_id:!0,name:!0}),"create-option"!==n.action),e){var t=l.some((function(n){return n.value===e.value}))?e.value:void 0;R("vendor_id",t),d(t)}}else H()}(e,n)},onInputChange:function(e){return N(e)},inputValue:I,size:"sm",onKeyDown:function(e){"Tab"===e.key&&I&&L.length>0&&I!==L[0].label&&(N(L[0].label),S(L[0].value))},tabSelectsValue:B,classNamePrefix:"custom-select",placeholder:"Enter system name...",instanceId:"select-name",isDisabled:G,menuPosition:"absolute",isSearchable:!0,isClearable:!!I,focusBorderColor:"primary.600",formatCreateLabel:function(e){return'Create new system "'.concat(e,'"...')},chakraStyles:{container:function(e){return k(k({},e),{},{flexGrow:1,backgroundColor:"white"})},option:function(e,n){return k(k({},e),{},{background:n.isSelected||n.isFocused?"gray.50":"unset"})},dropdownIndicator:function(e){return k(k({},e),{},{display:"none"})},indicatorSeparator:function(e){return k(k({},e),{},{display:"none"})}},components:{Option:_}})}),(0,v.jsx)(m.Bc,{isInvalid:D,message:P.error,fieldName:"name"}),(0,v.jsxs)(s.xv,{"aria-hidden":!0,position:"absolute",backgroundColor:"transparent",style:{marginTop:"31.52px",marginLeft:"13px"},pointerEvents:"none",zIndex:1,fontSize:"sm",children:[(0,v.jsx)(s.xv,{as:"span",color:"transparent",children:I}),I&&L.length>0?(0,v.jsx)(s.xv,{as:"span",color:"complimentary.500",children:L[0].label.substring(I.length)}):null]})]})});return(0,v.jsxs)(s.Ug,{alignItems:"flex-start",width:"full",children:[U?W:(0,v.jsx)(m.j0,{id:"name",name:"name",label:"System name",tooltip:"Enter the system name",variant:"stacked",disabled:G,isRequired:!0,inputRightElement:G?null:(0,v.jsx)(u.P,{onClick:H,size:"sm","data-testid":"clear-btn"})}),(0,v.jsx)(w,{active:!!F.vendor_id||B,disabled:!F.vendor_id||"showing"===x,onRefreshSuggestions:function(){return d(F.vendor_id)}})]})}},16446:function(e,n,t){"use strict";t.d(n,{U:function(){return r}});var r=function(e){var n,t=e.data_categories.flatMap((function(e){return e.split(",")}));return{data_use:e.data_use,data_categories:t,features:e.features,legal_basis_for_processing:e.legal_basis_for_processing,flexible_legal_basis_for_processing:e.flexible_legal_basis_for_processing,retention_period:e.retention_period?e.retention_period:"",cookies:null===(n=e.cookies)||void 0===n?void 0:n.map((function(e){return{name:e.name,domain:e.domain,path:e.path}}))}}},24768:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Ae}});var r=t(34896),i=t(24487),o=t(90768),s=t(79894),a=t.n(s),l=t(27378),c=t(68512),u=t(51471),d=t(60709),p=t(73679),f=t(90089),h=t(55732),g=t(97865),m=t(90849),x=t(34707),v=t.n(x),b=t(21084),j=t(70409),y=t(29549),C=t(34090),O=t(68301),k=t(6848),w=t(43139),_={name:"",consent_use:"",data_use:"",data_categories:["user"],cookieNames:[],cookies:[]},P=[{label:"Analytics",value:"analytics",description:"Provides analytics for activities such as system and advertising performance reporting, insights and fraud detection."},{label:"Essential",value:"essential",description:"Operates the service or product, including legal obligations, support and basic system operations."},{label:"Functional",value:"functional",description:"Used for specific, necessary, and legitimate purposes."},{label:"Marketing",value:"marketing",description:"Enables marketing, promotion, advertising and sales activities for the product, service, application or system."}],S=function(e){return P.some((function(n){return n.value===e.split(".")[0]}))},D=t(37761),z=t(44047),E=t(48466),T=t(51745),F=t(1504),Z=t(88491),R=t(78624),M=t(24753),A=t(60530),V=t(24246),I=function(e){var n=e.title,t=e.children,i=e.isOpen,o=e.onClose;return(0,V.jsxs)(A.u_,{isOpen:i,onClose:o,isCentered:!0,scrollBehavior:"inside",size:"xl",children:[(0,V.jsx)(A.ZA,{}),(0,V.jsxs)(A.hz,{textAlign:"left",p:0,children:[(0,V.jsx)(A.xB,{p:0,children:(0,V.jsx)(r.xu,{backgroundColor:"gray.50",px:6,py:4,border:"1px",borderColor:"gray.200",borderTopRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,V.jsx)(r.X6,{as:"h3",size:"sm",children:n})})}),(0,V.jsx)(A.fe,{pb:4,overflow:"scroll",children:t})]})]})},N=t(86677),L=t(95286),U=function(e){var n=e.onCancel,t=(0,N.useRouter)(),r=(0,b.qY)(),i=r.isOpen,s=r.onOpen,a=r.onClose,l=(0,o.hz)().dictionaryService;return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(L.k,{isOpen:i,onClose:a,onConfirm:function(){window.open("https://fid.es/upgrade-compass")},onCancel:function(){a(),n()}}),(0,V.jsx)(y.zx,{onClick:function(){l?t.push(d.Gg):s()},"data-testid":"add-multiple-vendors-btn",size:"sm",colorScheme:"primary",children:"Add multiple vendors"})]})},B=t(83125),G=t(75846),H=t(16446),W=function(e){var n=e.index,t=e.isSuggestion,i=e.disabled,o=(0,k.C)(G.oW),s=t?"complimentary.500":"gray.800",a=(0,C.u6)().values,l=o.filter((function(e){return e.value.split(".")[0]===a.privacy_declarations[n].consent_use}));return(0,V.jsxs)(r.gC,{width:"100%",borderRadius:"4px",border:"1px solid",borderColor:"gray.200",spacing:4,p:4,children:[(0,V.jsx)(w.AP,{label:"Consent category",tooltip:"What is the system using the data for. For example, is it for third party advertising or perhaps simply providing system operations.",name:"privacy_declarations.".concat(n,".consent_use"),options:P,variant:"stacked",isRequired:!0,isCustomOption:!0,singleValueBlock:!0,textColor:s,isDisabled:i}),(0,V.jsx)(w.AP,{label:"Detailed consent category (optional)",tooltip:"Select a more specific consent category",name:"privacy_declarations.".concat(n,".data_use"),options:l,variant:"stacked",isCustomOption:!0,singleValueBlock:!0,textColor:s,isDisabled:!a.privacy_declarations[n].consent_use||i}),(0,V.jsx)(w.VT,{label:"Cookie names",name:"privacy_declarations.".concat(n,".cookieNames"),options:[],variant:"stacked",isMulti:!0,textColor:s,isDisabled:i})]})},q=function(e){var n,t,r=e.showSuggestions,i=e.isCreate,o=e.disabled,s=(0,C.u6)(),a=s.values,c=s.setFieldValue,u=a.vendor_id,d=(0,z.Wp)({vendor_id:u},{skip:!r||null==u}).isLoading,p=(0,k.C)((0,z.cL)(u||""));(0,l.useEffect)((function(){if(r&&a.vendor_id&&null!==p&&void 0!==p&&p.length){var e=p.filter((function(e){return S(e.data_use)})).map((function(e){return(0,H.U)(e)})).map((function(e){var n,t,r;return{name:null!==(n=e.name)&&void 0!==n?n:"",consent_use:e.data_use.split(".")[0],data_use:e.data_use,data_categories:e.data_categories,cookieNames:(null===(t=e.cookies)||void 0===t?void 0:t.map((function(e){return e.name})))||[],cookies:null!==(r=e.cookies)&&void 0!==r?r:[]}}));c("privacy_declarations",e)}else i&&c("privacy_declarations",[_])}),[r,i,a.vendor_id,p,c]);var f=(null===(n=a.privacy_declarations[a.privacy_declarations.length-1])||void 0===n?void 0:n.data_use)===_.data_use&&(null===(t=a.privacy_declarations[a.privacy_declarations.length-1])||void 0===t?void 0:t.consent_use)===_.consent_use;return d?(0,V.jsx)(B.$,{size:"sm",alignSelf:"center"}):(0,V.jsx)(C.F2,{name:"privacy_declarations",render:function(e){return(0,V.jsxs)(V.Fragment,{children:[a.privacy_declarations.map((function(e,n){return(0,V.jsx)(W,{index:n,disabled:o,isSuggestion:r},e.data_use||n)})),(0,V.jsx)(y.zx,{size:"xs",variant:"ghost",colorScheme:"complimentary",onClick:function(){e.push(_)},disabled:f||o,"data-testid":"add-data-use-btn",children:"Add data use +"})]})}})},K=["cookieNames","consent_use"];function X(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?X(Object(t),!0).forEach((function(n){(0,m.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):X(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var $={name:"",vendor_id:void 0,privacy_declarations:[_]},Y=function(e){var n,t=e.passedInSystem,i=e.onCloseModal,s=(0,b.qY)(),a=Q(Q({},s),{},{isOpen:!!t||s.isOpen}),c=(0,j.pm)(),u=(0,k.T)(),d=(0,k.C)(E.cS),m=t?{name:null!==(n=t.name)&&void 0!==n?n:"",vendor_id:t.vendor_id,privacy_declarations:t.privacy_declarations.filter((function(e){return S(e.data_use)})).map((function(e){var n,t;return Q(Q({},e),{},{name:null!==(n=e.name)&&void 0!==n?n:"",cookies:null!==(t=e.cookies)&&void 0!==t?t:[],cookieNames:e.cookies?e.cookies.map((function(e){return e.name})):[],consent_use:e.data_use.split(".")[0]})}))}:$,x=(0,l.useMemo)((function(){return O.Ry().shape({name:O.Z_().required().label("Vendor name").test("is-unique","",(function(e,n){return!d.map((function(e){return e.name})).filter((function(e){return e!==m.name})).some((function(n){return n===e}))||n.createError({message:'You already have a vendor called "'.concat(e,'". Please specify a unique name for this vendor.')})}))})}),[d,m.name]),P=(0,o.hz)(),A=P.tcf,N=P.dictionaryService,L=(0,z.Rd)(void 0,{skip:!N}).isLoading,B=(0,k.C)(z.o),G=(0,k.C)(T.gU),H=(0,E.f7)(),W=(0,g.Z)(H,1)[0],X=(0,E.qQ)(),Y=(0,g.Z)(X,1)[0],J=(0,k.C)(T.bN),ee=function(){a.onClose(),i&&i(),u((0,T.b3)("initial")),u((0,T.gQ)(!1))},ne=(0,l.useRef)(null),te=ne.current?ne.current.values.vendor_id:void 0,re=(0,k.C)((0,z.$e)(te||"")),ie=function(){var e=(0,h.Z)(v().mark((function e(n,r){var i,o,s,a,l;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.privacy_declarations.filter((function(e){return e.consent_use!==_.consent_use})).flatMap((function(e){var n=e.cookieNames.map((function(n){var t=e.cookies.find((function(e){return e.name===n}));return null!==t&&void 0!==t?t:{name:n,path:"/"}})),t=(e.cookieNames,e.consent_use,(0,f.Z)(e,K));return"marketing"!==e.consent_use||e.data_use?Q(Q({},t),{},{data_use:e.data_use?e.data_use:e.consent_use,cookies:n}):["marketing.advertising.first_party.targeted","marketing.advertising.third_party.targeted"].map((function(e){return Q(Q({},t),{},{data_use:e,cookies:n})}))})),o=t?t.privacy_declarations.filter((function(e){return!S(e.data_use)})):[],s=t?[].concat((0,p.Z)(o),(0,p.Z)(i)):i,a=Q(Q(Q({},re),n),{},{fides_key:t?t.fides_key:(0,D.E)(n.name),system_type:t?t.system_type:"",privacy_declarations:s}),!t){e.next=10;break}return e.next=7,Y(a);case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,W(a);case 12:e.t0=e.sent;case 13:if(l=e.t0,!(0,R.D4)(l)){e.next=17;break}return c((0,M.Vo)((0,R.e$)(l.error))),e.abrupt("return");case 17:c((0,M.t5)("Vendor successfully ".concat(t?"updated":"created","!"))),r.resetForm(),ee();case 20:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),oe=function(e){if(N){if(!e)return u((0,T.b3)("hiding")),void u((0,T.gQ)(!1));u((0,T.b3)("showing")),A&&(0,R.cj)(e)===R.c6.GVL?u((0,T.gQ)(!0)):u((0,T.gQ)(!1))}};return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(r.xu,{mr:2,children:(0,V.jsx)(U,{onCancel:a.onOpen})}),(0,V.jsx)(C.J9,{initialValues:m,enableReinitialize:!0,onSubmit:ie,validationSchema:x,innerRef:ne,children:function(e){var n=e.dirty,i=e.isValid,o=e.resetForm;return(0,V.jsx)(I,{isOpen:a.isOpen,onClose:a.onClose,title:t?"Edit vendor":"Add a vendor",children:(0,V.jsxs)(r.xu,{"data-testid":"add-vendor-modal-content",my:4,children:[G?(0,V.jsx)(F.Z,{}):null,(0,V.jsx)(C.l0,{children:(0,V.jsxs)(r.gC,{alignItems:"start",spacing:6,children:[N?(0,V.jsx)(Z.Z,{label:"Vendor name",options:B,onVendorSelected:oe,isCreate:!t,lockedForGVL:G}):(0,V.jsx)(w.j0,{id:"name",name:"name",isRequired:!0,label:"Vendor name",tooltip:"Give the system a unique, and relevant name for reporting purposes. e.g. \u201cEmail Data Warehouse\u201d",variant:"stacked",disabled:!!t}),(0,V.jsx)(q,{showSuggestions:"showing"===J,isCreate:!t,disabled:G}),(0,V.jsxs)(y.hE,{size:"sm",width:"100%",justifyContent:"space-between",children:[(0,V.jsx)(y.zx,{variant:"outline",onClick:function(){ee(),o()},children:"Cancel"}),(0,V.jsx)(y.zx,{type:"submit",variant:"primary",isDisabled:L||!n||!i,isLoading:L,"data-testid":"save-btn",children:"Save vendor"})]})]})})]})})}})]})},J=t(29073),ee=t(29470),ne=t(5008),te=t(40240),re=t(60378),ie=t(2458),oe=t(95319),se=t(82466),ae=t(99725),le=t(85249);function ce(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ue(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ce(Object(t),!0).forEach((function(n){(0,m.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ce(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var de=function(e){(0,G.fd)();var n=(0,k.C)(G.U3),t=new Map(n.map((function(e){return[e.fides_key,e.name||e.fides_key]})));return"N/A"===e.value?(0,V.jsx)(r.xu,{p:2,children:"N/A"}):(0,V.jsx)(r.xu,{children:(0,V.jsx)(oe.N0,ue({isPlainText:!0,map:t},e))})};function pe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function fe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?pe(Object(t),!0).forEach((function(n){(0,m.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var he=function(){var e,n,t=(0,k.C)(E.cS),i=(0,l.useMemo)((function(){return function(e){var n=[];return e.forEach((function(e){var t=!1,r=e.privacy_declarations.map((function(e){return{cookies:e.cookies,dataUse:e.data_use}}));r.length&&r.forEach((function(r){var i=r.dataUse,o=r.cookies;null===o||void 0===o||o.forEach((function(r){t=!0,n.push({cookie:r,name:e.name,id:e.fides_key,dataUse:i})}))})),t||n.push({name:e.name,id:e.fides_key})})),n}(t)}),[t]),o=(0,l.useState)(void 0),s=o[0],a=o[1],c=(0,l.useState)(void 0),u=c[0],d=c[1],p=(0,b.qY)(),f=p.isOpen,m=p.onOpen,x=p.onClose,C=(0,l.useMemo)((function(){return[{Header:"Vendor",accessor:"name",Cell:oe.p7,aggregate:function(e){return e[0]}},{Header:"Id",accessor:"id"},{Header:"Cookie name",accessor:function(e){return e.cookie?e.cookie.name:"N/A"},Cell:oe.p7},{Header:"Data use",accessor:function(e){var n;return null!==(n=e.dataUse)&&void 0!==n?n:"N/A"},Cell:de}]}),[]),O=(0,re.useTable)({columns:C,data:i,initialState:{groupBy:["id"],hiddenColumns:["id"]}},re.useGlobalFilter,re.useGroupBy,re.useFlexLayout,re.useResizeColumns),w=O.getTableProps,_=O.getTableBodyProps,P=O.headerGroups,S=O.prepareRow,D=O.rows,z=(0,E.DW)(),T=(0,g.Z)(z,1)[0],F=(0,j.pm)(),Z=function(){var e=(0,h.Z)(v().mark((function e(n){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(n);case 2:t=e.sent,(0,R.D4)(t)?F((0,M.Vo)((0,R.e$)(t.error))):F((0,M.t5)("Successfully deleted vendor")),x();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,V.jsxs)(r.xu,{boxSize:"100%",overflow:"auto",children:[(0,V.jsxs)(r.Ug,{mt:2,mb:4,justifyContent:"space-between",children:[(0,V.jsx)(le.Z,{globalFilter:O.state.globalFilter,setGlobalFilter:O.setGlobalFilter,placeholder:"Search"}),(0,V.jsxs)(r.kC,{children:[(0,V.jsx)(r.kC,{width:"10px"}),(0,V.jsx)(Y,{passedInSystem:s,onCloseModal:function(){return a(void 0)}})]}),(0,V.jsx)(ie.Z,{isOpen:f,onClose:x,onConfirm:function(){return Z(u.fides_key)},title:"Delete ".concat(null!==(e=null===u||void 0===u?void 0:u.name)&&void 0!==e?e:null===u||void 0===u?void 0:u.fides_key),message:(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(r.xv,{children:["This will delete the vendor"," ",(0,V.jsx)(r.xv,{color:"complimentary.500",as:"span",fontWeight:"bold",children:null!==(n=null===u||void 0===u?void 0:u.name)&&void 0!==n?n:null===u||void 0===u?void 0:u.fides_key})," ","and all its cookies."]}),(0,V.jsx)(r.xv,{children:"Are you sure you want to continue?"})]})})]}),(0,V.jsxs)(te.iA,fe(fe({},w()),{},{size:"sm","data-testid":"datamap-table",children:[(0,V.jsx)(ae.Z,{headerGroups:P}),(0,V.jsx)(se.Z,{rows:D,renderRowSubheading:function(e){return e.values.name},prepareRow:S,getTableBodyProps:_,renderOverflowMenu:function(e){return(0,V.jsxs)(ee.v2,{children:[(0,V.jsx)(ee.j2,{as:y.hU,"aria-label":"Show vendor options",icon:(0,V.jsx)(ne.nX,{}),size:"xs",variant:"outline","data-testid":"configure-".concat(e.values.id)}),(0,V.jsxs)(ee.qy,{children:[(0,V.jsx)(ee.sN,{"data-testid":"edit-".concat(e.values.id),onClick:function(){return function(e){var n=t.find((function(n){return e===n.fides_key}));a(n)}(e.values.id)},children:"Manage cookies"}),(0,V.jsx)(ee.sN,{"data-testid":"delete-".concat(e.values.id),onClick:function(){return function(e){var n=t.find((function(n){return e===n.fides_key}));d(n),m()}(e.values.id)},children:"Delete"})]})]})}})]}))]})},ge=function(e){var n=e.children;return(0,V.jsxs)(r.gC,{spacing:4,alignItems:"start",children:[(0,V.jsx)(r.xv,{children:"To manage consent, please add your first vendor. A vendor is a third-party SaaS application that processes personal data for varying purposes."}),(0,V.jsx)(r.Ug,{children:n})]})},me=function(){var e=(0,E.K3)(),n=e.data,t=e.isLoading;return(0,G.fd)(),t?(0,V.jsx)(r.M5,{children:(0,V.jsx)(B.$,{})}):n&&0!==n.length?(0,V.jsx)(he,{}):(0,V.jsx)(J.Z,{title:"It looks like it's your first time here!",description:(0,V.jsx)(ge,{children:(0,V.jsx)(Y,{})})})},xe=t(92222),ve=t(59003),be=t(32317),je=t(77751),ye=t(62332),Ce=function(e){var n=e.heading,t=e.children;return(0,V.jsxs)(r.xu,{padding:"12px 8px 8px 12px",maxHeight:600,children:[n?(0,V.jsx)(r.X6,{size:"md",lineHeight:6,fontWeight:"bold",mb:2,children:n}):null,t]})},Oe=function(e){var n=e.isOpen,t=e.onClose,i=e.children,o=e.resetFilters;return(0,V.jsxs)(A.u_,{isOpen:n,onClose:t,isCentered:!0,size:"2xl",children:[(0,V.jsx)(A.ZA,{}),(0,V.jsxs)(A.hz,{children:[(0,V.jsx)(A.xB,{children:"Filters"}),(0,V.jsx)(A.ol,{}),(0,V.jsx)(r.iz,{}),(0,V.jsx)(A.fe,{maxH:"85vh",padding:"0px",overflowX:"auto",style:{scrollbarGutter:"stable"},children:i}),(0,V.jsx)(A.mz,{children:(0,V.jsxs)(r.xu,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,V.jsx)(y.zx,{variant:"outline",size:"sm",mr:3,onClick:o,flexGrow:1,children:"Reset filters"}),(0,V.jsx)(y.zx,{colorScheme:"primary",size:"sm",onClick:t,flexGrow:1,children:"Done"})]})})]})]})},ke=t(65535);function we(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _e(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?we(Object(t),!0).forEach((function(n){(0,m.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):we(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Pe=function(e){var n=e.value,t=e.displayText,i=e.isChecked,o=e.onCheckboxChange;return(0,V.jsx)(je.XZ,{value:n,height:"20px",mb:"25px",isChecked:i,onChange:function(e){var t=e.target;o(n,t.checked)},_focusWithin:{bg:"gray.100"},colorScheme:"complimentary",children:(0,V.jsx)(r.xv,{fontSize:"sm",lineHeight:5,textOverflow:"ellipsis",overflow:"hidden",children:t})},n)},Se=function(e){var n=e.options,t=e.header,i=e.onCheckboxChange,o=e.columns,s=void 0===o?3:o,a=e.numDefaultOptions,c=void 0===a?15:a,u=(0,l.useState)(!1),d=u[0],p=u[1],f=d?n:n.slice(0,c),h=n.length>c;return(0,V.jsx)(ye.UQ,{width:"100%",allowToggle:!0,children:(0,V.jsxs)(ye.Qd,{border:"0px",children:[(0,V.jsx)(r.X6,{height:"56px",children:(0,V.jsxs)(ye.KF,{height:"100%",children:[(0,V.jsx)(r.xu,{flex:"1",alignItems:"center",justifyContent:"center",textAlign:"left",fontWeight:600,children:t}),(0,V.jsx)(ye.XE,{})]})}),(0,V.jsxs)(ye.Hk,{children:[(0,V.jsx)(r.MI,{columns:s,children:f.map((function(e){return(0,V.jsx)(Pe,_e(_e({},e),{},{onCheckboxChange:i}),e.value)}))}),!d&&h?(0,V.jsx)(y.zx,{size:"sm",variant:"ghost",onClick:function(){p(!0)},children:"View more"}):null,d&&h?(0,V.jsx)(y.zx,{size:"sm",variant:"ghost",onClick:function(){p(!1)},children:"View less"}):null]})]})})},De=function(e){var n=e.isOpen,t=e.isTcfEnabled,r=e.onClose,i=e.resetFilters,o=e.purposeOptions,s=e.onPurposeChange,a=e.dataUseOptions,l=e.onDataUseChange,c=e.legalBasisOptions,u=e.onLegalBasisChange,d=e.consentCategoryOptions,p=e.onConsentCategoryChange;return(0,V.jsx)(Oe,{isOpen:n,onClose:r,resetFilters:i,children:(0,V.jsxs)(Ce,{children:[t?(0,V.jsx)(Se,{options:o,onCheckboxChange:s,header:"TCF purposes",columns:1,numDefaultOptions:5}):null,(0,V.jsx)(Se,{options:a,onCheckboxChange:l,header:"Data uses"}),t?(0,V.jsx)(Se,{options:c,onCheckboxChange:u,header:"Legal basis"}):null,t?null:(0,V.jsx)(Se,{options:d,onCheckboxChange:p,header:"Consent categories"})]})})},ze=function(e){var n=e.isOpen,t=e.onClose,i=e.fidesKey,o=(0,z.ho)(i),s=o.data,a=o.isLoading;return(0,V.jsxs)(A.u_,{isOpen:n,onClose:t,size:"xxl",returnFocusOnClose:!1,isCentered:!0,children:[(0,V.jsx)(A.ZA,{}),(0,V.jsxs)(A.hz,{maxWidth:"800px",children:[(0,V.jsx)(A.xB,{children:"Vendor"}),(0,V.jsx)(A.fe,{children:a?(0,V.jsx)(r.kC,{width:"100%",height:"324px",alignItems:"center",justifyContent:"center",children:(0,V.jsx)(B.$,{})}):(0,V.jsx)(C.J9,{initialValues:s,enableReinitialize:!0,onSubmit:function(){},children:function(e){var n=e.values;return(0,V.jsxs)(C.l0,{children:[(0,V.jsx)(r.xu,{mb:6,children:(0,V.jsx)(w.j0,{label:"Vendor Name",variant:"stacked",name:"name",disabled:!0})}),Object.entries((null===n||void 0===n?void 0:n.purposes)||{}).length>0?(0,V.jsx)(w.__,{children:" Purposes "}):null,(0,V.jsx)(C.F2,{name:"purposes",render:function(){return(0,V.jsx)(ye.UQ,{allowMultiple:!0,children:Object.entries(n.purposes).map((function(e,n){var t=(0,g.Z)(e,1)[0];return(0,V.jsx)(ye.Qd,{children:function(e){var n=e.isExpanded;return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(ye.KF,{backgroundColor:n?"gray.50":"unset",children:[(0,V.jsx)(r.xu,{flex:"1",textAlign:"left",children:t}),(0,V.jsx)(ye.XE,{})]}),(0,V.jsxs)(ye.Hk,{backgroundColor:"gray.50",children:[(0,V.jsx)(r.xu,{my:4,children:(0,V.jsx)(w.VT,{label:"Data Uses",isMulti:!0,disableMenu:!0,isDisabled:!0,options:[],variant:"stacked",name:"purposes['".concat(t,"'].data_uses")})}),(0,V.jsx)(w.VT,{label:"Legal Basis",isMulti:!0,disableMenu:!0,isDisabled:!0,options:[],variant:"stacked",name:"purposes['".concat(t,"'].legal_bases")})]})]})}},n)}))})}}),(0,V.jsx)(r.xu,{my:4,children:(0,V.jsx)(w.VT,{label:"Features",isMulti:!0,options:[],disableMenu:!0,isDisabled:!0,variant:"stacked",name:"features"})}),(0,V.jsx)(w.VT,{label:"Data Categories",isMulti:!0,options:[],disableMenu:!0,isDisabled:!0,variant:"stacked",name:"data_categories"})]})}})}),(0,V.jsxs)(A.mz,{children:[(0,V.jsxs)(y.zx,{variant:"outline",size:"sm",onClick:t,children:["Close"," "]}),(0,V.jsx)(r.LZ,{})]})]})]})};function Ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Te(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ee(Object(t),!0).forEach((function(n){(0,m.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ee(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Fe=(0,xe.Cl)(),Ze={items:[],total:0,page:1,size:25,pages:1},Re=function(){var e=(0,o.hz)().tcf,n=(0,z.x8)().isLoading,t=function(){var e=(0,b.qY)();return{isOpen:e.isOpen,onOpen:e.onOpen,onClose:e.onClose}}(),i=t.isOpen,s=t.onOpen,a=t.onClose,c=(0,l.useState)(),u=c[0],d=c[1],f=function(){var e=(0,b.qY)(),n=e.isOpen,t=e.onClose,r=e.onOpen;(0,G.fd)();var i=(0,k.C)(G.U3);(0,ke.a4)();var o=(0,k.C)(ke.ZS),s=(0,l.useState)([]),a=s[0],c=s[1],u=(0,l.useState)([]),d=u[0],f=u[1],h=(0,l.useState)([{displayText:"Consent",value:"Consent",isChecked:!1},{displayText:"Legitimate Interest",value:"Legitimate interests",isChecked:!1}]),g=h[0],m=h[1],x=(0,l.useState)([{displayText:"Advertising",value:"advertising",isChecked:!1},{displayText:"Analytics",value:"analytics",isChecked:!1},{displayText:"Functional",value:"functional",isChecked:!1},{displayText:"Essential",value:"essential",isChecked:!1}]),v=x[0],j=x[1];(0,l.useEffect)((function(){0===d.length&&f(i.map((function(e){return{value:e.fides_key,displayText:e.name||e.fides_key,isChecked:!1}})))}),[i,d,f]),(0,l.useEffect)((function(){0===a.length&&c([].concat((0,p.Z)(Object.entries(o.purposes).map((function(e){return{value:"normal.".concat(e[0]),displayText:e[1].name,isChecked:!1}}))),(0,p.Z)(Object.entries(o.special_purposes).map((function(e){return{value:"special.".concat(e[0]),displayText:e[1].name,isChecked:!1}})))))}),[o,a,f]);var y=function(e,n,t,r){r(t.map((function(t){return t.value===e?_e(_e({},t),{},{isChecked:n}):t})))};return{isOpen:n,onClose:t,onOpen:r,resetFilters:function(){f((function(e){return e.map((function(e){return _e(_e({},e),{},{isChecked:!1})}))})),m((function(e){return e.map((function(e){return _e(_e({},e),{},{isChecked:!1})}))})),c((function(e){return e.map((function(e){return _e(_e({},e),{},{isChecked:!1})}))})),j((function(e){return e.map((function(e){return _e(_e({},e),{},{isChecked:!1})}))}))},purposeOptions:a,onPurposeChange:function(e,n){y(e,n,a,c)},dataUseOptions:d,onDataUseChange:function(e,n){y(e,n,d,f)},legalBasisOptions:g,onLegalBasisChange:function(e,n){y(e,n,g,m)},consentCategoryOptions:v,onConsentCategoryChange:function(e,n){y(e,n,v,j)}}}(),h=f.isOpen,g=f.onOpen,m=f.onClose,x=f.resetFilters,v=f.purposeOptions,j=f.onPurposeChange,C=f.dataUseOptions,O=f.onDataUseChange,w=f.legalBasisOptions,_=f.onLegalBasisChange,P=f.consentCategoryOptions,S=f.onConsentCategoryChange,D=function(e,n){var t=e.filter((function(e){return e.isChecked}));return t.length>0?"".concat(n,"=").concat(t.map((function(e){return e.value})).join("&".concat(n,"="))):void 0},E=(0,l.useMemo)((function(){return D(C,"data_uses")}),[C]),T=(0,l.useMemo)((function(){return D(w,"legal_bases")}),[w]),F=(0,l.useMemo)((function(){var e=v.filter((function(e){return e.value.includes("normal")})).map((function(e){return Te(Te({},e),{},{value:e.value.split(".")[1]})}));return D(e,"purposes")}),[v]),Z=(0,l.useMemo)((function(){var e=v.filter((function(e){return e.value.includes("special")})).map((function(e){return Te(Te({},e),{},{value:e.value.split(".")[1]})}));return D(e,"special_purposes")}),[v]),R=(0,l.useMemo)((function(){return D(P,"consent_category")}),[P]),M=(0,be.oi)(),A=M.PAGE_SIZES,I=M.pageSize,N=M.setPageSize,L=M.onPreviousPageClick,U=M.isPreviousPageDisabled,B=M.onNextPageClick,H=M.isNextPageDisabled,W=M.startRange,q=M.endRange,K=M.pageIndex,X=M.setTotalPages,Q=M.resetPageIndexToDefault,$=(0,l.useState)(),Y=$[0],J=$[1],ee=(0,z.de)({pageIndex:K,pageSize:I,dataUses:E,search:Y,legalBasis:T,purposes:F,specialPurposes:Z,consentCategories:R}),ne=ee.isFetching,te=ee.isLoading,re=ee.data,ie=(0,l.useMemo)((function(){return re||Ze}),[re]),oe=ie.items,se=ie.total,ae=ie.pages;(0,l.useEffect)((function(){X(ae)}),[ae,X]);var le=(0,l.useMemo)((function(){return[Fe.accessor((function(e){return e.name}),{id:"name",cell:function(e){return(0,V.jsx)(be.G3,{value:e.getValue()})},header:function(e){return(0,V.jsx)(be.Rr,Te({value:"Vendor"},e))},meta:{maxWidth:"350px"}}),Fe.accessor((function(e){return e.data_uses}),{id:"tcf_purpose",cell:function(e){return(0,V.jsx)(be.A4,{suffix:"purposes",value:e.getValue()})},header:function(e){return(0,V.jsx)(be.Rr,Te({value:"TCF purpose"},e))},meta:{width:"175px"}}),Fe.accessor((function(e){return e.data_uses}),{id:"data_uses",cell:function(e){return(0,V.jsx)(be.A4,{suffix:"data uses",value:e.getValue()})},header:function(e){return(0,V.jsx)(be.Rr,Te({value:"Data use"},e))},meta:{width:"175px"}}),Fe.accessor((function(e){return e.legal_bases}),{id:"legal_bases",cell:function(e){return(0,V.jsx)(be.A4,{suffix:"bases",value:e.getValue()})},header:function(e){return(0,V.jsx)(be.Rr,Te({value:"Legal basis"},e))},meta:{width:"175px"}}),Fe.accessor((function(e){return e.consent_categories}),{id:"consent_categories",cell:function(e){return(0,V.jsx)(be.A4,{suffix:"Categories",value:e.getValue()})},header:function(e){return(0,V.jsx)(be.Rr,Te({value:"Categories"},e))},meta:{width:"175px"}}),Fe.accessor((function(e){return e.cookies}),{id:"cookies",cell:function(e){return(0,V.jsx)(be.A4,{suffix:"Cookies",value:e.getValue()})},header:function(e){return(0,V.jsx)(be.Rr,Te({value:"Cookies"},e))},meta:{width:"175px"}})]}),[]),ce=(0,ve.b7)({columns:le,data:oe,state:{columnVisibility:{tcf_purpose:e,data_uses:e,legal_bases:e,consent_categories:!e,cookies:!e}},getCoreRowModel:(0,xe.sC)()});return te||n?(0,V.jsx)(be.I4,{rowHeight:36,numRows:15}):(0,V.jsxs)(r.kC,{flex:1,direction:"column",overflow:"auto",children:[i&&u?(0,V.jsx)(ze,{isOpen:i,fidesKey:u,onClose:a}):null,(0,V.jsxs)(be.Q$,{children:[(0,V.jsx)(be.HO,{globalFilter:Y,setGlobalFilter:function(e){Q(),J(e)},placeholder:"Search"}),(0,V.jsx)(De,{isOpen:h,isTcfEnabled:e,onClose:m,resetFilters:x,purposeOptions:v,onPurposeChange:j,dataUseOptions:C,onDataUseChange:O,legalBasisOptions:w,onLegalBasisChange:_,consentCategoryOptions:P,onConsentCategoryChange:S}),(0,V.jsx)(r.kC,{alignItems:"center",children:(0,V.jsx)(y.zx,{onClick:g,"data-testid":"filter-multiple-systems-btn",size:"xs",variant:"outline",children:"Filter"})})]}),(0,V.jsx)(be.ZK,{tableInstance:ce,onRowClick:function(e){d(e.fides_key),s()}}),(0,V.jsx)(be.s8,{totalRows:se,pageSizes:A,setPageSize:N,onPreviousPageClick:L,isPreviousPageDisabled:U||ne,onNextPageClick:B,isNextPageDisabled:H||ne,startRange:W,endRange:q})]})},Me=function(e){var n=e.includeAddVendors,t=e.title,o=e.breadCrumbText,s=e.description;return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(r.xu,{mb:4,children:[(0,V.jsx)(r.X6,{fontSize:"2xl",fontWeight:"semibold",mb:2,"data-testid":"header",children:t}),(0,V.jsx)(r.xu,{children:(0,V.jsxs)(i.aG,{fontWeight:"medium",fontSize:"sm",color:"gray.600","data-testid":"breadcrumbs",children:[(0,V.jsx)(i.gN,{children:(0,V.jsx)(a(),{href:d.zo,children:"Consent"})}),(0,V.jsx)(i.gN,{color:"complimentary.500",children:(0,V.jsx)(a(),{href:"#",children:o})})]})})]}),(0,V.jsxs)(r.kC,{children:[(0,V.jsx)(r.xv,{fontSize:"sm",mb:8,width:{base:"100%",lg:"50%"},children:s}),n?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(r.LZ,{}),(0,V.jsx)(Y,{})]}):null]})]})},Ae=function(){return(0,o.hz)().tcf?(0,V.jsxs)(c.Z,{title:"Configure consent",mainProps:{padding:"40px",paddingRight:"48px"},children:[(0,V.jsx)(Me,{includeAddVendors:!0,title:"Manage your vendors",breadCrumbText:"Vendors",description:"Use the table below to manage your vendors. Modify the legal basis for a vendor if permitted and view and group your views by applying different filters"}),(0,V.jsx)(Re,{})]}):(0,V.jsxs)(u.Z,{title:"Configure consent",children:[(0,V.jsx)(Me,{title:"Configure consent",breadCrumbText:"Configure consent",description:"Your current cookies and tracking information."}),(0,V.jsx)(me,{})]})}},54727:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/consent/configure",function(){return t(24768)}])}},function(e){e.O(0,[2141,845,8301,8194,3893,331,3139,5232,4968,7011,9774,2888,179],(function(){return n=54727,e(e.s=n);var n}));var n=e.O();_N_E=n}]);